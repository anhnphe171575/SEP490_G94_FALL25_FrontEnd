{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/SEP490/SEP490_G94_FALL25_FrontEnd/ultis/axios.js"],"sourcesContent":["// lib/axios.js\nimport axios from 'axios';\nimport { useState } from 'react';\n\n// Debug log để kiểm tra env\n\n\nconst axiosInstance = axios.create({\n  baseURL: process.env.NEXT_PUBLIC_API_URL,\n  timeout: 30000,\n  headers: {\n    'Content-Type': 'application/json',\n    'Accept': 'application/json'\n  },\n});\n\n// Request interceptor\naxiosInstance.interceptors.request.use(\n  (config) => {\n    const token = typeof window !== 'undefined' ? sessionStorage.getItem('token') : null;\n    if (token) {\n      config.headers.Authorization = `Bearer ${token}`;\n    }\n    \n    // Don't set Content-Type for FormData, let axios handle it automatically\n    if (config.data instanceof FormData) {\n      delete config.headers['Content-Type'];\n    }\n    \n    if (process.env.NODE_ENV === 'development') {\n    \n    }\n    \n    return config;\n  },\n  (error) => {\n    return Promise.reject(error);\n  }\n);\n\n// Response interceptor\naxiosInstance.interceptors.response.use(\n  (response) => {\n    if (process.env.NODE_ENV === 'development') {\n      \n    }\n    return response;\n  },\n  (error) => {\n    if (process.env.NODE_ENV === 'development') {\n    }\n    \n    // Xử lý lỗi chung\n    if (error.response?.status === 401) {\n      if (typeof window !== 'undefined') {\n        localStorage.removeItem('token');\n        window.location.href = '/login';\n      }\n    }\n    if (error.response?.status === 403) {\n      if (typeof window !== 'undefined') {\n        window.location.href = '/not-found';\n      }\n    }\n    \n    if (error.response?.status === 500) {\n      console.error('Server Error:', error.response.data);\n    }\n    \n    return Promise.reject(error);\n  }\n);\n\nexport default axiosInstance;\n\n// Export các method thường dùng\nexport const api = {\n  get: (url, config) => axiosInstance.get(url, config),\n  post: (url, data, config) => axiosInstance.post(url, data, config),\n  put: (url, data, config) => axiosInstance.put(url, data, config),\n  patch: (url, data, config) => axiosInstance.patch(url, data, config),\n  delete: (url, config) => axiosInstance.delete(url, config),\n  \n  // Review API methods\n  reviews: {\n    // Create a new review\n    create: (reviewData) => axiosInstance.post('/reviews', reviewData),\n    \n    // Get all reviews\n    getAll: () => axiosInstance.get('/reviews'),\n    \n    // Get reviews for a specific product\n    getByProduct: (productId) => axiosInstance.get(`/reviews/product/${productId}`),\n    \n    // Get unreviewed products for a user\n    getUnreviewed: (productId) => axiosInstance.get(`/reviews/unreviewed/${productId}`),\n    \n    // Update a review\n    update: (reviewId, reviewData) => axiosInstance.put(`/reviews/${reviewId}`, reviewData),\n    \n    // Delete a review\n    delete: (reviewId) => axiosInstance.delete(`/reviews/${reviewId}`),\n  },\n};\n\n// Utility functions cho các trường hợp đặc biệt\nexport const apiUtils = {\n  // Upload file\n  uploadFile: (url, file, onUploadProgress) => {\n    const formData = new FormData();\n    formData.append('file', file);\n    \n    return axiosInstance.post(url, formData, {\n      headers: {\n        'Content-Type': 'multipart/form-data',\n      },\n      onUploadProgress,\n    });\n  },\n  \n  // Download file\n  downloadFile: async (url, filename) => {\n    try {\n      const response = await axiosInstance.get(url, {\n        responseType: 'blob',\n      });\n      \n      const blob = new Blob([response.data]);\n      const downloadUrl = window.URL.createObjectURL(blob);\n      const link = document.createElement('a');\n      link.href = downloadUrl;\n      link.download = filename;\n      link.click();\n      window.URL.revokeObjectURL(downloadUrl);\n    } catch (error) {\n      console.error('Download failed:', error);\n      throw error;\n    }\n  },\n\n  // Create review\n  createReview: async (reviewData) => {\n    try {\n      const response = await axiosInstance.post('/reviews', reviewData);\n      return response.data;\n    } catch (error) {\n      console.error('Create review failed:', error);\n      throw error;\n    }\n  },\n};\n\n// Custom hooks cho React components\nexport const useApi = () => {\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  \n  const request = async (apiCall) => {\n    try {\n      setLoading(true);\n      setError(null);\n      const response = await apiCall();\n      return response.data;\n    } catch (err) {\n      setError(err);\n      throw err;\n    } finally {\n      setLoading(false);\n    }\n  };\n  \n  return { request, loading, error };\n};"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 166, "column": 0}, "map": {"version":3,"sources":["file:///D:/SEP490/SEP490_G94_FALL25_FrontEnd/src/components/ResponsiveSidebar.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport Link from \"next/link\";\r\nimport { usePathname, useRouter } from \"next/navigation\";\r\nimport { useEffect, useState } from \"react\";\r\nimport axiosInstance from \"../../ultis/axios\";\r\n\r\nconst navItems = [\r\n  { href: \"/dashboard\", label: \"Dashboard\", icon: (\r\n    <svg className=\"w-5 h-5\" aria-hidden=\"true\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"currentColor\" viewBox=\"0 0 22 21\">\r\n      <path d=\"M16.975 11H10V4.025a1 1 0 0 0-1.066-.998 8.5 8.5 0 1 0 9.039 9.039.999.999 0 0 0-1-1.066h.002Z\"/>\r\n      <path d=\"M12.5 0c-.157 0-.311.01-.565.027A1 1 0 0 0 11 1.02V10h8.975a1 1 0 0 0 1-.935c.013-.188.028-.374.028-.565A8.51 8.51 0 0 0 12.5 0Z\"/>\r\n    </svg>\r\n  )},\r\n  { href: \"/\", label: \"Dự án\", icon: (\r\n    <svg className=\"w-5 h-5\" aria-hidden=\"true\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"currentColor\" viewBox=\"0 0 18 18\">\r\n      <path d=\"M6.143 0H1.857A1.857 1.857 0 0 0 0 1.857v4.286C0 7.169.831 8 1.857 8h4.286A1.857 1.857 0 0 0 8 6.143V1.857A1.857 1.857 0 0 0 6.143 0Zm10 0h-4.286A1.857 1.857 0 0 0 10 1.857v4.286C10 7.169 10.831 8 11.857 8h4.286A1.857 1.857 0 0 0 18 6.143V1.857A1.857 1.857 0 0 0 16.143 0Zm-10 10H1.857A1.857 1.857 0 0 0 0 11.857v4.286C0 17.169.831 18 1.857 18h4.286A1.857 1.857 0 0 0 8 16.143v-4.286A1.857 1.857 0 0 0 6.143 10Zm10 0h-4.286A1.857 1.857 0 0 0 10 11.857v4.286c0 1.026.831 1.857 1.857 1.857h4.286A1.857 1.857 0 0 0 18 16.143v-4.286A1.857 1.857 0 0 0 16.143 10Z\"/>\r\n    </svg>\r\n  )},\r\n  { href: \"/myprofile\", label: \"Users\", icon: (\r\n    <svg className=\"w-5 h-5\" aria-hidden=\"true\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"currentColor\" viewBox=\"0 0 20 18\">\r\n      <path d=\"M14 2a3.963 3.963 0 0 0-1.4.267 6.439 6.439 0 0 1-1.331 6.638A4 4 0 1 0 14 2Zm1 9h-1.264A6.957 6.957 0 0 1 15 15v2a2.97 2.97 0 0 1-.184 1H19a1 1 0 0 0 1-1v-1a5.006 5.006 0 0 0-5-5ZM6.5 9a4.5 4.5 0 1 0 0-9 4.5 4.5 0 0 0 0 9ZM8 10H5a5.006 5.006 0 0 0-5 5v2a1 1 0 0 0 1 1h11a1 1 0 0 0 1-1v-2a5.006 5.006 0 0 0-5-5Z\"/>\r\n    </svg>\r\n  )},\r\n];\r\n\r\nexport default function ResponsiveSidebar() {\r\n  const pathname = usePathname();\r\n  const router = useRouter();\r\n  const [open, setOpen] = useState(false);\r\n  const [me, setMe] = useState<{ full_name?: string; email?: string; avatar?: string } | null>(null);\r\n\r\n  useEffect(() => {\r\n    setOpen(false);\r\n  }, [pathname]);\r\n\r\n  useEffect(() => {\r\n    (async () => {\r\n      try {\r\n        const token = typeof window !== 'undefined' ? (sessionStorage.getItem('token') || localStorage.getItem('token')) : null;\r\n        if (!token) return;\r\n        const res = await axiosInstance.get('/api/users/me');\r\n        setMe(res.data || null);\r\n      } catch {\r\n        // silently ignore\r\n      }\r\n    })();\r\n  }, []);\r\n\r\n  const onLogout = () => {\r\n    if (typeof window !== 'undefined') {\r\n      sessionStorage.removeItem('token');\r\n      localStorage.removeItem('token');\r\n    }\r\n    router.replace('/login');\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <button\r\n        type=\"button\"\r\n        aria-controls=\"default-sidebar\"\r\n        aria-expanded={open}\r\n        onClick={() => setOpen((v) => !v)}\r\n        className=\"inline-flex items-center p-2 mt-2 ms-3 text-sm text-gray-500 rounded-lg md:hidden hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200\"\r\n      >\r\n        <span className=\"sr-only\">Open sidebar</span>\r\n        <svg className=\"w-6 h-6\" aria-hidden=\"true\" fill=\"currentColor\" viewBox=\"0 0 20 20\" xmlns=\"http://www.w3.org/2000/svg\">\r\n          <path clipRule=\"evenodd\" fillRule=\"evenodd\" d=\"M2 4.75A.75.75 0 012.75 4h14.5a.75.75 0 010 1.5H2.75A.75.75 0 012 4.75zm0 10.5a.75.75 0 01.75-.75h7.5a.75.75 0 010 1.5h-7.5a.75.75 0 01-.75-.75zM2 10a.75.75 0 01.75-.75h14.5a.75.75 0 010 1.5H2.75A.75.75 0 012 10z\"></path>\r\n        </svg>\r\n      </button>\r\n\r\n      <aside\r\n        id=\"default-sidebar\"\r\n        className={`fixed top-0 left-0 z-40 w-64 h-screen transition-transform ${open ? 'translate-x-0' : '-translate-x-full'} md:translate-x-0`}\r\n        aria-label=\"Sidebar\"\r\n      >\r\n        <div className=\"h-full px-3 py-4 overflow-y-auto glass\">\r\n          {me ? (\r\n            <div className=\"mb-4 flex items-center gap-3 p-3 card\">\r\n              <div className=\"h-10 w-10 rounded-full flex items-center justify-center overflow-hidden bg-gray-100\">\r\n                {me.avatar ? (\r\n                  // eslint-disable-next-line @next/next/no-img-element\r\n                  <img src={me.avatar} alt=\"avatar\" className=\"h-full w-full object-cover\" />\r\n                ) : (\r\n                  <span className=\"text-sm font-semibold text-gray-600\">{(me.full_name?.[0] || me.email?.[0] || 'U').toUpperCase()}</span>\r\n                )}\r\n              </div>\r\n              <div className=\"truncate\">\r\n                <div className=\"text-sm font-medium truncate\">{me.full_name || 'User'}</div>\r\n                <div className=\"text-xs text-gray-500 truncate\">{me.email || ''}</div>\r\n              </div>\r\n            </div>\r\n          ) : null}\r\n\r\n          <ul className=\"space-y-2 font-medium\">\r\n            {navItems.map((item) => {\r\n              const active = pathname === item.href;\r\n              return (\r\n                <li key={`${item.href}-${item.label}`}>\r\n                  <Link\r\n                    href={item.href}\r\n                    className={`flex items-center p-2 rounded-lg group border transition-colors ${active ? 'bg-[var(--muted)] border-[var(--border)] text-gray-900' : 'hover:bg-[var(--muted)] border-transparent text-gray-900'}`}\r\n                  >\r\n                    <span className=\"text-gray-500 group-hover:text-gray-900\">{item.icon}</span>\r\n                    <span className=\"ms-3\">{item.label}</span>\r\n                  </Link>\r\n                </li>\r\n              );\r\n            })}\r\n            <li>\r\n              <button\r\n                onClick={onLogout}\r\n                className=\"w-full text-left flex items-center p-2 rounded-lg border hover:bg-[var(--muted)] text-gray-900 transition-colors\"\r\n                style={{borderColor: 'var(--border)'}}\r\n              >\r\n                <svg className=\"w-5 h-5 text-gray-500\" aria-hidden=\"true\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 18 16\">\r\n                  <path stroke=\"currentColor\" strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M1 8h11m0 0L8 4m4 4-4 4m4-11h3a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-3\"/>\r\n                </svg>\r\n                <span className=\"ms-3\">Đăng xuất</span>\r\n              </button>\r\n            </li>\r\n          </ul>\r\n        </div>\r\n      </aside>\r\n    </>\r\n  );\r\n}\r\n\r\n\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 527, "column": 0}, "map": {"version":3,"sources":["file:///D:/SEP490/SEP490_G94_FALL25_FrontEnd/src/app/dashboard/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useState } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport axiosInstance from \"../../../ultis/axios\";\r\nimport ResponsiveSidebar from \"@/components/ResponsiveSidebar\";\r\nimport { \r\n  Box, \r\n  Button, \r\n  Card, \r\n  CardActions, \r\n  CardContent, \r\n  CardHeader, \r\n  Chip, \r\n  Container, \r\n  Grid, \r\n  Typography,\r\n  Dialog,\r\n  DialogTitle,\r\n  DialogContent,\r\n  DialogActions,\r\n  TextField,\r\n  Alert,\r\n  CircularProgress,\r\n  IconButton\r\n} from \"@mui/material\";\r\nimport { \r\n  Add as AddIcon,\r\n  Login as LoginIcon,\r\n  Close as CloseIcon,\r\n  Group as GroupIcon\r\n} from \"@mui/icons-material\";\r\n\r\ntype Project = {\r\n  _id: string;\r\n  title: string;\r\n  code: string;\r\n};\r\n\r\nexport default function DashboardPage() {\r\n  const router = useRouter();\r\n  const [projects, setProjects] = useState<Project[] | null>(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n  \r\n  // Join project dialog states\r\n  const [openJoinDialog, setOpenJoinDialog] = useState(false);\r\n  const [teamCode, setTeamCode] = useState(\"\");\r\n  const [joinLoading, setJoinLoading] = useState(false);\r\n  const [joinError, setJoinError] = useState<string | null>(null);\r\n  const [joinSuccess, setJoinSuccess] = useState<string | null>(null);\r\n\r\n  useEffect(() => {\r\n    const token = typeof window !== 'undefined' ? (sessionStorage.getItem('token') || localStorage.getItem('token')) : null;\r\n    if (!token) {\r\n      router.replace('/login');\r\n      return;\r\n    }\r\n    (async () => {\r\n      try {\r\n        // Assuming endpoint exists: /api/projects (adjust if different)\r\n        const res = await axiosInstance.get('/api/projects');\r\n        const list = Array.isArray(res.data) ? res.data : (res.data?.items || []);\r\n        if (!list || list.length === 0) {\r\n          router.replace('/no-project');\r\n          return;\r\n        }\r\n        setProjects(list);\r\n      } catch (e: any) {\r\n        if (e?.response?.status === 404) {\r\n          router.replace('/no-project');\r\n          return;\r\n        }\r\n        setError(e?.response?.data?.message || 'Không thể tải danh sách dự án');\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    })();\r\n  }, [router]);\r\n\r\n  // Handle join project by team code\r\n  const handleJoinProject = async () => {\r\n    if (!teamCode.trim()) {\r\n      setJoinError(\"Vui lòng nhập mã nhóm\");\r\n      return;\r\n    }\r\n\r\n    setJoinLoading(true);\r\n    setJoinError(null);\r\n    \r\n    try {\r\n      const response = await axiosInstance.post(`/api/team/join/${teamCode.trim()}`);\r\n      \r\n      setJoinSuccess(\"Tham gia nhóm thành công!\");\r\n      setTeamCode(\"\");\r\n      \r\n      // Redirect to the project after 2 seconds\r\n      setTimeout(() => {\r\n        const projectId = response.data.data.team.project_id._id;\r\n        router.push(`/projects/${projectId}`);\r\n      }, 2000);\r\n      \r\n    } catch (e: any) {\r\n      const errorMessage = e?.response?.data?.message || \"Không thể tham gia nhóm\";\r\n      setJoinError(errorMessage);\r\n    } finally {\r\n      setJoinLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleCloseJoinDialog = () => {\r\n    setOpenJoinDialog(false);\r\n    setTeamCode(\"\");\r\n    setJoinError(null);\r\n    setJoinSuccess(null);\r\n  };\r\n\r\n  if (loading) return <main className=\"p-6\">Đang tải...</main>;\r\n  if (error) return <main className=\"p-6 text-red-600\">{error}</main>;\r\n  if (!projects) return null;\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-[var(--background)]\">\r\n      <ResponsiveSidebar />\r\n      <main className=\"p-4 md:p-6 md:ml-64\">\r\n        <Container maxWidth=\"lg\">\r\n          <Box sx={{ mb: { xs: 3, md: 4 }, display: \"flex\", flexDirection: { xs: \"column\", md: \"row\" }, gap: 2, alignItems: { md: \"center\" }, justifyContent: { md: \"space-between\" } }}>\r\n            <Box>\r\n              <Typography variant=\"h4\" sx={{ color: \"primary.main\", fontWeight: 700 }}>Dự án</Typography>\r\n              <Typography variant=\"body2\" color=\"text.secondary\">Quản lý và truy cập nhanh các dự án của bạn</Typography>\r\n            </Box>\r\n            <Box sx={{ display: \"flex\", gap: 1 }}>\r\n            <Button variant=\"outlined\">Lọc</Button>\r\n              <Button \r\n                variant=\"contained\" \r\n                startIcon={<LoginIcon />}\r\n                onClick={() => setOpenJoinDialog(true)}\r\n                sx={{ backgroundColor: \"success.main\", \"&:hover\": { backgroundColor: \"success.dark\" } }}\r\n              >\r\n                Vào dự án\r\n              </Button>\r\n            \r\n              <Button onClick={() => router.push('/projects/new')}>+ Tạo dự án</Button>\r\n            </Box>\r\n          </Box>\r\n          <div className=\"grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-3 gap-4\">\r\n            {projects.map((p) => (\r\n              <Card key={p._id} variant=\"outlined\" sx={{ borderRadius: 3, transition: 'box-shadow .2s', '&:hover': { boxShadow: 2 } }}>\r\n                <CardHeader\r\n                  title={<Typography variant=\"h6\" fontWeight={700}>{p.title}</Typography>}\r\n                  subheader={<Typography variant=\"caption\" color=\"text.secondary\">Mã: {p.code}</Typography>}\r\n                  action={<Chip label=\"📁\" variant=\"outlined\" />}\r\n                />\r\n                <CardContent>\r\n                  <Typography variant=\"body2\" color=\"text.secondary\">Theo dõi tiến độ, quản lý milestone và tài liệu.</Typography>\r\n                </CardContent>\r\n                <CardActions sx={{ px: 2, pb: 2 }}>\r\n                  <Button size=\"small\" variant=\"outlined\" onClick={() => router.push(`/projects/${p._id}`)}>Mở</Button>\r\n                  <Button size=\"small\" variant=\"text\" onClick={() => router.push(`/projects/${p._id}`)}>Chi tiết</Button>\r\n                </CardActions>\r\n              </Card>\r\n            ))}\r\n          </div>\r\n        </Container>\r\n      </main>\r\n\r\n      {/* Join Project Dialog */}\r\n      <Dialog open={openJoinDialog} onClose={handleCloseJoinDialog} maxWidth=\"sm\" fullWidth>\r\n        <DialogTitle className=\"flex items-center justify-between\">\r\n          <div className=\"flex items-center gap-2\">\r\n            <GroupIcon className=\"text-blue-500\" />\r\n            <span>Tham gia dự án</span>\r\n          </div>\r\n          <IconButton onClick={handleCloseJoinDialog} size=\"small\">\r\n            <CloseIcon />\r\n          </IconButton>\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          <div className=\"space-y-4 pt-4\">\r\n            {/* Success Message */}\r\n            {joinSuccess && (\r\n              <Alert severity=\"success\" onClose={() => setJoinSuccess(null)}>\r\n                {joinSuccess}\r\n                <Typography variant=\"body2\" className=\"mt-1\">\r\n                  Đang chuyển hướng đến dự án...\r\n                </Typography>\r\n              </Alert>\r\n            )}\r\n            \r\n            {/* Error Message */}\r\n            {joinError && (\r\n              <Alert severity=\"error\" onClose={() => setJoinError(null)}>\r\n                {joinError}\r\n              </Alert>\r\n            )}\r\n            \r\n            <TextField\r\n              fullWidth\r\n              label=\"Mã nhóm\"\r\n              value={teamCode}\r\n              onChange={(e) => {\r\n                setTeamCode(e.target.value);\r\n                // Clear error when user starts typing\r\n                if (joinError) setJoinError(null);\r\n              }}\r\n              placeholder=\"Nhập mã nhóm để tham gia dự án\"\r\n              required\r\n              disabled={joinLoading}\r\n              helperText=\"Nhập mã nhóm được chia sẻ bởi trưởng nhóm\"\r\n              sx={{ \r\n                '& .MuiInputBase-input': { \r\n                  fontFamily: 'monospace',\r\n                  fontSize: '1.1rem',\r\n                  letterSpacing: '0.1em'\r\n                }\r\n              }}\r\n            />\r\n\r\n            <div className=\"bg-blue-50 dark:bg-blue-900/20 p-3 rounded-lg\">\r\n              <div className=\"flex items-start gap-2\">\r\n                <GroupIcon className=\"w-4 h-4 mt-0.5 text-blue-500\" />\r\n                <div>\r\n                  <Typography variant=\"body2\" color=\"text.secondary\" component=\"div\">\r\n                    <strong>Hướng dẫn:</strong>\r\n                  </Typography>\r\n                  <ul className=\"mt-1 ml-4 space-y-1 text-sm text-gray-600 dark:text-gray-300\">\r\n                    <li>• Nhập mã nhóm chính xác để tham gia dự án</li>\r\n                    <li>• Liên hệ trưởng nhóm để lấy mã nhóm</li>\r\n                  </ul>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={handleCloseJoinDialog} disabled={joinLoading}>\r\n            Hủy\r\n          </Button>\r\n          <Button\r\n            onClick={handleJoinProject}\r\n            variant=\"contained\"\r\n            disabled={!teamCode.trim() || joinLoading}\r\n            startIcon={joinLoading ? <CircularProgress size={16} /> : <LoginIcon />}\r\n          >\r\n            {joinLoading ? \"Đang tham gia...\" : \"Tham gia\"}\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n\r\n\r\n"],"names":[],"mappings":"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","debugId":null}}]
}