{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/SEP490/SEP490_G94_FALL25_FrontEnd/ultis/axios.js"],"sourcesContent":["// lib/axios.js\nimport axios from 'axios';\nimport { useState } from 'react';\n\n// Debug log để kiểm tra env\n\n\nconst axiosInstance = axios.create({\n  baseURL: process.env.NEXT_PUBLIC_API_URL,\n  timeout: 30000,\n  headers: {\n    'Content-Type': 'application/json',\n    'Accept': 'application/json'\n  },\n});\n\n// Request interceptor\naxiosInstance.interceptors.request.use(\n  (config) => {\n    const token = typeof window !== 'undefined' ? sessionStorage.getItem('token') : null;\n    if (token) {\n      config.headers.Authorization = `Bearer ${token}`;\n    }\n    \n    // Don't set Content-Type for FormData, let axios handle it automatically\n    if (config.data instanceof FormData) {\n      delete config.headers['Content-Type'];\n    }\n    \n    if (process.env.NODE_ENV === 'development') {\n    \n    }\n    \n    return config;\n  },\n  (error) => {\n    return Promise.reject(error);\n  }\n);\n\n// Response interceptor\naxiosInstance.interceptors.response.use(\n  (response) => {\n    if (process.env.NODE_ENV === 'development') {\n      \n    }\n    return response;\n  },\n  (error) => {\n    if (process.env.NODE_ENV === 'development') {\n    }\n    \n    // Xử lý lỗi chung\n    if (error.response?.status === 401) {\n      if (typeof window !== 'undefined') {\n        localStorage.removeItem('token');\n        window.location.href = '/login';\n      }\n    }\n    if (error.response?.status === 403) {\n      if (typeof window !== 'undefined') {\n        window.location.href = '/not-found';\n      }\n    }\n    \n    if (error.response?.status === 500) {\n      console.error('Server Error:', error.response.data);\n    }\n    \n    return Promise.reject(error);\n  }\n);\n\nexport default axiosInstance;\n\n// Export các method thường dùng\nexport const api = {\n  get: (url, config) => axiosInstance.get(url, config),\n  post: (url, data, config) => axiosInstance.post(url, data, config),\n  put: (url, data, config) => axiosInstance.put(url, data, config),\n  patch: (url, data, config) => axiosInstance.patch(url, data, config),\n  delete: (url, config) => axiosInstance.delete(url, config),\n  \n  // Review API methods\n  reviews: {\n    // Create a new review\n    create: (reviewData) => axiosInstance.post('/reviews', reviewData),\n    \n    // Get all reviews\n    getAll: () => axiosInstance.get('/reviews'),\n    \n    // Get reviews for a specific product\n    getByProduct: (productId) => axiosInstance.get(`/reviews/product/${productId}`),\n    \n    // Get unreviewed products for a user\n    getUnreviewed: (productId) => axiosInstance.get(`/reviews/unreviewed/${productId}`),\n    \n    // Update a review\n    update: (reviewId, reviewData) => axiosInstance.put(`/reviews/${reviewId}`, reviewData),\n    \n    // Delete a review\n    delete: (reviewId) => axiosInstance.delete(`/reviews/${reviewId}`),\n  },\n};\n\n// Utility functions cho các trường hợp đặc biệt\nexport const apiUtils = {\n  // Upload file\n  uploadFile: (url, file, onUploadProgress) => {\n    const formData = new FormData();\n    formData.append('file', file);\n    \n    return axiosInstance.post(url, formData, {\n      headers: {\n        'Content-Type': 'multipart/form-data',\n      },\n      onUploadProgress,\n    });\n  },\n  \n  // Download file\n  downloadFile: async (url, filename) => {\n    try {\n      const response = await axiosInstance.get(url, {\n        responseType: 'blob',\n      });\n      \n      const blob = new Blob([response.data]);\n      const downloadUrl = window.URL.createObjectURL(blob);\n      const link = document.createElement('a');\n      link.href = downloadUrl;\n      link.download = filename;\n      link.click();\n      window.URL.revokeObjectURL(downloadUrl);\n    } catch (error) {\n      console.error('Download failed:', error);\n      throw error;\n    }\n  },\n\n  // Create review\n  createReview: async (reviewData) => {\n    try {\n      const response = await axiosInstance.post('/reviews', reviewData);\n      return response.data;\n    } catch (error) {\n      console.error('Create review failed:', error);\n      throw error;\n    }\n  },\n};\n\n// Custom hooks cho React components\nexport const useApi = () => {\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  \n  const request = async (apiCall) => {\n    try {\n      setLoading(true);\n      setError(null);\n      const response = await apiCall();\n      return response.data;\n    } catch (err) {\n      setError(err);\n      throw err;\n    } finally {\n      setLoading(false);\n    }\n  };\n  \n  return { request, loading, error };\n};"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 166, "column": 0}, "map": {"version":3,"sources":["file:///D:/SEP490/SEP490_G94_FALL25_FrontEnd/src/components/ResponsiveSidebar.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport Link from \"next/link\";\r\nimport { usePathname, useRouter } from \"next/navigation\";\r\nimport { useEffect, useState } from \"react\";\r\nimport axiosInstance from \"../../ultis/axios\";\r\n\r\nconst navItems = [\r\n  { href: \"/dashboard\", label: \"Dashboard\", icon: (\r\n    <svg className=\"w-5 h-5\" aria-hidden=\"true\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"currentColor\" viewBox=\"0 0 22 21\">\r\n      <path d=\"M16.975 11H10V4.025a1 1 0 0 0-1.066-.998 8.5 8.5 0 1 0 9.039 9.039.999.999 0 0 0-1-1.066h.002Z\"/>\r\n      <path d=\"M12.5 0c-.157 0-.311.01-.565.027A1 1 0 0 0 11 1.02V10h8.975a1 1 0 0 0 1-.935c.013-.188.028-.374.028-.565A8.51 8.51 0 0 0 12.5 0Z\"/>\r\n    </svg>\r\n  )},\r\n  { href: \"/\", label: \"Dự án\", icon: (\r\n    <svg className=\"w-5 h-5\" aria-hidden=\"true\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"currentColor\" viewBox=\"0 0 18 18\">\r\n      <path d=\"M6.143 0H1.857A1.857 1.857 0 0 0 0 1.857v4.286C0 7.169.831 8 1.857 8h4.286A1.857 1.857 0 0 0 8 6.143V1.857A1.857 1.857 0 0 0 6.143 0Zm10 0h-4.286A1.857 1.857 0 0 0 10 1.857v4.286C10 7.169 10.831 8 11.857 8h4.286A1.857 1.857 0 0 0 18 6.143V1.857A1.857 1.857 0 0 0 16.143 0Zm-10 10H1.857A1.857 1.857 0 0 0 0 11.857v4.286C0 17.169.831 18 1.857 18h4.286A1.857 1.857 0 0 0 8 16.143v-4.286A1.857 1.857 0 0 0 6.143 10Zm10 0h-4.286A1.857 1.857 0 0 0 10 11.857v4.286c0 1.026.831 1.857 1.857 1.857h4.286A1.857 1.857 0 0 0 18 16.143v-4.286A1.857 1.857 0 0 0 16.143 10Z\"/>\r\n    </svg>\r\n  )},\r\n  { href: \"/myprofile\", label: \"Users\", icon: (\r\n    <svg className=\"w-5 h-5\" aria-hidden=\"true\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"currentColor\" viewBox=\"0 0 20 18\">\r\n      <path d=\"M14 2a3.963 3.963 0 0 0-1.4.267 6.439 6.439 0 0 1-1.331 6.638A4 4 0 1 0 14 2Zm1 9h-1.264A6.957 6.957 0 0 1 15 15v2a2.97 2.97 0 0 1-.184 1H19a1 1 0 0 0 1-1v-1a5.006 5.006 0 0 0-5-5ZM6.5 9a4.5 4.5 0 1 0 0-9 4.5 4.5 0 0 0 0 9ZM8 10H5a5.006 5.006 0 0 0-5 5v2a1 1 0 0 0 1 1h11a1 1 0 0 0 1-1v-2a5.006 5.006 0 0 0-5-5Z\"/>\r\n    </svg>\r\n  )},\r\n];\r\n\r\nexport default function ResponsiveSidebar() {\r\n  const pathname = usePathname();\r\n  const router = useRouter();\r\n  const [open, setOpen] = useState(false);\r\n  const [me, setMe] = useState<{ full_name?: string; email?: string; avatar?: string } | null>(null);\r\n\r\n  useEffect(() => {\r\n    setOpen(false);\r\n  }, [pathname]);\r\n\r\n  useEffect(() => {\r\n    (async () => {\r\n      try {\r\n        const token = typeof window !== 'undefined' ? (sessionStorage.getItem('token') || localStorage.getItem('token')) : null;\r\n        if (!token) return;\r\n        const res = await axiosInstance.get('/api/users/me');\r\n        setMe(res.data || null);\r\n      } catch {\r\n        // silently ignore\r\n      }\r\n    })();\r\n  }, []);\r\n\r\n  const onLogout = () => {\r\n    if (typeof window !== 'undefined') {\r\n      sessionStorage.removeItem('token');\r\n      localStorage.removeItem('token');\r\n    }\r\n    router.replace('/login');\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <button\r\n        type=\"button\"\r\n        aria-controls=\"default-sidebar\"\r\n        aria-expanded={open}\r\n        onClick={() => setOpen((v) => !v)}\r\n        className=\"inline-flex items-center p-2 mt-2 ms-3 text-sm text-gray-500 rounded-lg md:hidden hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200\"\r\n      >\r\n        <span className=\"sr-only\">Open sidebar</span>\r\n        <svg className=\"w-6 h-6\" aria-hidden=\"true\" fill=\"currentColor\" viewBox=\"0 0 20 20\" xmlns=\"http://www.w3.org/2000/svg\">\r\n          <path clipRule=\"evenodd\" fillRule=\"evenodd\" d=\"M2 4.75A.75.75 0 012.75 4h14.5a.75.75 0 010 1.5H2.75A.75.75 0 012 4.75zm0 10.5a.75.75 0 01.75-.75h7.5a.75.75 0 010 1.5h-7.5a.75.75 0 01-.75-.75zM2 10a.75.75 0 01.75-.75h14.5a.75.75 0 010 1.5H2.75A.75.75 0 012 10z\"></path>\r\n        </svg>\r\n      </button>\r\n\r\n      <aside\r\n        id=\"default-sidebar\"\r\n        className={`fixed top-0 left-0 z-40 w-64 h-screen transition-transform ${open ? 'translate-x-0' : '-translate-x-full'} md:translate-x-0`}\r\n        aria-label=\"Sidebar\"\r\n      >\r\n        <div className=\"h-full px-3 py-4 overflow-y-auto glass\">\r\n          {me ? (\r\n            <div className=\"mb-4 flex items-center gap-3 p-3 card\">\r\n              <div className=\"h-10 w-10 rounded-full flex items-center justify-center overflow-hidden bg-gray-100\">\r\n                {me.avatar ? (\r\n                  // eslint-disable-next-line @next/next/no-img-element\r\n                  <img src={me.avatar} alt=\"avatar\" className=\"h-full w-full object-cover\" />\r\n                ) : (\r\n                  <span className=\"text-sm font-semibold text-gray-600\">{(me.full_name?.[0] || me.email?.[0] || 'U').toUpperCase()}</span>\r\n                )}\r\n              </div>\r\n              <div className=\"truncate\">\r\n                <div className=\"text-sm font-medium truncate\">{me.full_name || 'User'}</div>\r\n                <div className=\"text-xs text-gray-500 truncate\">{me.email || ''}</div>\r\n              </div>\r\n            </div>\r\n          ) : null}\r\n\r\n          <ul className=\"space-y-2 font-medium\">\r\n            {navItems.map((item) => {\r\n              const active = pathname === item.href;\r\n              return (\r\n                <li key={`${item.href}-${item.label}`}>\r\n                  <Link\r\n                    href={item.href}\r\n                    className={`flex items-center p-2 rounded-lg group border transition-colors ${active ? 'bg-[var(--muted)] border-[var(--border)] text-gray-900' : 'hover:bg-[var(--muted)] border-transparent text-gray-900'}`}\r\n                  >\r\n                    <span className=\"text-gray-500 group-hover:text-gray-900\">{item.icon}</span>\r\n                    <span className=\"ms-3\">{item.label}</span>\r\n                  </Link>\r\n                </li>\r\n              );\r\n            })}\r\n            <li>\r\n              <button\r\n                onClick={onLogout}\r\n                className=\"w-full text-left flex items-center p-2 rounded-lg border hover:bg-[var(--muted)] text-gray-900 transition-colors\"\r\n                style={{borderColor: 'var(--border)'}}\r\n              >\r\n                <svg className=\"w-5 h-5 text-gray-500\" aria-hidden=\"true\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 18 16\">\r\n                  <path stroke=\"currentColor\" strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M1 8h11m0 0L8 4m4 4-4 4m4-11h3a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-3\"/>\r\n                </svg>\r\n                <span className=\"ms-3\">Đăng xuất</span>\r\n              </button>\r\n            </li>\r\n          </ul>\r\n        </div>\r\n      </aside>\r\n    </>\r\n  );\r\n}\r\n\r\n\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 527, "column": 0}, "map": {"version":3,"sources":["file:///D:/SEP490/SEP490_G94_FALL25_FrontEnd/src/lib/timeline.ts"],"sourcesContent":["export function getSpanDays(viewMode: 'Days'|'Weeks'|'Months'|'Quarters', start: Date): number {\r\n  switch (viewMode) {\r\n    case 'Days': return 7;\r\n    case 'Weeks': return 7;\r\n    case 'Months': return daysInMonthUTC(start);\r\n    case 'Quarters': return isLeapYearUTC(start.getUTCFullYear()) ? 366 : 365; // show whole year segmented by quarters\r\n    default: return 7;\r\n  }\r\n}\r\n\r\nexport function getPeriodStart(viewMode: 'Days'|'Weeks'|'Months'|'Quarters', date: Date): Date {\r\n  const d = new Date(date);\r\n  const strip = (x: Date) => { const t = new Date(x); t.setUTCHours(0,0,0,0); return t; };\r\n  switch (viewMode) {\r\n    case 'Days':\r\n    case 'Weeks': return getStartOfWeekUTC(strip(d));\r\n    case 'Months': return new Date(Date.UTC(d.getUTCFullYear(), d.getUTCMonth(), 1));\r\n    case 'Quarters': return new Date(Date.UTC(d.getUTCFullYear(), 0, 1));\r\n    default: return getStartOfWeekUTC(strip(d));\r\n  }\r\n}\r\n\r\nexport function getStartOfWeekUTC(date: Date): Date {\r\n  const d = new Date(date);\r\n  d.setUTCHours(0,0,0,0);\r\n  const day = d.getUTCDay();\r\n  const diff = (day + 6) % 7;\r\n  d.setUTCDate(d.getUTCDate() - diff);\r\n  return d;\r\n}\r\n\r\nexport function stripTimeUTC(date: Date) {\r\n  const d = new Date(date);\r\n  d.setUTCHours(0,0,0,0);\r\n  return d;\r\n}\r\n\r\nexport function addDays(date: Date, days: number) {\r\n  const d = new Date(date);\r\n  d.setUTCDate(d.getUTCDate() + days);\r\n  return d;\r\n}\r\n\r\nfunction daysInMonthUTC(date: Date): number {\r\n  const y = date.getUTCFullYear();\r\n  const m = date.getUTCMonth();\r\n  return new Date(Date.UTC(y, m + 1, 0)).getUTCDate();\r\n}\r\n\r\nfunction daysInQuarterUTC(date: Date): number { // kept for potential future use\r\n  const qStartMonth = Math.floor(date.getUTCMonth() / 3) * 3;\r\n  const start = new Date(Date.UTC(date.getUTCFullYear(), qStartMonth, 1));\r\n  const end = new Date(Date.UTC(date.getUTCFullYear(), qStartMonth + 3, 0));\r\n  return (stripTimeUTC(end).getTime() - stripTimeUTC(start).getTime()) / (24*60*60*1000) + 1;\r\n}\r\n\r\nfunction isLeapYearUTC(year: number): boolean {\r\n  return (year % 4 === 0 && year % 100 !== 0) || (year % 400 === 0);\r\n}\r\n\r\n\r\n"],"names":[],"mappings":";;;;;;;;;;;;AAAO,SAAS,YAAY,QAA4C,EAAE,KAAW;IACnF,OAAQ;QACN,KAAK;YAAQ,OAAO;QACpB,KAAK;YAAS,OAAO;QACrB,KAAK;YAAU,OAAO,eAAe;QACrC,KAAK;YAAY,OAAO,cAAc,MAAM,cAAc,MAAM,MAAM,KAAK,wCAAwC;QACnH;YAAS,OAAO;IAClB;AACF;AAEO,SAAS,eAAe,QAA4C,EAAE,IAAU;IACrF,MAAM,IAAI,IAAI,KAAK;IACnB,MAAM,QAAQ,CAAC;QAAc,MAAM,IAAI,IAAI,KAAK;QAAI,EAAE,WAAW,CAAC,GAAE,GAAE,GAAE;QAAI,OAAO;IAAG;IACtF,OAAQ;QACN,KAAK;QACL,KAAK;YAAS,OAAO,kBAAkB,MAAM;QAC7C,KAAK;YAAU,OAAO,IAAI,KAAK,KAAK,GAAG,CAAC,EAAE,cAAc,IAAI,EAAE,WAAW,IAAI;QAC7E,KAAK;YAAY,OAAO,IAAI,KAAK,KAAK,GAAG,CAAC,EAAE,cAAc,IAAI,GAAG;QACjE;YAAS,OAAO,kBAAkB,MAAM;IAC1C;AACF;AAEO,SAAS,kBAAkB,IAAU;IAC1C,MAAM,IAAI,IAAI,KAAK;IACnB,EAAE,WAAW,CAAC,GAAE,GAAE,GAAE;IACpB,MAAM,MAAM,EAAE,SAAS;IACvB,MAAM,OAAO,CAAC,MAAM,CAAC,IAAI;IACzB,EAAE,UAAU,CAAC,EAAE,UAAU,KAAK;IAC9B,OAAO;AACT;AAEO,SAAS,aAAa,IAAU;IACrC,MAAM,IAAI,IAAI,KAAK;IACnB,EAAE,WAAW,CAAC,GAAE,GAAE,GAAE;IACpB,OAAO;AACT;AAEO,SAAS,QAAQ,IAAU,EAAE,IAAY;IAC9C,MAAM,IAAI,IAAI,KAAK;IACnB,EAAE,UAAU,CAAC,EAAE,UAAU,KAAK;IAC9B,OAAO;AACT;AAEA,SAAS,eAAe,IAAU;IAChC,MAAM,IAAI,KAAK,cAAc;IAC7B,MAAM,IAAI,KAAK,WAAW;IAC1B,OAAO,IAAI,KAAK,KAAK,GAAG,CAAC,GAAG,IAAI,GAAG,IAAI,UAAU;AACnD;AAEA,SAAS,iBAAiB,IAAU;IAClC,MAAM,cAAc,KAAK,KAAK,CAAC,KAAK,WAAW,KAAK,KAAK;IACzD,MAAM,QAAQ,IAAI,KAAK,KAAK,GAAG,CAAC,KAAK,cAAc,IAAI,aAAa;IACpE,MAAM,MAAM,IAAI,KAAK,KAAK,GAAG,CAAC,KAAK,cAAc,IAAI,cAAc,GAAG;IACtE,OAAO,CAAC,aAAa,KAAK,OAAO,KAAK,aAAa,OAAO,OAAO,EAAE,IAAI,CAAC,KAAG,KAAG,KAAG,IAAI,IAAI;AAC3F;AAEA,SAAS,cAAc,IAAY;IACjC,OAAO,AAAC,OAAO,MAAM,KAAK,OAAO,QAAQ,KAAO,OAAO,QAAQ;AACjE","debugId":null}},
    {"offset": {"line": 611, "column": 0}, "map": {"version":3,"sources":["file:///D:/SEP490/SEP490_G94_FALL25_FrontEnd/src/components/GanttChart.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { useEffect, useMemo, useRef } from \"react\";\r\nimport { getPeriodStart } from \"@/lib/timeline\";\r\nimport type { CSSProperties } from \"react\";\r\n\r\n// dhtmlx-gantt is pure JS; import lazily inside effects to avoid SSR issues\r\n\r\nexport type GanttMilestone = {\r\n  _id: string;\r\n  title: string;\r\n  start_date?: string;\r\n  deadline?: string;\r\n  status?: string;\r\n  description?: string;\r\n  createdAt?: string;\r\n};\r\n\r\ntype ViewMode = \"Days\" | \"Weeks\" | \"Months\" | \"Quarters\";\r\n\r\nexport default function GanttChart({\r\n  milestones,\r\n  viewMode,\r\n  startDate,\r\n  autoFit,\r\n  pagingStepDays,\r\n  onRequestShift,\r\n  onMilestoneShift,\r\n  onMilestoneClick,\r\n}: {\r\n  milestones: GanttMilestone[];\r\n  viewMode: ViewMode;\r\n  startDate: Date;\r\n  autoFit?: boolean;\r\n  pagingStepDays?: number;\r\n  onRequestShift?: (days: number) => void;\r\n  onMilestoneShift?: (id: string, deltaDays: number) => void;\r\n  onMilestoneClick?: (id: string) => void;\r\n}) {\r\n  const ganttContainerRef = useRef<HTMLDivElement | null>(null);\r\n  const periodStart = useMemo(() => getPeriodStart(viewMode, startDate), [viewMode, startDate]);\r\n\r\n  useEffect(() => {\r\n    let isMounted = true;\r\n    const init = async () => {\r\n      const gantt = (await import(\"dhtmlx-gantt\")).gantt;\r\n\r\n      if (!isMounted || !ganttContainerRef.current) return;\r\n\r\n      gantt.clearAll();\r\n\r\n      // Configure scale per view mode\r\n      if (viewMode === \"Days\") {\r\n        gantt.config.scales = [\r\n          { unit: \"week\", step: 1, format: (date: Date) => formatWeekLabelRange(date) },\r\n          { unit: \"day\", step: 1, format: \"%D %d\" },\r\n        ];\r\n        gantt.config.scale_height = 50;\r\n      } else if (viewMode === \"Weeks\") {\r\n        gantt.config.scales = [\r\n          { unit: \"month\", step: 1, format: \"%M %Y\" },\r\n          { unit: \"week\", step: 1, format: (date: Date) => `W${getISOWeek(date)}` },\r\n        ];\r\n        gantt.config.scale_height = 50;\r\n      } else if (viewMode === \"Months\") {\r\n        gantt.config.scales = [\r\n          { unit: \"year\", step: 1, format: \"%Y\" },\r\n          { unit: \"month\", step: 1, format: \"%M\" },\r\n        ];\r\n        gantt.config.scale_height = 45;\r\n      } else {\r\n        // Quarters\r\n        gantt.config.scales = [\r\n          { unit: \"year\", step: 1, format: \"%Y\" },\r\n          { unit: \"quarter\", step: 1, format: (date: Date) => `Q${Math.floor(date.getUTCMonth() / 3) + 1}` },\r\n        ];\r\n        gantt.config.scale_height = 40;\r\n      }\r\n\r\n      gantt.config.readonly = false;\r\n      gantt.config.drag_move = true;\r\n      gantt.config.drag_resize = true;\r\n      gantt.config.drag_progress = false;\r\n      gantt.config.fit_tasks = !!autoFit;\r\n      gantt.config.row_height = 32;\r\n      gantt.config.bar_height = 20;\r\n      // Hide the grid (Title/Start/End columns)\r\n      gantt.config.columns = [];\r\n      gantt.config.grid_width = 0;\r\n\r\n      // Color by status via templates\r\n      gantt.templates.task_class = (start: Date, end: Date, task: any) => {\r\n        const status = task.status as string | undefined;\r\n        if (status === \"Planned\") return \"gantt-task-planned\";\r\n        if (status === \"In Progress\") return \"gantt-task-inprogress\";\r\n        if (status === \"Completed\") return \"gantt-task-completed\";\r\n        if (status === \"Overdue\") return \"gantt-task-overdue\";\r\n        return \"gantt-task-default\";\r\n      };\r\n\r\n      // Change listener to fire delta days\r\n      gantt.attachEvent(\"onAfterTaskDrag\", (id: string, mode: string, e: any) => {\r\n        if (mode !== \"move\") return true;\r\n        const task = gantt.getTask(id);\r\n        const original = task._original_start as Date | undefined;\r\n        if (!original || !task.start_date) return true;\r\n        const msPerDay = 24 * 60 * 60 * 1000;\r\n        const deltaDays = Math.round((stripUTC(asDate(task.start_date)).getTime() - stripUTC(original).getTime()) / msPerDay);\r\n        if (deltaDays !== 0) onMilestoneShift?.(id, deltaDays);\r\n        return true;\r\n      });\r\n\r\n      // Keep original start for delta calc\r\n      gantt.attachEvent(\"onBeforeTaskDrag\", (id: string, mode: string, e: any) => {\r\n        const task = gantt.getTask(id);\r\n        if (task.start_date) task._original_start = asDate(task.start_date);\r\n        return true;\r\n      });\r\n\r\n      // Click to open details\r\n      gantt.attachEvent(\"onTaskClick\", function(id: string){\r\n        onMilestoneClick?.(id as any);\r\n        return true;\r\n      });\r\n\r\n      // Init and set data\r\n      gantt.init(ganttContainerRef.current);\r\n      const data = mapMilestonesToGantt(milestones, periodStart);\r\n      gantt.parse({ data });\r\n\r\n      // Scroll to periodStart\r\n      gantt.showDate(periodStart);\r\n    };\r\n    init();\r\n    return () => {\r\n      isMounted = false;\r\n      // dhtmlx-gantt has no explicit destroy; clearing is enough on unmount\r\n      // container will be removed by React\r\n    };\r\n  }, [milestones, periodStart, viewMode, autoFit, onMilestoneShift]);\r\n\r\n  const containerStyle: CSSProperties = {\r\n    height: 380,\r\n    width: \"100%\",\r\n    border: \"1px solid var(--border)\",\r\n    background: \"color-mix(in oklab, var(--accent) 6%, var(--background))\",\r\n    borderRadius: 14,\r\n    boxShadow: \"var(--shadow-soft)\",\r\n  };\r\n\r\n  return (\r\n    <div className={`w-full ${viewMode === \"Days\" ? \"gantt-split-half\" : \"\"}`}>\r\n      <div ref={ganttContainerRef} style={containerStyle} />\r\n      <style>{`\r\n        /* Container */\r\n        .gantt_container { font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial; color: var(--foreground); }\r\n\r\n        /* Scales */\r\n        .gantt_scale_line { background: color-mix(in oklab, var(--accent) 18%, var(--background)); border-color: var(--border); }\r\n        .gantt_scale_cell { color: color-mix(in oklab, var(--foreground) 82%, transparent); font-weight: 600; letter-spacing: .2px; }\r\n        .gantt_task .gantt_task_scale { background: color-mix(in oklab, var(--accent) 18%, var(--background)); }\r\n\r\n        /* Rows */\r\n        .gantt_row, .gantt_task_row { background: var(--background); }\r\n        .gantt_row.odd, .gantt_task_row.odd { background: color-mix(in oklab, var(--accent) 10%, var(--background)); }\r\n        .gantt_row, .gantt_task_row { border-bottom: 1px solid var(--border); }\r\n\r\n        /* Half-day horizontal split for Days view */\r\n        .gantt-split-half .gantt_task_row, .gantt-split-half .gantt_row {\r\n          background-image: repeating-linear-gradient(\r\n            to bottom,\r\n            transparent 0 16px,\r\n            var(--border) 16px 17px,\r\n            transparent 17px 32px\r\n          );\r\n          background-blend-mode: normal;\r\n        }\r\n\r\n        /* Tasks */\r\n        .gantt_task_line { border-radius: 8px; border: 1px solid transparent; box-shadow: 0 2px 8px rgba(0,0,0,.06); background: color-mix(in oklab, var(--foreground) 24%, transparent); }\r\n        .gantt_task_content { padding: 2px 10px; font-weight: 600; text-shadow: none; }\r\n\r\n        /* Status colors */\r\n        .gantt-task-planned .gantt_task_content { background: #3b82f6 !important; color: #ffffff; } /* blue-500 */\r\n        .gantt-task-inprogress .gantt_task_content { background: var(--primary-600) !important; color: #ffffff; }\r\n        .gantt-task-completed .gantt_task_content { background: #22c55e !important; color: #ffffff; } /* green-500 */\r\n        .gantt-task-overdue .gantt_task_content { background: #ef4444 !important; color: #ffffff; } /* red-500 */\r\n        .gantt-task-default .gantt_task_content { background: #6b7280 !important; color: #ffffff; } /* slate-500 */\r\n\r\n        /* Selection/focus */\r\n        .gantt_selected .gantt_task_line { outline: 2px solid var(--ring); outline-offset: 0; box-shadow: none; }\r\n\r\n        /* Grid hidden state smoothing */\r\n        .gantt_layout_cell.gantt_grid { border-right: none; }\r\n\r\n        /* Today marker */\r\n        .today .gantt_marker { background: var(--primary-600); opacity: .9; width: 2px; }\r\n        .today .gantt_marker_content { background: var(--primary-600); color: #fff; border-radius: 8px; padding: 2px 8px; font-size: 12px; box-shadow: 0 4px 12px color-mix(in oklab, var(--primary) 40%, transparent); }\r\n\r\n        /* Links (if ever enabled) */\r\n        .gantt_link_line { stroke: color-mix(in oklab, var(--primary) 80%, #000 20%); }\r\n        .gantt_link_arrow { fill: color-mix(in oklab, var(--primary) 80%, #000 20%); }\r\n\r\n        /* Scrollbars */\r\n        .gantt_container ::-webkit-scrollbar { height: 8px; width: 8px; }\r\n        .gantt_container ::-webkit-scrollbar-thumb { background: color-mix(in oklab, var(--foreground) 30%, transparent); border-radius: 10px; }\r\n        .gantt_container ::-webkit-scrollbar-track { background: transparent; }\r\n      `}</style>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction mapMilestonesToGantt(items: GanttMilestone[], fallbackStart: Date) {\r\n  const msPerDay = 24 * 60 * 60 * 1000;\r\n  return items.map((m) => {\r\n    const startCandidate = m.start_date || m.createdAt || m.deadline;\r\n    const endCandidate = m.deadline || m.start_date || startCandidate;\r\n    const start = startCandidate ? new Date(startCandidate) : fallbackStart;\r\n    const end = endCandidate ? new Date(endCandidate) : new Date(start.getTime() + msPerDay);\r\n    const durationDays = Math.max(1, Math.ceil((stripUTC(end).getTime() - stripUTC(start).getTime()) / msPerDay));\r\n    return {\r\n      id: m._id,\r\n      text: m.title,\r\n      start_date: toGanttDate(start),\r\n      duration: durationDays,\r\n      status: m.status,\r\n    };\r\n  });\r\n}\r\n\r\nfunction toGanttDate(d: Date) {\r\n  // dhtmlx-gantt default format is \"%d-%m-%Y\" if not configured; use Date directly as it accepts Date objects too\r\n  return new Date(d);\r\n}\r\n\r\nfunction stripUTC(date: Date) {\r\n  const d = new Date(date);\r\n  d.setUTCHours(0, 0, 0, 0);\r\n  return d;\r\n}\r\n\r\nfunction asDate(value: string | number | Date): Date {\r\n  return value instanceof Date ? value : new Date(value);\r\n}\r\n\r\nfunction getISOWeek(d: Date) {\r\n  const date = new Date(Date.UTC(d.getUTCFullYear(), d.getUTCMonth(), d.getUTCDate()));\r\n  const dayNum = date.getUTCDay() || 7;\r\n  date.setUTCDate(date.getUTCDate() + 4 - dayNum);\r\n  const yearStart = new Date(Date.UTC(date.getUTCFullYear(), 0, 1));\r\n  const weekNo = Math.ceil(((date.getTime() - yearStart.getTime()) / 86400000 + 1) / 7);\r\n  return weekNo;\r\n}\r\n\r\nfunction startOfISOWeekUTC(d: Date) {\r\n  const date = new Date(Date.UTC(d.getUTCFullYear(), d.getUTCMonth(), d.getUTCDate()));\r\n  const day = date.getUTCDay() || 7; // 1..7 Mon..Sun\r\n  if (day !== 1) date.setUTCDate(date.getUTCDate() - (day - 1));\r\n  return date;\r\n}\r\n\r\nfunction addDaysUTC(d: Date, num: number) {\r\n  const nd = new Date(d);\r\n  nd.setUTCDate(nd.getUTCDate() + num);\r\n  return nd;\r\n}\r\n\r\nfunction formatShortMonthEn(d: Date) {\r\n  return d.toLocaleString(\"en-US\", { month: \"short\", timeZone: \"UTC\" });\r\n}\r\n\r\nfunction formatWeekLabelRange(date: Date) {\r\n  const week = getISOWeek(date);\r\n  const start = startOfISOWeekUTC(date);\r\n  const end = addDaysUTC(start, 6);\r\n  const s = `${formatShortMonthEn(start)} ${start.getUTCDate()}`;\r\n  const e = `${formatShortMonthEn(end)} ${end.getUTCDate()}`;\r\n  return `Week ${week} ${s} - ${e}`;\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 887, "column": 0}, "map": {"version":3,"sources":["file:///D:/SEP490/SEP490_G94_FALL25_FrontEnd/src/app/projects/%5Bid%5D/features/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useMemo, useState } from \"react\";\r\nimport { useParams, useRouter } from \"next/navigation\";\r\nimport axiosInstance from \"../../../../../ultis/axios\";\r\nimport ResponsiveSidebar from \"@/components/ResponsiveSidebar\";\r\nimport GanttChart from \"@/components/GanttChart\";\r\nimport { getStartOfWeekUTC, addDays } from \"@/lib/timeline\";\r\nimport ModalMilestone from \"@/components/ModalMilestone\";\r\nimport {\r\n  Box,\r\n  Button,\r\n  Chip,\r\n  CircularProgress,\r\n  Avatar,\r\n  AvatarGroup,\r\n  Dialog,\r\n  DialogActions,\r\n  DialogContent,\r\n  DialogTitle,\r\n  FormControl,\r\n  InputLabel,\r\n  MenuItem,\r\n  Select,\r\n  Stack,\r\n  LinearProgress,\r\n  Tooltip,\r\n  TextField,\r\n  Typography,\r\n  Paper,\r\n  Divider,\r\n  Checkbox,\r\n  IconButton,\r\n  Table,\r\n  TableBody,\r\n  TableCell,\r\n  TableHead,\r\n  TableRow,\r\n} from \"@mui/material\";\r\nimport AddIcon from \"@mui/icons-material/Add\";\r\nimport InsertDriveFileIcon from \"@mui/icons-material/InsertDriveFile\";\r\nimport ErrorOutlineIcon from \"@mui/icons-material/ErrorOutline\";\r\n\r\ntype Milestone = {\r\n  _id: string;\r\n  title: string;\r\n  start_date?: string;\r\n  deadline?: string;\r\n  status?: string;\r\n};\r\n\r\ntype Feature = {\r\n  _id?: string;\r\n  title: string;\r\n  code: string;\r\n  description?: string;\r\n  project_id: string;\r\n  milestone_id?: string | null;\r\n  creator_id: string;\r\n  assignee_id?: string | null;\r\n  function_ids?: string[];\r\n  status: 'planning' | 'in-progress' | 'testing' | 'completed' | 'cancelled';\r\n  priority: 'low' | 'medium' | 'high' | 'critical';\r\n  estimated_effort?: string;\r\n  start_date?: string;\r\n  end_date?: string;\r\n  createdAt?: string;\r\n  updatedAt?: string;\r\n  // UI-only convenience\r\n  milestone_ids?: string[];\r\n};\r\n\r\n// Mock data for display\r\nconst MOCK_MILESTONES: Milestone[] = [\r\n  { _id: \"ms-1\", title: \"Thiết kế kiến trúc\", start_date: new Date().toISOString(), deadline: new Date(Date.now() + 7*86400000).toISOString() },\r\n  { _id: \"ms-2\", title: \"Phát triển tính năng cốt lõi\", start_date: new Date().toISOString(), deadline: new Date(Date.now() + 14*86400000).toISOString() },\r\n];\r\n\r\nconst MOCK_FEATURES = (projectId: string): Feature[] => [\r\n  { _id: \"ft-1\", code: \"FT-1\", title: \"Đăng nhập OAuth\", description: \"Hỗ trợ Google SSO\", project_id: projectId, creator_id: \"u-1\", status: 'planning', priority: 'medium', estimated_effort: \"8\", milestone_ids: [\"ms-1\"] },\r\n  { _id: \"ft-2\", code: \"FT-2\", title: \"Bảng điều khiển\", description: \"Hiển thị KPI chính\", project_id: projectId, creator_id: \"u-1\", status: 'in-progress', priority: 'high', estimated_effort: \"13\", milestone_ids: [\"ms-1\",\"ms-2\"] },\r\n  { _id: \"ft-3\", code: \"FT-3\", title: \"Quản lý người dùng\", description: \"CRUD và phân quyền\", project_id: projectId, creator_id: \"u-1\", status: 'testing', priority: 'medium', estimated_effort: \"21\", milestone_ids: [\"ms-2\"] },\r\n];\r\n\r\nexport default function ProjectFeaturesPage() {\r\n  const router = useRouter();\r\n  const params = useParams();\r\n  const projectId = Array.isArray(params?.id) ? params?.id[0] : (params?.id as string);\r\n\r\n  const [milestones, setMilestones] = useState<Milestone[]>([]);\r\n  const [features, setFeatures] = useState<Feature[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  const [openForm, setOpenForm] = useState(false);\r\n  const [form, setForm] = useState<Feature>({ title: \"\", code: \"\", description: \"\", project_id: projectId, creator_id: \"\", status: 'planning', priority: 'medium', milestone_ids: [] });\r\n\r\n  // Chart controls\r\n  const [weekStart, setWeekStart] = useState<Date>(getStartOfWeekUTC(new Date()));\r\n  const [viewMode, setViewMode] = useState<'Days' | 'Weeks' | 'Months' | 'Quarters'>('Weeks');\r\n  const [autoFit, setAutoFit] = useState<boolean>(true);\r\n  const [detailMode, setDetailMode] = useState<boolean>(false);\r\n  const [milestoneModal, setMilestoneModal] = useState<{ open: boolean; milestoneId?: string }>({ open: false });\r\n  // Inline edit state\r\n  const [editingId, setEditingId] = useState<string | null>(null);\r\n  const [editingField, setEditingField] = useState<string | null>(null);\r\n  const [editDraft, setEditDraft] = useState<{\r\n    title: string;\r\n    code: string;\r\n    description?: string;\r\n    assignee_id?: string;\r\n    status?: Feature['status'];\r\n    priority?: Feature['priority'];\r\n    estimated_effort?: string;\r\n    start_date?: string;\r\n    end_date?: string;\r\n    milestone_id?: string;\r\n    function_ids_csv?: string; // CSV for inline editing\r\n  }>({ title: \"\", code: \"\", description: \"\", assignee_id: \"\", status: 'planning', priority: 'medium', estimated_effort: \"\", start_date: \"\", end_date: \"\", milestone_id: \"\", function_ids_csv: \"\" });\r\n\r\n  const formatRelative = (iso?: string) => {\r\n    if (!iso) return '';\r\n    const d = new Date(iso);\r\n    const ms = Date.now() - d.getTime();\r\n    const sec = Math.floor(ms / 1000);\r\n    const min = Math.floor(sec / 60);\r\n    const hr = Math.floor(min / 60);\r\n    const day = Math.floor(hr / 24);\r\n    if (day > 0) return `${day} day${day>1?'s':''} ago`;\r\n    if (hr > 0) return `${hr} hour${hr>1?'s':''} ago`;\r\n    if (min > 0) return `${min} minute${min>1?'s':''} ago`;\r\n    return `just now`;\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (!projectId) return;\r\n    (async () => {\r\n      try {\r\n        setLoading(true);\r\n        const [milestoneRes, featureRes] = await Promise.all([\r\n          axiosInstance.get(`/api/projects/${projectId}/milestones`).catch(() => ({ data: null })),\r\n          axiosInstance.get(`/api/projects/${projectId}/features`).catch(() => ({ data: null })),\r\n        ]);\r\n        const milestonesList = Array.isArray(milestoneRes.data) && milestoneRes.data.length > 0 ? milestoneRes.data : MOCK_MILESTONES;\r\n        setMilestones(milestonesList);\r\n\r\n        if (Array.isArray(featureRes.data)) {\r\n          // Enrich features with linked milestone ids\r\n          const enriched: Feature[] = await Promise.all(\r\n            featureRes.data.map(async (f: any) => {\r\n              try {\r\n                const linkRes = await axiosInstance.get(`/api/features/${f._id}/milestones`);\r\n                return { ...f, milestone_ids: Array.isArray(linkRes.data) ? linkRes.data : [] } as Feature;\r\n              } catch {\r\n                return { ...f, milestone_ids: [] } as Feature;\r\n              }\r\n            })\r\n          );\r\n          setFeatures(enriched);\r\n        } else {\r\n          // Fallback: localStorage or mock\r\n          const key = `features:${projectId}`;\r\n          const raw = typeof window !== 'undefined' ? window.localStorage.getItem(key) : null;\r\n          if (raw) {\r\n            setFeatures(JSON.parse(raw) as Feature[]);\r\n          } else {\r\n            setFeatures(MOCK_FEATURES(projectId));\r\n          }\r\n        }\r\n      } catch (e: any) {\r\n        // Fallback to mock data\r\n        setMilestones(MOCK_MILESTONES);\r\n        setFeatures(MOCK_FEATURES(projectId));\r\n        setError(null);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    })();\r\n  }, [projectId]);\r\n\r\n  // Persist features to localStorage whenever they change\r\n  useEffect(() => {\r\n    if (!projectId) return;\r\n    const key = `features:${projectId}`;\r\n    if (features && features.length > 0) {\r\n      if (typeof window !== 'undefined') {\r\n        window.localStorage.setItem(key, JSON.stringify(features));\r\n      }\r\n    }\r\n  }, [projectId, features]);\r\n\r\n  const milestoneOptions = useMemo(() => milestones.map(m => ({ id: m._id, label: m.title })), [milestones]);\r\n\r\n  // Compute progress per feature: % milestones completed\r\n  const featureProgress = useMemo(() => {\r\n    const statusById = new Map(milestones.map(m => [m._id, m.status] as const));\r\n    const map = new Map<string, number>();\r\n    features.forEach(f => {\r\n      const ids = f.milestone_ids || [];\r\n      if (!ids.length) { map.set(f._id as string, 0); return; }\r\n      const total = ids.length;\r\n      const completed = ids.reduce((acc, id) => acc + (statusById.get(id) === 'Completed' ? 1 : 0), 0);\r\n      map.set(f._id as string, Math.round((completed / total) * 100));\r\n    });\r\n    return map;\r\n  }, [features, milestones]);\r\n\r\n  // Derive feature bars from linked milestones (min start -> max deadline)\r\n  const featureBars = useMemo(() => {\r\n    const byId = new Map(milestones.map(m => [m._id, m] as const));\r\n    return features.map((f) => {\r\n      const linked = (f.milestone_ids || []).map(id => byId.get(id)).filter(Boolean) as Milestone[];\r\n      const start = linked.reduce<string | undefined>((acc, m) => {\r\n        if (!m.start_date) return acc;\r\n        return !acc || new Date(m.start_date) < new Date(acc) ? m.start_date : acc;\r\n      }, undefined);\r\n      const end = linked.reduce<string | undefined>((acc, m) => {\r\n        if (!m.deadline) return acc;\r\n        return !acc || new Date(m.deadline) > new Date(acc) ? m.deadline : acc;\r\n      }, undefined);\r\n      const pct = featureProgress.get(f._id as string) ?? 0;\r\n      return {\r\n        _id: f._id as string,\r\n        title: `${f.title}${linked.length ? ` (${linked.length})` : ''} • ${pct}%`,\r\n        start_date: start,\r\n        deadline: end,\r\n      };\r\n    });\r\n  }, [features, milestones, featureProgress]);\r\n\r\n  // Expand to detailed chart rows per milestone when detailMode is on\r\n  const chartRows = useMemo(() => {\r\n    if (!detailMode) return featureBars;\r\n    const byId = new Map(milestones.map(m => [m._id, m] as const));\r\n    const rows: { _id: string; title: string; start_date?: string; deadline?: string }[] = [];\r\n    features.forEach((f) => {\r\n      const ids = f.milestone_ids || [];\r\n      ids.forEach((mid) => {\r\n        const m = byId.get(mid);\r\n        if (m) {\r\n          rows.push({\r\n            _id: m._id,\r\n            title: `${f.title} • ${m.title}`,\r\n            start_date: m.start_date,\r\n            deadline: m.deadline,\r\n          });\r\n        }\r\n      });\r\n    });\r\n    return rows.length ? rows : featureBars;\r\n  }, [detailMode, featureBars, features, milestones]);\r\n\r\n  const handleOpenForm = () => {\r\n    setForm({ title: \"\", code: \"\", description: \"\", project_id: projectId, creator_id: \"\", status: 'planning', priority: 'medium', milestone_ids: [] });\r\n    setOpenForm(true);\r\n  };\r\n\r\n  const handleCreateFeature = async () => {\r\n    try {\r\n      // Gọi backend tạo feature và liên kết milestones\r\n      const res = await axiosInstance.post(`/api/projects/${projectId}/features`, {\r\n        title: form.title,\r\n        code: form.code,\r\n        description: form.description,\r\n        creator_id: form.creator_id,\r\n        status: form.status,\r\n        priority: form.priority,\r\n        estimated_effort: form.estimated_effort,\r\n        milestone_id: form.milestone_id,\r\n      });\r\n      const created = res.data;\r\n      let milestone_ids: string[] = [];\r\n      try {\r\n        const linkRes = await axiosInstance.get(`/api/features/${created._id}/milestones`);\r\n        milestone_ids = Array.isArray(linkRes.data) ? linkRes.data : [];\r\n      } catch {}\r\n      setFeatures(prev => [{ ...created, milestone_ids }, ...prev]);\r\n      setOpenForm(false);\r\n    } catch (e: any) {\r\n      setError(e?.response?.data?.message || \"Không thể tạo feature\");\r\n    }\r\n  };\r\n\r\n  const startEditCell = (f: Feature, field: string) => {\r\n    setEditingId(f._id as string);\r\n    setEditingField(field);\r\n    setEditDraft({\r\n      title: f.title,\r\n      code: f.code,\r\n      description: f.description,\r\n      assignee_id: f.assignee_id || \"\",\r\n      status: f.status,\r\n      priority: f.priority,\r\n      estimated_effort: f.estimated_effort || \"\",\r\n      start_date: f.start_date,\r\n      end_date: f.end_date,\r\n      milestone_id: f.milestone_id || \"\",\r\n      function_ids_csv: (f.function_ids || []).join(',')\r\n    });\r\n  };\r\n  const cancelEditRow = () => {\r\n    setEditingId(null);\r\n    setEditingField(null);\r\n    setEditDraft({ title: \"\", code: \"\", description: \"\", assignee_id: \"\", status: 'planning', priority: 'medium', estimated_effort: \"\", start_date: \"\", end_date: \"\", milestone_id: \"\", function_ids_csv: \"\" });\r\n  };\r\n  const saveEditRow = async (id: string) => {\r\n    try {\r\n      const all: any = {\r\n        title: editDraft.title,\r\n        code: editDraft.code,\r\n        description: editDraft.description,\r\n        assignee_id: editDraft.assignee_id || null,\r\n        status: editDraft.status,\r\n        priority: editDraft.priority,\r\n        estimated_effort: editDraft.estimated_effort,\r\n        start_date: editDraft.start_date,\r\n        end_date: editDraft.end_date,\r\n        milestone_id: editDraft.milestone_id || null,\r\n        function_ids: (editDraft.function_ids_csv || '').split(',').map(s => s.trim()).filter(Boolean),\r\n      };\r\n      const payload: any = editingField ? { [editingField === 'function_ids_csv' ? 'function_ids' : editingField]:\r\n        editingField === 'function_ids_csv' ? all.function_ids : all[editingField] } : all;\r\n      await axiosInstance.patch(`/api/features/${id}`, payload).catch(() => null);\r\n      setFeatures(prev => prev.map(x => {\r\n        if (x._id !== id) return x as Feature;\r\n        const updated: any = { ...x, updatedAt: new Date().toISOString() };\r\n        if (editingField) {\r\n          if (editingField === 'function_ids_csv') updated.function_ids = all.function_ids;\r\n          else (updated as any)[editingField] = (all as any)[editingField];\r\n        } else Object.assign(updated, all);\r\n        return updated;\r\n      }));\r\n      cancelEditRow();\r\n    } catch {}\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-[var(--background)]\">\r\n      <ResponsiveSidebar />\r\n      <main className=\"p-4 md:p-6 md:ml-64\">\r\n        <div className=\"mx-auto w-full max-w-7xl\">\r\n          <div className=\"mb-6 md:mb-8 flex items-center justify-between\">\r\n            <div className=\"space-y-1\">\r\n              <div className=\"text-[10px] md:text-xs uppercase tracking-wider text-foreground/60\">Dự án</div>\r\n              <h1 className=\"text-2xl md:text-3xl font-semibold tracking-tight text-foreground\">Features</h1>\r\n            </div>\r\n            <div className=\"flex items-center gap-2\">\r\n              <Button variant=\"contained\" onClick={handleOpenForm}>Tạo Feature</Button>\r\n              <Button variant=\"outlined\" onClick={() => router.push(`/projects/${projectId}`)}>Milestones</Button>\r\n              <Button variant=\"outlined\" onClick={() => router.back()}>Quay lại</Button>\r\n            </div>\r\n          </div>\r\n\r\n          {loading ? (\r\n            <Box sx={{ display: \"flex\", justifyContent: \"center\", py: 6 }}>\r\n              <CircularProgress size={28} />\r\n            </Box>\r\n          ) : error ? (\r\n            <Box className=\"rounded-xl border border-red-500/40 bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-200 p-4\">\r\n              {error}\r\n            </Box>\r\n          ) : (\r\n            <Stack spacing={3}>\r\n              <Paper variant=\"outlined\" sx={{ p: 2 }}>\r\n                <Stack direction=\"row\" alignItems=\"center\" spacing={2} sx={{ mb: 2 }}>\r\n                  <FormControl size=\"small\" sx={{ minWidth: 140 }}>\r\n                    <InputLabel id=\"view-mode-label\">View</InputLabel>\r\n                    <Select labelId=\"view-mode-label\" label=\"View\" value={viewMode} onChange={(e) => setViewMode(e.target.value as any)}>\r\n                      <MenuItem value=\"Days\">Days</MenuItem>\r\n                      <MenuItem value=\"Weeks\">Weeks</MenuItem>\r\n                      <MenuItem value=\"Months\">Months</MenuItem>\r\n                      <MenuItem value=\"Quarters\">Quarters</MenuItem>\r\n                    </Select>\r\n                  </FormControl>\r\n                  <Button size=\"small\" variant=\"outlined\" onClick={() => setAutoFit(a => !a)}>\r\n                    {autoFit ? 'Auto Fit: On' : 'Auto Fit: Off'}\r\n                  </Button>\r\n                  <Button size=\"small\" variant=\"outlined\" onClick={() => setDetailMode(d => !d)}>\r\n                    {detailMode ? 'Chi tiết milestone: Bật' : 'Chi tiết milestone: Tắt'}\r\n                  </Button>\r\n                </Stack>\r\n                <GanttChart\r\n                  milestones={chartRows}\r\n                  viewMode={viewMode as any}\r\n                  startDate={weekStart}\r\n                  autoFit={autoFit}\r\n                  pagingStepDays={viewMode === 'Quarters' ? 90 : viewMode === 'Months' ? 30 : viewMode === 'Weeks' ? 7 : 7}\r\n                  onRequestShift={(days) => setWeekStart(prev => addDays(prev, days))}\r\n                  onMilestoneShift={async (rowId, deltaDays) => {\r\n                    if (detailMode) {\r\n                      // Shift a single milestone row directly\r\n                      const m = milestones.find(x => x._id === rowId);\r\n                      if (!m) return;\r\n                      const toIso = (iso?: string) => {\r\n                        if (!iso) return undefined;\r\n                        const d = new Date(iso);\r\n                        d.setUTCDate(d.getUTCDate() + deltaDays);\r\n                        return d.toISOString();\r\n                      };\r\n                      setMilestones(prev => (prev || []).map(x => x._id === rowId ? ({ ...x, start_date: toIso(x.start_date), deadline: toIso(x.deadline) }) : x));\r\n                      await axiosInstance.patch(`/api/projects/${projectId}/milestones/${rowId}`, {\r\n                        start_date: toIso(m.start_date),\r\n                        deadline: toIso(m.deadline),\r\n                      }).catch(() => null);\r\n                    } else {\r\n                      // Shift all milestones linked to a feature bar\r\n                      const f = features.find(x => x._id === rowId);\r\n                      if (!f || !f.milestone_ids || f.milestone_ids.length === 0) return;\r\n                      setMilestones(prev => (prev || []).map(m => {\r\n                        if (!f.milestone_ids?.includes(m._id)) return m;\r\n                        const shiftDate = (iso?: string) => {\r\n                          if (!iso) return iso;\r\n                          const d = new Date(iso);\r\n                          d.setUTCDate(d.getUTCDate() + deltaDays);\r\n                          return d.toISOString();\r\n                        };\r\n                        return { ...m, start_date: shiftDate(m.start_date), deadline: shiftDate(m.deadline) };\r\n                      }));\r\n                      const updates = (f.milestone_ids || []).map(async (mid) => {\r\n                        const m = milestones.find(x => x._id === mid);\r\n                        if (!m) return;\r\n                        const toIso = (iso?: string) => {\r\n                          if (!iso) return undefined;\r\n                          const d = new Date(iso);\r\n                          d.setUTCDate(d.getUTCDate() + deltaDays);\r\n                          return d.toISOString();\r\n                        };\r\n                        await axiosInstance.patch(`/api/projects/${projectId}/milestones/${mid}`, {\r\n                          start_date: toIso(m.start_date),\r\n                          deadline: toIso(m.deadline),\r\n                        }).catch(() => null);\r\n                      });\r\n                      await Promise.all(updates);\r\n                    }\r\n                  }}\r\n                  onMilestoneClick={(rowId) => {\r\n                    if (detailMode) {\r\n                      setMilestoneModal({ open: true, milestoneId: rowId });\r\n                    }\r\n                  }}\r\n                />\r\n              </Paper>\r\n              {/* Expanded inline editor for full model fields */}\r\n              {/* Removed expanded editor panel; inline editing only */}\r\n              {/* Feature Table Section - inline editors only */}\r\n              <Paper variant=\"outlined\" sx={{ p: 0 }}>\r\n                <Box sx={{ overflowX: 'auto', width: '100%', '&::-webkit-scrollbar': { height: 8 }, '&::-webkit-scrollbar-thumb': { background: 'rgba(0,0,0,0.3)', borderRadius: 8 } }}>\r\n                <Table size=\"small\" sx={{ minWidth: 1400, '& td, & th': { borderColor: 'var(--border)' } }}>\r\n                  <TableHead>\r\n                    <TableRow>\r\n                      <TableCell sx={{ width: 44 }}></TableCell>\r\n                      <TableCell>Code</TableCell>\r\n                      <TableCell>Title</TableCell>\r\n                      <TableCell>Status</TableCell>\r\n                      <TableCell>Start date</TableCell>\r\n                      <TableCell>End date</TableCell>\r\n                      <TableCell>Priority</TableCell>\r\n                      <TableCell>Estimated effort</TableCell>\r\n                      <TableCell>Description</TableCell>\r\n                      <TableCell>Last updated</TableCell>\r\n                    </TableRow>\r\n                  </TableHead>\r\n                  <TableBody>\r\n                    {(features || []).map((f, idx) => {\r\n                      const pct = featureProgress.get(f._id as string) ?? 0;\r\n                      const owners = [\r\n                        { id: '1', name: 'A' },\r\n                        { id: '2', name: 'B' },\r\n                      ];\r\n                      const due = (() => {\r\n                        const ids = f.milestone_ids || [];\r\n                        if (!ids.length) return undefined;\r\n                        const ms = milestones.filter(m => ids.includes(m._id));\r\n                        const latest = ms.reduce<string | undefined>((acc, m) => {\r\n                          if (!m.deadline) return acc;\r\n                          return !acc || new Date(m.deadline) > new Date(acc) ? m.deadline : acc;\r\n                        }, undefined);\r\n                        return latest;\r\n                      })();\r\n                      const dueDateText = due ? new Date(due).toLocaleString('en-US', { month: 'short', day: 'numeric' }) : '-';\r\n                      const statusChip = (\r\n                        <Chip\r\n                          size=\"small\"\r\n                          label={f.status}\r\n                          sx={{\r\n                            color: '#fff',\r\n                            bgcolor: f.status === 'completed' ? '#22c55e' : f.status === 'in-progress' ? '#f59e0b' : '#3b82f6',\r\n                            fontWeight: 600,\r\n                          }}\r\n                        />\r\n                      );\r\n                      return (\r\n                        <TableRow key={f._id || idx} hover>\r\n                          <TableCell><Checkbox size=\"small\" /></TableCell>\r\n                          <TableCell sx={{ fontWeight: 600 }} onDoubleClick={() => startEditCell(f, 'code')}>\r\n                            {editingId === f._id && editingField === 'code' ? (\r\n                              <TextField size=\"small\" value={editDraft.code} onChange={(e) => setEditDraft(s => ({ ...s, code: e.target.value }))} fullWidth onBlur={() => saveEditRow(f._id as string)} />\r\n                            ) : (\r\n                              (f.code || '-')\r\n                            )}\r\n                          </TableCell>\r\n                          <TableCell sx={{ fontWeight: 600 }} onDoubleClick={() => startEditCell(f, 'title')}>\r\n                            {editingId === f._id && editingField === 'title' ? (\r\n                              <TextField\r\n                                size=\"small\"\r\n                                value={editDraft.title}\r\n                                onChange={(e) => setEditDraft(s => ({ ...s, title: e.target.value }))}\r\n                                fullWidth\r\n                                onBlur={() => saveEditRow(f._id as string)}\r\n                              />\r\n                            ) : (\r\n                              f.title\r\n                            )}\r\n                          </TableCell>\r\n                          \r\n                          <TableCell onDoubleClick={() => startEditCell(f, 'status')}>\r\n                            {editingId === f._id && editingField === 'status' ? (\r\n                              <Select size=\"small\" value={editDraft.status || 'planning'} onChange={(e) => setEditDraft(s => ({ ...s, status: e.target.value as any }))} fullWidth onClose={() => saveEditRow(f._id as string)}>\r\n                                <MenuItem value=\"planning\">planning</MenuItem>\r\n                                <MenuItem value=\"in-progress\">in-progress</MenuItem>\r\n                                <MenuItem value=\"testing\">testing</MenuItem>\r\n                                <MenuItem value=\"completed\">completed</MenuItem>\r\n                                <MenuItem value=\"cancelled\">cancelled</MenuItem>\r\n                              </Select>\r\n                            ) : (\r\n                              statusChip\r\n                            )}\r\n                          </TableCell>\r\n                          <TableCell onDoubleClick={() => startEditCell(f, 'start_date')}>\r\n                            {editingId === f._id && editingField === 'start_date' ? (\r\n                              <TextField size=\"small\" type=\"date\" value={editDraft.start_date?.slice(0,10) || ''} onChange={(e) => setEditDraft(s => ({ ...s, start_date: e.target.value }))} fullWidth onBlur={() => saveEditRow(f._id as string)} />\r\n                            ) : (\r\n                              <Typography variant=\"body2\">{f.start_date ? new Date(f.start_date).toLocaleDateString() : '—'}</Typography>\r\n                            )}\r\n                          </TableCell>\r\n                          <TableCell onDoubleClick={() => startEditCell(f, 'end_date')}>\r\n                            {editingId === f._id && editingField === 'end_date' ? (\r\n                              <TextField size=\"small\" type=\"date\" value={editDraft.end_date?.slice(0,10) || ''} onChange={(e) => setEditDraft(s => ({ ...s, end_date: e.target.value }))} fullWidth onBlur={() => saveEditRow(f._id as string)} />\r\n                            ) : (\r\n                              <Typography variant=\"body2\">{f.end_date ? new Date(f.end_date).toLocaleDateString() : '—'}</Typography>\r\n                            )}\r\n                          </TableCell>\r\n                          \r\n                          <TableCell onDoubleClick={() => startEditCell(f, 'priority')}>\r\n                            {editingId === f._id && editingField === 'priority' ? (\r\n                              <Select size=\"small\" value={editDraft.priority || 'medium'} onChange={(e) => setEditDraft(s => ({ ...s, priority: e.target.value as any }))} fullWidth onClose={() => saveEditRow(f._id as string)}>\r\n                                <MenuItem value=\"low\">low</MenuItem>\r\n                                <MenuItem value=\"medium\">medium</MenuItem>\r\n                                <MenuItem value=\"high\">high</MenuItem>\r\n                                <MenuItem value=\"critical\">critical</MenuItem>\r\n                              </Select>\r\n                            ) : (\r\n                              <Typography variant=\"body2\">{f.priority}</Typography>\r\n                            )}\r\n                          </TableCell>\r\n                          <TableCell onDoubleClick={() => startEditCell(f, 'estimated_effort')}>\r\n                            {editingId === f._id && editingField === 'estimated_effort' ? (\r\n                              <TextField size=\"small\" value={editDraft.estimated_effort || ''} onChange={(e) => setEditDraft(s => ({ ...s, estimated_effort: e.target.value }))} fullWidth onBlur={() => saveEditRow(f._id as string)} />\r\n                            ) : (\r\n                              <Typography variant=\"body2\">{f.estimated_effort || '-'}</Typography>\r\n                            )}\r\n                          </TableCell>\r\n                          <TableCell onDoubleClick={() => startEditCell(f, 'description')}>\r\n                            {editingId === f._id && editingField === 'description' ? (\r\n                              <TextField\r\n                                size=\"small\"\r\n                                value={editDraft.description || ''}\r\n                                onChange={(e) => setEditDraft(s => ({ ...s, description: e.target.value }))}\r\n                                fullWidth onBlur={() => saveEditRow(f._id as string)}\r\n                              />\r\n                            ) : (\r\n                              <Typography variant=\"body2\" sx={{ opacity: .9 }}>\r\n                                {f.description || '—'}\r\n                              </Typography>\r\n                            )}\r\n                          </TableCell>\r\n                          <TableCell>\r\n                            <Stack direction=\"row\" spacing={1} alignItems=\"center\">\r\n                              <Avatar sx={{ width: 26, height: 26 }}>A</Avatar>\r\n                              <Typography variant=\"body2\" sx={{ color: 'text.secondary' }}>{formatRelative((f as any).updatedAt)}</Typography>\r\n                            </Stack>\r\n                          </TableCell>\r\n                        </TableRow>\r\n                      );\r\n                    })}\r\n                  </TableBody>\r\n                </Table>\r\n                </Box>\r\n              </Paper>\r\n              {features.length === 0 && (\r\n                <Paper variant=\"outlined\" sx={{ p: 2 }}>\r\n                  <Typography variant=\"body2\" sx={{ opacity: 0.7 }}>\r\n                    Chưa có feature nào. Bấm \"Tạo Feature\" để thêm.\r\n                  </Typography>\r\n                </Paper>\r\n              )}\r\n            </Stack>\r\n          )}\r\n\r\n          <Dialog open={openForm} onClose={() => setOpenForm(false)} fullWidth maxWidth=\"sm\">\r\n            <DialogTitle>Tạo Feature</DialogTitle>\r\n            <DialogContent>\r\n              <Stack spacing={2} sx={{ mt: 1 }}>\r\n                <TextField\r\n                  label=\"Tiêu đề\"\r\n                  value={form.title}\r\n                  onChange={(e) => setForm(prev => ({ ...prev, title: e.target.value }))}\r\n                  fullWidth\r\n                />\r\n                <TextField\r\n                  label=\"Mô tả\"\r\n                  value={form.description}\r\n                  onChange={(e) => setForm(prev => ({ ...prev, description: e.target.value }))}\r\n                  fullWidth\r\n                  multiline\r\n                  minRows={3}\r\n                />\r\n                <TextField\r\n                  label=\"Mã (code)\"\r\n                  value={form.code}\r\n                  onChange={(e) => setForm(prev => ({ ...prev, code: e.target.value }))}\r\n                  fullWidth\r\n                />\r\n                <Divider />\r\n                <FormControl fullWidth>\r\n                  <InputLabel id=\"milestone-select-label\">Milestones</InputLabel>\r\n                  <Select\r\n                    labelId=\"milestone-select-label\"\r\n                    label=\"Milestones\"\r\n                    multiple\r\n                    value={form.milestone_ids || []}\r\n                    onChange={(e) => setForm(prev => ({ ...prev, milestone_ids: e.target.value as string[] }))}\r\n                    renderValue={(selected) => (\r\n                      <Stack direction=\"row\" spacing={1} flexWrap=\"wrap\">\r\n                        {(selected as string[]).map((id) => {\r\n                          const m = milestoneOptions.find(o => o.id === id);\r\n                          return <Chip key={id} label={m?.label || id} size=\"small\" />;\r\n                        })}\r\n                      </Stack>\r\n                    )}\r\n                  >\r\n                    {milestoneOptions.map((m) => (\r\n                      <MenuItem key={m.id} value={m.id}>{m.label}</MenuItem>\r\n                    ))}\r\n                  </Select>\r\n                </FormControl>\r\n              </Stack>\r\n            </DialogContent>\r\n            <DialogActions>\r\n              <Button onClick={() => setOpenForm(false)}>Hủy</Button>\r\n              <Button variant=\"contained\" onClick={handleCreateFeature}>Tạo</Button>\r\n            </DialogActions>\r\n          </Dialog>\r\n        </div>\r\n      </main>\r\n    </div>\r\n  );\r\n}\r\n\r\n\r\n\r\n"],"names":[],"mappings":"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","debugId":null}}]
}