{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///G:/SEP/frontend/softcapstone/ultis/axios.js"],"sourcesContent":["// lib/axios.js\r\nimport axios from 'axios';\r\nimport { useState } from 'react';\r\n\r\n// Debug log để kiểm tra env\r\n\r\n\r\nconst axiosInstance = axios.create({\r\n  baseURL: process.env.NEXT_PUBLIC_API_URL,\r\n  timeout: 30000,\r\n  headers: {\r\n    'Content-Type': 'application/json',\r\n    'Accept': 'application/json'\r\n  },\r\n});\r\n\r\n// Request interceptor\r\naxiosInstance.interceptors.request.use(\r\n  (config) => {\r\n    const token = typeof window !== 'undefined' ? sessionStorage.getItem('token') : null;\r\n    if (token) {\r\n      config.headers.Authorization = `Bearer ${token}`;\r\n    }\r\n    \r\n    // Don't set Content-Type for FormData, let axios handle it automatically\r\n    if (config.data instanceof FormData) {\r\n      delete config.headers['Content-Type'];\r\n    }\r\n    \r\n    if (process.env.NODE_ENV === 'development') {\r\n    \r\n    }\r\n    \r\n    return config;\r\n  },\r\n  (error) => {\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\n// Response interceptor\r\naxiosInstance.interceptors.response.use(\r\n  (response) => {\r\n    if (process.env.NODE_ENV === 'development') {\r\n      \r\n    }\r\n    return response;\r\n  },\r\n  (error) => {\r\n    if (process.env.NODE_ENV === 'development') {\r\n    }\r\n    \r\n    // Xử lý lỗi chung\r\n    if (error.response?.status === 401) {\r\n      if (typeof window !== 'undefined') {\r\n        localStorage.removeItem('token');\r\n        window.location.href = '/login';\r\n      }\r\n    }\r\n    if (error.response?.status === 403) {\r\n      if (typeof window !== 'undefined') {\r\n        window.location.href = '/not-found';\r\n      }\r\n    }\r\n    \r\n    if (error.response?.status === 500) {\r\n      console.error('Server Error:', error.response.data);\r\n    }\r\n    \r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\nexport default axiosInstance;\r\n\r\n// Export các method thường dùng\r\nexport const api = {\r\n  get: (url, config) => axiosInstance.get(url, config),\r\n  post: (url, data, config) => axiosInstance.post(url, data, config),\r\n  put: (url, data, config) => axiosInstance.put(url, data, config),\r\n  patch: (url, data, config) => axiosInstance.patch(url, data, config),\r\n  delete: (url, config) => axiosInstance.delete(url, config),\r\n  \r\n  // Review API methods\r\n  reviews: {\r\n    // Create a new review\r\n    create: (reviewData) => axiosInstance.post('/reviews', reviewData),\r\n    \r\n    // Get all reviews\r\n    getAll: () => axiosInstance.get('/reviews'),\r\n    \r\n    // Get reviews for a specific product\r\n    getByProduct: (productId) => axiosInstance.get(`/reviews/product/${productId}`),\r\n    \r\n    // Get unreviewed products for a user\r\n    getUnreviewed: (productId) => axiosInstance.get(`/reviews/unreviewed/${productId}`),\r\n    \r\n    // Update a review\r\n    update: (reviewId, reviewData) => axiosInstance.put(`/reviews/${reviewId}`, reviewData),\r\n    \r\n    // Delete a review\r\n    delete: (reviewId) => axiosInstance.delete(`/reviews/${reviewId}`),\r\n  },\r\n};\r\n\r\n// Utility functions cho các trường hợp đặc biệt\r\nexport const apiUtils = {\r\n  // Upload file\r\n  uploadFile: (url, file, onUploadProgress) => {\r\n    const formData = new FormData();\r\n    formData.append('file', file);\r\n    \r\n    return axiosInstance.post(url, formData, {\r\n      headers: {\r\n        'Content-Type': 'multipart/form-data',\r\n      },\r\n      onUploadProgress,\r\n    });\r\n  },\r\n  \r\n  // Download file\r\n  downloadFile: async (url, filename) => {\r\n    try {\r\n      const response = await axiosInstance.get(url, {\r\n        responseType: 'blob',\r\n      });\r\n      \r\n      const blob = new Blob([response.data]);\r\n      const downloadUrl = window.URL.createObjectURL(blob);\r\n      const link = document.createElement('a');\r\n      link.href = downloadUrl;\r\n      link.download = filename;\r\n      link.click();\r\n      window.URL.revokeObjectURL(downloadUrl);\r\n    } catch (error) {\r\n      console.error('Download failed:', error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  // Create review\r\n  createReview: async (reviewData) => {\r\n    try {\r\n      const response = await axiosInstance.post('/reviews', reviewData);\r\n      return response.data;\r\n    } catch (error) {\r\n      console.error('Create review failed:', error);\r\n      throw error;\r\n    }\r\n  },\r\n};\r\n\r\n// Custom hooks cho React components\r\nexport const useApi = () => {\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n  \r\n  const request = async (apiCall) => {\r\n    try {\r\n      setLoading(true);\r\n      setError(null);\r\n      const response = await apiCall();\r\n      return response.data;\r\n    } catch (err) {\r\n      setError(err);\r\n      throw err;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n  \r\n  return { request, loading, error };\r\n};"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 166, "column": 0}, "map": {"version":3,"sources":["file:///G:/SEP/frontend/softcapstone/src/app/myprofile/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useState } from \"react\";\r\nimport axiosInstance from \"../../../ultis/axios\";\r\nimport Image from \"next/image\";\r\nimport { useRouter } from \"next/navigation\";\r\n\r\ntype Me = {\r\n  _id: string;\r\n  email: string;\r\n  full_name?: string;\r\n  role?: number;\r\n  avatar?: string;\r\n};\r\n\r\nexport default function MyProfilePage() {\r\n  const [me, setMe] = useState<Me | null>(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const router = useRouter();\r\n\r\n  useEffect(() => {\r\n    const token = typeof window !== 'undefined' ? (sessionStorage.getItem('token') || localStorage.getItem('token')) : null;\r\n    if (!token) {\r\n      router.replace('/login');\r\n      return;\r\n    }\r\n    (async () => {\r\n      try {\r\n        const res = await axiosInstance.get('/api/users/me');\r\n        setMe(res.data);\r\n      } catch (e: any) {\r\n        setError(e?.response?.data?.message || 'Không thể tải hồ sơ');\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    })();\r\n  }, [router]);\r\n\r\n  if (loading) {\r\n    return <main className=\"p-6\">Đang tải...</main>;\r\n  }\r\n\r\n  if (error) {\r\n    return <main className=\"p-6 text-red-600\">{error}</main>;\r\n  }\r\n\r\n  if (!me) return null;\r\n\r\n  return (\r\n    <main className=\"p-6\">\r\n      <div className=\"mx-auto w-full max-w-5xl\">\r\n        {/* Header actions */}\r\n        <div className=\"flex items-center justify-between mb-6\">\r\n          <div className=\"flex items-center gap-6\">\r\n            <button className=\"text-sm font-medium px-2 py-1 rounded\" style={{color:'var(--primary)'}}>Thông tin cá nhân</button>\r\n            <button className=\"text-sm opacity-80 px-2 py-1\">Dự án</button>\r\n            <button className=\"text-sm opacity-80 px-2 py-1\">Cài đặt</button>\r\n          </div>\r\n          <button className=\"px-4 py-2 rounded-lg btn-primary text-white\">✎ Chỉnh Sửa</button>\r\n        </div>\r\n\r\n        {/* Top section */}\r\n        <div className=\"grid grid-cols-1 lg:grid-cols-[auto,1fr] gap-6 mb-8\">\r\n          {/* Avatar card */}\r\n          <div className=\"card rounded-xl p-6 flex items-center gap-5\">\r\n            <div className=\"w-24 h-24 rounded-xl overflow-hidden flex items-center justify-center text-3xl font-semibold border\" style={{borderColor:'var(--border)', background:'var(--muted)'}}>\r\n              {me.avatar ? (\r\n                <Image src={me.avatar} alt=\"avatar\" width={96} height={96} />\r\n              ) : (\r\n                (me.full_name?.[0]?.toUpperCase() || me.email?.[0]?.toUpperCase() || 'N')\r\n              )}\r\n            </div>\r\n            <div className=\"flex-1\">\r\n              <div className=\"text-lg font-medium\">{me.full_name || 'No name'}</div>\r\n              <div className=\"text-sm opacity-80\">{me.email}</div>\r\n            </div>\r\n            <button className=\"btn-primary rounded-lg px-4 py-2 text-sm\">⬆ Tải Ảnh Lên</button>\r\n          </div>\r\n\r\n          {/* Banner */}\r\n          <div className=\"card rounded-xl p-6 flex items-center justify-between\">\r\n            <div>\r\n              <div className=\"font-medium mb-1\">Thông báo</div>\r\n              <div className=\"text-sm opacity-75\">Cập nhật hồ sơ để tăng mức độ hoàn thiện tài khoản của bạn.</div>\r\n            </div>\r\n            <button className=\"px-4 py-2 rounded-lg\" style={{border:'1px solid var(--border)'}}>Hoàn thiện</button>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Details */}\r\n        <div className=\"mb-4\">\r\n          <h2 className=\"text-xl font-semibold\" style={{color:'var(--primary)'}}>Thông Tin Cá Nhân</h2>\r\n        </div>\r\n\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\r\n          {[\r\n            { label: 'Họ và Tên', icon: '👤', value: me.full_name || 'Empty' },\r\n            { label: 'Email', icon: '✉️', value: me.email || 'Empty' },\r\n            { label: 'Số Điện Thoại', icon: '📞', value: 'Empty' },\r\n            { label: 'Mã Số Sinh Viên', icon: '🆔', value: 'Empty' },\r\n            { label: 'Chuyên Ngành', icon: '📘', value: 'Empty' },\r\n          ].map((item) => (\r\n            <div key={item.label} className=\"card rounded-xl p-4\">\r\n              <div className=\"text-xs opacity-70 mb-2\">{item.label}</div>\r\n              <div className=\"flex items-center gap-2\">\r\n                <span>{item.icon}</span>\r\n                <div className=\"font-medium\">{item.value}</div>\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n    </main>\r\n  );\r\n}\r\n\r\n"],"names":[],"mappings":"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","debugId":null}}]
}