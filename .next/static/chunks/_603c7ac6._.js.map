{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///E:/SEP/SEP490_G94_FALL25_FrontEnd/ultis/axios.js"],"sourcesContent":["// lib/axios.js\r\nimport axios from 'axios';\r\nimport { useState } from 'react';\r\n\r\n// Debug log để kiểm tra env\r\n\r\n\r\nconst axiosInstance = axios.create({\r\n  baseURL: process.env.NEXT_PUBLIC_API_URL,\r\n  timeout: 30000,\r\n  headers: {\r\n    'Content-Type': 'application/json',\r\n    'Accept': 'application/json'\r\n  },\r\n});\r\n\r\n// Request interceptor\r\naxiosInstance.interceptors.request.use(\r\n  (config) => {\r\n    const token = typeof window !== 'undefined' ? sessionStorage.getItem('token') : null;\r\n    if (token) {\r\n      config.headers.Authorization = `Bearer ${token}`;\r\n    }\r\n    \r\n    // Don't set Content-Type for FormData, let axios handle it automatically\r\n    if (config.data instanceof FormData) {\r\n      delete config.headers['Content-Type'];\r\n    }\r\n    \r\n    if (process.env.NODE_ENV === 'development') {\r\n    \r\n    }\r\n    \r\n    return config;\r\n  },\r\n  (error) => {\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\n// Response interceptor\r\naxiosInstance.interceptors.response.use(\r\n  (response) => {\r\n    if (process.env.NODE_ENV === 'development') {\r\n      \r\n    }\r\n    return response;\r\n  },\r\n  (error) => {\r\n    if (process.env.NODE_ENV === 'development') {\r\n    }\r\n    \r\n    // Xử lý lỗi chung\r\n    if (error.response?.status === 401) {\r\n      if (typeof window !== 'undefined') {\r\n        localStorage.removeItem('token');\r\n        window.location.href = '/login';\r\n      }\r\n    }\r\n    if (error.response?.status === 403) {\r\n      if (typeof window !== 'undefined') {\r\n        window.location.href = '/not-found';\r\n      }\r\n    }\r\n    \r\n    if (error.response?.status === 500) {\r\n      console.error('Server Error:', error.response.data);\r\n    }\r\n    \r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\nexport default axiosInstance;\r\n\r\n// Export các method thường dùng\r\nexport const api = {\r\n  get: (url, config) => axiosInstance.get(url, config),\r\n  post: (url, data, config) => axiosInstance.post(url, data, config),\r\n  put: (url, data, config) => axiosInstance.put(url, data, config),\r\n  patch: (url, data, config) => axiosInstance.patch(url, data, config),\r\n  delete: (url, config) => axiosInstance.delete(url, config),\r\n  \r\n  // Review API methods\r\n  reviews: {\r\n    // Create a new review\r\n    create: (reviewData) => axiosInstance.post('/reviews', reviewData),\r\n    \r\n    // Get all reviews\r\n    getAll: () => axiosInstance.get('/reviews'),\r\n    \r\n    // Get reviews for a specific product\r\n    getByProduct: (productId) => axiosInstance.get(`/reviews/product/${productId}`),\r\n    \r\n    // Get unreviewed products for a user\r\n    getUnreviewed: (productId) => axiosInstance.get(`/reviews/unreviewed/${productId}`),\r\n    \r\n    // Update a review\r\n    update: (reviewId, reviewData) => axiosInstance.put(`/reviews/${reviewId}`, reviewData),\r\n    \r\n    // Delete a review\r\n    delete: (reviewId) => axiosInstance.delete(`/reviews/${reviewId}`),\r\n  },\r\n};\r\n\r\n// Utility functions cho các trường hợp đặc biệt\r\nexport const apiUtils = {\r\n  // Upload file\r\n  uploadFile: (url, file, onUploadProgress) => {\r\n    const formData = new FormData();\r\n    formData.append('file', file);\r\n    \r\n    return axiosInstance.post(url, formData, {\r\n      headers: {\r\n        'Content-Type': 'multipart/form-data',\r\n      },\r\n      onUploadProgress,\r\n    });\r\n  },\r\n  \r\n  // Download file\r\n  downloadFile: async (url, filename) => {\r\n    try {\r\n      const response = await axiosInstance.get(url, {\r\n        responseType: 'blob',\r\n      });\r\n      \r\n      const blob = new Blob([response.data]);\r\n      const downloadUrl = window.URL.createObjectURL(blob);\r\n      const link = document.createElement('a');\r\n      link.href = downloadUrl;\r\n      link.download = filename;\r\n      link.click();\r\n      window.URL.revokeObjectURL(downloadUrl);\r\n    } catch (error) {\r\n      console.error('Download failed:', error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  // Create review\r\n  createReview: async (reviewData) => {\r\n    try {\r\n      const response = await axiosInstance.post('/reviews', reviewData);\r\n      return response.data;\r\n    } catch (error) {\r\n      console.error('Create review failed:', error);\r\n      throw error;\r\n    }\r\n  },\r\n};\r\n\r\n// Custom hooks cho React components\r\nexport const useApi = () => {\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n  \r\n  const request = async (apiCall) => {\r\n    try {\r\n      setLoading(true);\r\n      setError(null);\r\n      const response = await apiCall();\r\n      return response.data;\r\n    } catch (err) {\r\n      setError(err);\r\n      throw err;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n  \r\n  return { request, loading, error };\r\n};"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 166, "column": 0}, "map": {"version":3,"sources":["file:///E:/SEP/SEP490_G94_FALL25_FrontEnd/src/lib/timeline.ts"],"sourcesContent":["export function getSpanDays(viewMode: 'Days'|'Weeks'|'Months'|'Quarters', start: Date): number {\r\n  switch (viewMode) {\r\n    case 'Days': return 7;\r\n    case 'Weeks': return 7;\r\n    case 'Months': return daysInMonthUTC(start);\r\n    case 'Quarters': return isLeapYearUTC(start.getUTCFullYear()) ? 366 : 365; // show whole year segmented by quarters\r\n    default: return 7;\r\n  }\r\n}\r\n\r\nexport function getPeriodStart(viewMode: 'Days'|'Weeks'|'Months'|'Quarters', date: Date): Date {\r\n  const d = new Date(date);\r\n  const strip = (x: Date) => { const t = new Date(x); t.setUTCHours(0,0,0,0); return t; };\r\n  switch (viewMode) {\r\n    case 'Days':\r\n    case 'Weeks': return getStartOfWeekUTC(strip(d));\r\n    case 'Months': return new Date(Date.UTC(d.getUTCFullYear(), d.getUTCMonth(), 1));\r\n    case 'Quarters': return new Date(Date.UTC(d.getUTCFullYear(), 0, 1));\r\n    default: return getStartOfWeekUTC(strip(d));\r\n  }\r\n}\r\n\r\nexport function getStartOfWeekUTC(date: Date): Date {\r\n  const d = new Date(date);\r\n  d.setUTCHours(0,0,0,0);\r\n  const day = d.getUTCDay();\r\n  const diff = (day + 6) % 7;\r\n  d.setUTCDate(d.getUTCDate() - diff);\r\n  return d;\r\n}\r\n\r\nexport function stripTimeUTC(date: Date) {\r\n  const d = new Date(date);\r\n  d.setUTCHours(0,0,0,0);\r\n  return d;\r\n}\r\n\r\nexport function addDays(date: Date, days: number) {\r\n  const d = new Date(date);\r\n  d.setUTCDate(d.getUTCDate() + days);\r\n  return d;\r\n}\r\n\r\nfunction daysInMonthUTC(date: Date): number {\r\n  const y = date.getUTCFullYear();\r\n  const m = date.getUTCMonth();\r\n  return new Date(Date.UTC(y, m + 1, 0)).getUTCDate();\r\n}\r\n\r\nfunction daysInQuarterUTC(date: Date): number { // kept for potential future use\r\n  const qStartMonth = Math.floor(date.getUTCMonth() / 3) * 3;\r\n  const start = new Date(Date.UTC(date.getUTCFullYear(), qStartMonth, 1));\r\n  const end = new Date(Date.UTC(date.getUTCFullYear(), qStartMonth + 3, 0));\r\n  return (stripTimeUTC(end).getTime() - stripTimeUTC(start).getTime()) / (24*60*60*1000) + 1;\r\n}\r\n\r\nfunction isLeapYearUTC(year: number): boolean {\r\n  return (year % 4 === 0 && year % 100 !== 0) || (year % 400 === 0);\r\n}\r\n\r\n\r\n"],"names":[],"mappings":";;;;;;;;;;;;AAAO,SAAS,YAAY,QAA4C,EAAE,KAAW;IACnF,OAAQ;QACN,KAAK;YAAQ,OAAO;QACpB,KAAK;YAAS,OAAO;QACrB,KAAK;YAAU,OAAO,eAAe;QACrC,KAAK;YAAY,OAAO,cAAc,MAAM,cAAc,MAAM,MAAM,KAAK,wCAAwC;QACnH;YAAS,OAAO;IAClB;AACF;AAEO,SAAS,eAAe,QAA4C,EAAE,IAAU;IACrF,MAAM,IAAI,IAAI,KAAK;IACnB,MAAM,QAAQ,CAAC;QAAc,MAAM,IAAI,IAAI,KAAK;QAAI,EAAE,WAAW,CAAC,GAAE,GAAE,GAAE;QAAI,OAAO;IAAG;IACtF,OAAQ;QACN,KAAK;QACL,KAAK;YAAS,OAAO,kBAAkB,MAAM;QAC7C,KAAK;YAAU,OAAO,IAAI,KAAK,KAAK,GAAG,CAAC,EAAE,cAAc,IAAI,EAAE,WAAW,IAAI;QAC7E,KAAK;YAAY,OAAO,IAAI,KAAK,KAAK,GAAG,CAAC,EAAE,cAAc,IAAI,GAAG;QACjE;YAAS,OAAO,kBAAkB,MAAM;IAC1C;AACF;AAEO,SAAS,kBAAkB,IAAU;IAC1C,MAAM,IAAI,IAAI,KAAK;IACnB,EAAE,WAAW,CAAC,GAAE,GAAE,GAAE;IACpB,MAAM,MAAM,EAAE,SAAS;IACvB,MAAM,OAAO,CAAC,MAAM,CAAC,IAAI;IACzB,EAAE,UAAU,CAAC,EAAE,UAAU,KAAK;IAC9B,OAAO;AACT;AAEO,SAAS,aAAa,IAAU;IACrC,MAAM,IAAI,IAAI,KAAK;IACnB,EAAE,WAAW,CAAC,GAAE,GAAE,GAAE;IACpB,OAAO;AACT;AAEO,SAAS,QAAQ,IAAU,EAAE,IAAY;IAC9C,MAAM,IAAI,IAAI,KAAK;IACnB,EAAE,UAAU,CAAC,EAAE,UAAU,KAAK;IAC9B,OAAO;AACT;AAEA,SAAS,eAAe,IAAU;IAChC,MAAM,IAAI,KAAK,cAAc;IAC7B,MAAM,IAAI,KAAK,WAAW;IAC1B,OAAO,IAAI,KAAK,KAAK,GAAG,CAAC,GAAG,IAAI,GAAG,IAAI,UAAU;AACnD;AAEA,SAAS,iBAAiB,IAAU;IAClC,MAAM,cAAc,KAAK,KAAK,CAAC,KAAK,WAAW,KAAK,KAAK;IACzD,MAAM,QAAQ,IAAI,KAAK,KAAK,GAAG,CAAC,KAAK,cAAc,IAAI,aAAa;IACpE,MAAM,MAAM,IAAI,KAAK,KAAK,GAAG,CAAC,KAAK,cAAc,IAAI,cAAc,GAAG;IACtE,OAAO,CAAC,aAAa,KAAK,OAAO,KAAK,aAAa,OAAO,OAAO,EAAE,IAAI,CAAC,KAAG,KAAG,KAAG,IAAI,IAAI;AAC3F;AAEA,SAAS,cAAc,IAAY;IACjC,OAAO,AAAC,OAAO,MAAM,KAAK,OAAO,QAAQ,KAAO,OAAO,QAAQ;AACjE","debugId":null}},
    {"offset": {"line": 250, "column": 0}, "map": {"version":3,"sources":["file:///E:/SEP/SEP490_G94_FALL25_FrontEnd/src/components/ResponsiveSidebar.tsx"],"sourcesContent":["\"use client\";\n\nimport Link from \"next/link\";\nimport { usePathname, useRouter } from \"next/navigation\";\nimport { useEffect, useState } from \"react\";\nimport axiosInstance from \"../../ultis/axios\";\n\nconst navItems = [\n  { href: \"/dashboard\", label: \"Dashboard\", icon: (\n    <svg className=\"w-5 h-5\" aria-hidden=\"true\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"currentColor\" viewBox=\"0 0 22 21\">\n      <path d=\"M16.975 11H10V4.025a1 1 0 0 0-1.066-.998 8.5 8.5 0 1 0 9.039 9.039.999.999 0 0 0-1-1.066h.002Z\"/>\n      <path d=\"M12.5 0c-.157 0-.311.01-.565.027A1 1 0 0 0 11 1.02V10h8.975a1 1 0 0 0 1-.935c.013-.188.028-.374.028-.565A8.51 8.51 0 0 0 12.5 0Z\"/>\n    </svg>\n  )},\n  { href: \"/\", label: \"Dự án\", icon: (\n    <svg className=\"w-5 h-5\" aria-hidden=\"true\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"currentColor\" viewBox=\"0 0 18 18\">\n      <path d=\"M6.143 0H1.857A1.857 1.857 0 0 0 0 1.857v4.286C0 7.169.831 8 1.857 8h4.286A1.857 1.857 0 0 0 8 6.143V1.857A1.857 1.857 0 0 0 6.143 0Zm10 0h-4.286A1.857 1.857 0 0 0 10 1.857v4.286C10 7.169 10.831 8 11.857 8h4.286A1.857 1.857 0 0 0 18 6.143V1.857A1.857 1.857 0 0 0 16.143 0Zm-10 10H1.857A1.857 1.857 0 0 0 0 11.857v4.286C0 17.169.831 18 1.857 18h4.286A1.857 1.857 0 0 0 8 16.143v-4.286A1.857 1.857 0 0 0 6.143 10Zm10 0h-4.286A1.857 1.857 0 0 0 10 11.857v4.286c0 1.026.831 1.857 1.857 1.857h4.286A1.857 1.857 0 0 0 18 16.143v-4.286A1.857 1.857 0 0 0 16.143 10Z\"/>\n    </svg>\n  )},\n  { href: \"/myprofile\", label: \"Users\", icon: (\n    <svg className=\"w-5 h-5\" aria-hidden=\"true\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"currentColor\" viewBox=\"0 0 20 18\">\n      <path d=\"M14 2a3.963 3.963 0 0 0-1.4.267 6.439 6.439 0 0 1-1.331 6.638A4 4 0 1 0 14 2Zm1 9h-1.264A6.957 6.957 0 0 1 15 15v2a2.97 2.97 0 0 1-.184 1H19a1 1 0 0 0 1-1v-1a5.006 5.006 0 0 0-5-5ZM6.5 9a4.5 4.5 0 1 0 0-9 4.5 4.5 0 0 0 0 9ZM8 10H5a5.006 5.006 0 0 0-5 5v2a1 1 0 0 0 1 1h11a1 1 0 0 0 1-1v-2a5.006 5.006 0 0 0-5-5Z\"/>\n    </svg>\n  )},\n];\n\nexport default function ResponsiveSidebar() {\n  const pathname = usePathname();\n  const router = useRouter();\n  const [open, setOpen] = useState(false);\n  const [me, setMe] = useState<{ full_name?: string; email?: string; avatar?: string } | null>(null);\n\n  useEffect(() => {\n    setOpen(false);\n  }, [pathname]);\n\n  useEffect(() => {\n    (async () => {\n      try {\n        const token = typeof window !== 'undefined' ? (sessionStorage.getItem('token') || localStorage.getItem('token')) : null;\n        if (!token) return;\n        const res = await axiosInstance.get('/api/users/me');\n        setMe(res.data || null);\n      } catch {\n        // silently ignore\n      }\n    })();\n  }, []);\n\n  const onLogout = () => {\n    if (typeof window !== 'undefined') {\n      sessionStorage.removeItem('token');\n      localStorage.removeItem('token');\n    }\n    router.replace('/login');\n  };\n\n  return (\n    <>\n      <button\n        type=\"button\"\n        aria-controls=\"default-sidebar\"\n        aria-expanded={open}\n        onClick={() => setOpen((v) => !v)}\n        className=\"inline-flex items-center p-2 mt-2 ms-3 text-sm text-gray-500 rounded-lg md:hidden hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200\"\n      >\n        <span className=\"sr-only\">Open sidebar</span>\n        <svg className=\"w-6 h-6\" aria-hidden=\"true\" fill=\"currentColor\" viewBox=\"0 0 20 20\" xmlns=\"http://www.w3.org/2000/svg\">\n          <path clipRule=\"evenodd\" fillRule=\"evenodd\" d=\"M2 4.75A.75.75 0 012.75 4h14.5a.75.75 0 010 1.5H2.75A.75.75 0 012 4.75zm0 10.5a.75.75 0 01.75-.75h7.5a.75.75 0 010 1.5h-7.5a.75.75 0 01-.75-.75zM2 10a.75.75 0 01.75-.75h14.5a.75.75 0 010 1.5H2.75A.75.75 0 012 10z\"></path>\n        </svg>\n      </button>\n\n      <aside\n        id=\"default-sidebar\"\n        className={`fixed top-0 left-0 z-40 w-64 h-screen transition-transform ${open ? 'translate-x-0' : '-translate-x-full'} md:translate-x-0`}\n        aria-label=\"Sidebar\"\n      >\n        <div className=\"h-full px-3 py-4 overflow-y-auto glass\">\n          {me ? (\n            <div className=\"mb-4 flex items-center gap-3 p-3 card\">\n              <div className=\"h-10 w-10 rounded-full flex items-center justify-center overflow-hidden bg-gray-100\">\n                {me.avatar ? (\n                  // eslint-disable-next-line @next/next/no-img-element\n                  <img src={me.avatar} alt=\"avatar\" className=\"h-full w-full object-cover\" />\n                ) : (\n                  <span className=\"text-sm font-semibold text-gray-600\">{(me.full_name?.[0] || me.email?.[0] || 'U').toUpperCase()}</span>\n                )}\n              </div>\n              <div className=\"truncate\">\n                <div className=\"text-sm font-medium truncate\">{me.full_name || 'User'}</div>\n                <div className=\"text-xs text-gray-500 truncate\">{me.email || ''}</div>\n              </div>\n            </div>\n          ) : null}\n\n          <ul className=\"space-y-2 font-medium\">\n            {navItems.map((item) => {\n              const active = pathname === item.href;\n              return (\n                <li key={`${item.href}-${item.label}`}>\n                  <Link\n                    href={item.href}\n                    className={`flex items-center p-2 rounded-lg group border transition-colors ${active ? 'bg-[var(--muted)] border-[var(--border)] text-gray-900' : 'hover:bg-[var(--muted)] border-transparent text-gray-900'}`}\n                  >\n                    <span className=\"text-gray-500 group-hover:text-gray-900\">{item.icon}</span>\n                    <span className=\"ms-3\">{item.label}</span>\n                  </Link>\n                </li>\n              );\n            })}\n            <li>\n              <button\n                onClick={onLogout}\n                className=\"w-full text-left flex items-center p-2 rounded-lg border hover:bg-[var(--muted)] text-gray-900 transition-colors\"\n                style={{borderColor: 'var(--border)'}}\n              >\n                <svg className=\"w-5 h-5 text-gray-500\" aria-hidden=\"true\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 18 16\">\n                  <path stroke=\"currentColor\" strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M1 8h11m0 0L8 4m4 4-4 4m4-11h3a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-3\"/>\n                </svg>\n                <span className=\"ms-3\">Đăng xuất</span>\n              </button>\n            </li>\n          </ul>\n        </div>\n      </aside>\n    </>\n  );\n}\n\n\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 611, "column": 0}, "map": {"version":3,"sources":["file:///E:/SEP/SEP490_G94_FALL25_FrontEnd/src/components/GanttChart.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { useEffect, useMemo, useRef } from \"react\";\r\nimport { getPeriodStart } from \"@/lib/timeline\";\r\nimport type { CSSProperties } from \"react\";\r\n\r\n// dhtmlx-gantt is pure JS; import lazily inside effects to avoid SSR issues\r\n\r\nexport type GanttMilestone = {\r\n  _id: string;\r\n  title: string;\r\n  start_date?: string;\r\n  deadline?: string;\r\n  status?: string;\r\n  description?: string;\r\n  createdAt?: string;\r\n  progress?: {\r\n    overall: number;\r\n    by_feature: Array<{\r\n      feature_id: string;\r\n      feature_title: string;\r\n      feature_code: string;\r\n      task_count: number;\r\n      function_count: number;\r\n      completed_tasks: number;\r\n      completed_functions: number;\r\n      percentage: number;\r\n    }>;\r\n    by_task: {\r\n      total: number;\r\n      completed: number;\r\n      percentage: number;\r\n    };\r\n    by_function: {\r\n      total: number;\r\n      completed: number;\r\n      percentage: number;\r\n    };\r\n  };\r\n};\r\n\r\ntype ViewMode = \"Days\" | \"Weeks\" | \"Months\" | \"Quarters\";\r\n\r\nexport default function GanttChart({\r\n  milestones,\r\n  viewMode,\r\n  startDate,\r\n  autoFit,\r\n  pagingStepDays,\r\n  onRequestShift,\r\n  onMilestoneShift,\r\n  onMilestoneClick,\r\n  searchTerm,\r\n}: {\r\n  milestones: GanttMilestone[];\r\n  viewMode: ViewMode;\r\n  startDate: Date;\r\n  autoFit?: boolean;\r\n  pagingStepDays?: number;\r\n  onRequestShift?: (days: number) => void;\r\n  onMilestoneShift?: (id: string, deltaDays: number) => void;\r\n  onMilestoneClick?: (id: string) => void;\r\n  searchTerm?: string;\r\n}) {\r\n  const ganttContainerRef = useRef<HTMLDivElement | null>(null);\r\n  const periodStart = useMemo(() => getPeriodStart(viewMode, startDate), [viewMode, startDate]);\r\n\r\n  useEffect(() => {\r\n    let isMounted = true;\r\n    const init = async () => {\r\n      const gantt = (await import(\"dhtmlx-gantt\")).gantt;\r\n\r\n      if (!isMounted || !ganttContainerRef.current) return;\r\n\r\n      gantt.clearAll();\r\n\r\n      // Configure scale per view mode\r\n      if (viewMode === \"Days\") {\r\n        gantt.config.scales = [\r\n          { unit: \"week\", step: 1, format: (date: Date) => formatWeekLabelRange(date) },\r\n          { unit: \"day\", step: 1, format: \"%D %d\" },\r\n        ];\r\n        gantt.config.scale_height = 50;\r\n      } else if (viewMode === \"Weeks\") {\r\n        gantt.config.scales = [\r\n          { unit: \"month\", step: 1, format: \"%M %Y\" },\r\n          { unit: \"week\", step: 1, format: (date: Date) => `W${getISOWeek(date)}` },\r\n        ];\r\n        gantt.config.scale_height = 50;\r\n      } else if (viewMode === \"Months\") {\r\n        gantt.config.scales = [\r\n          { unit: \"year\", step: 1, format: \"%Y\" },\r\n          { unit: \"month\", step: 1, format: \"%M\" },\r\n        ];\r\n        gantt.config.scale_height = 45;\r\n      } else {\r\n        // Quarters\r\n        gantt.config.scales = [\r\n          { unit: \"year\", step: 1, format: \"%Y\" },\r\n          { unit: \"quarter\", step: 1, format: (date: Date) => `Q${Math.floor(date.getUTCMonth() / 3) + 1}` },\r\n        ];\r\n        gantt.config.scale_height = 40;\r\n      }\r\n\r\n      gantt.config.readonly = false;\r\n      gantt.config.drag_move = true;\r\n      gantt.config.drag_resize = true;\r\n      gantt.config.drag_progress = false;\r\n      gantt.config.fit_tasks = !!autoFit;\r\n      gantt.config.row_height = 32;\r\n      gantt.config.bar_height = 20;\r\n      // Hide the grid (Title/Start/End columns)\r\n      gantt.config.columns = [];\r\n      gantt.config.grid_width = 0;\r\n\r\n      // Color by status via templates\r\n      gantt.templates.task_class = (start: Date, end: Date, task: any) => {\r\n        const status = task.status as string | undefined;\r\n        if (status === \"Planned\") return \"gantt-task-planned\";\r\n        if (status === \"In Progress\") return \"gantt-task-inprogress\";\r\n        if (status === \"Completed\") return \"gantt-task-completed\";\r\n        if (status === \"Overdue\") return \"gantt-task-overdue\";\r\n        return \"gantt-task-default\";\r\n      };\r\n\r\n      // Custom task text template to show progress\r\n      gantt.templates.task_text = (start: Date, end: Date, task: any) => {\r\n        const progress = task.progress;\r\n        if (progress && progress.overall !== undefined) {\r\n          return `${task.text} (${progress.overall}%)`;\r\n        }\r\n        return task.text;\r\n      };\r\n\r\n      // Change listener to fire delta days\r\n      gantt.attachEvent(\"onAfterTaskDrag\", (id: string, mode: string, e: any) => {\r\n        if (mode !== \"move\") return true;\r\n        const task = gantt.getTask(id);\r\n        const original = task._original_start as Date | undefined;\r\n        if (!original || !task.start_date) return true;\r\n        const msPerDay = 24 * 60 * 60 * 1000;\r\n        const deltaDays = Math.round((stripUTC(asDate(task.start_date)).getTime() - stripUTC(original).getTime()) / msPerDay);\r\n        if (deltaDays !== 0) onMilestoneShift?.(id, deltaDays);\r\n        return true;\r\n      });\r\n\r\n      // Keep original start for delta calc\r\n      gantt.attachEvent(\"onBeforeTaskDrag\", (id: string, mode: string, e: any) => {\r\n        const task = gantt.getTask(id);\r\n        if (task.start_date) task._original_start = asDate(task.start_date);\r\n        return true;\r\n      });\r\n\r\n      // Click to open details\r\n      gantt.attachEvent(\"onTaskClick\", function(id: string){\r\n        onMilestoneClick?.(id as any);\r\n        return true;\r\n      });\r\n\r\n      // Init and set data\r\n      gantt.init(ganttContainerRef.current);\r\n      const data = mapMilestonesToGantt(milestones, periodStart);\r\n      gantt.parse({ data });\r\n\r\n      // Scroll to periodStart\r\n      gantt.showDate(periodStart);\r\n    };\r\n    init();\r\n    return () => {\r\n      isMounted = false;\r\n      // dhtmlx-gantt has no explicit destroy; clearing is enough on unmount\r\n      // container will be removed by React\r\n    };\r\n  }, [milestones, periodStart, viewMode, autoFit, onMilestoneShift]);\r\n\r\n  const containerStyle: CSSProperties = {\r\n    height: 380,\r\n    width: \"100%\",\r\n    border: \"1px solid var(--border)\",\r\n    background: \"color-mix(in oklab, var(--accent) 6%, var(--background))\",\r\n    borderRadius: 14,\r\n    boxShadow: \"var(--shadow-soft)\",\r\n  };\r\n\r\n  return (\r\n    <div className={`w-full ${viewMode === \"Days\" ? \"gantt-split-half\" : \"\"}`}>\r\n      <div ref={ganttContainerRef} style={containerStyle} />\r\n      <style>{`\r\n        /* Container */\r\n        .gantt_container { font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial; color: var(--foreground); }\r\n\r\n        /* Scales */\r\n        .gantt_scale_line { background: color-mix(in oklab, var(--accent) 18%, var(--background)); border-color: var(--border); }\r\n        .gantt_scale_cell { color: color-mix(in oklab, var(--foreground) 82%, transparent); font-weight: 600; letter-spacing: .2px; }\r\n        .gantt_task .gantt_task_scale { background: color-mix(in oklab, var(--accent) 18%, var(--background)); }\r\n\r\n        /* Rows */\r\n        .gantt_row, .gantt_task_row { background: var(--background); }\r\n        .gantt_row.odd, .gantt_task_row.odd { background: color-mix(in oklab, var(--accent) 10%, var(--background)); }\r\n        .gantt_row, .gantt_task_row { border-bottom: 1px solid var(--border); }\r\n\r\n        /* Half-day horizontal split for Days view */\r\n        .gantt-split-half .gantt_task_row, .gantt-split-half .gantt_row {\r\n          background-image: repeating-linear-gradient(\r\n            to bottom,\r\n            transparent 0 16px,\r\n            var(--border) 16px 17px,\r\n            transparent 17px 32px\r\n          );\r\n          background-blend-mode: normal;\r\n        }\r\n\r\n        /* Tasks */\r\n        .gantt_task_line { border-radius: 8px; border: 1px solid transparent; box-shadow: 0 2px 8px rgba(0,0,0,.06); background: color-mix(in oklab, var(--foreground) 24%, transparent); }\r\n        .gantt_task_content { padding: 2px 10px; font-weight: 600; text-shadow: none; }\r\n\r\n        /* Status colors */\r\n        .gantt-task-planned .gantt_task_content { background: #3b82f6 !important; color: #ffffff; } /* blue-500 */\r\n        .gantt-task-inprogress .gantt_task_content { background: var(--primary-600) !important; color: #ffffff; }\r\n        .gantt-task-completed .gantt_task_content { background: #22c55e !important; color: #ffffff; } /* green-500 */\r\n        .gantt-task-overdue .gantt_task_content { background: #ef4444 !important; color: #ffffff; } /* red-500 */\r\n        .gantt-task-default .gantt_task_content { background: #6b7280 !important; color: #ffffff; } /* slate-500 */\r\n\r\n        /* Selection/focus */\r\n        .gantt_selected .gantt_task_line { outline: 2px solid var(--ring); outline-offset: 0; box-shadow: none; }\r\n\r\n        /* Grid hidden state smoothing */\r\n        .gantt_layout_cell.gantt_grid { border-right: none; }\r\n\r\n        /* Today marker */\r\n        .today .gantt_marker { background: var(--primary-600); opacity: .9; width: 2px; }\r\n        .today .gantt_marker_content { background: var(--primary-600); color: #fff; border-radius: 8px; padding: 2px 8px; font-size: 12px; box-shadow: 0 4px 12px color-mix(in oklab, var(--primary) 40%, transparent); }\r\n\r\n        /* Links (if ever enabled) */\r\n        .gantt_link_line { stroke: color-mix(in oklab, var(--primary) 80%, #000 20%); }\r\n        .gantt_link_arrow { fill: color-mix(in oklab, var(--primary) 80%, #000 20%); }\r\n\r\n        /* Scrollbars */\r\n        .gantt_container ::-webkit-scrollbar { height: 8px; width: 8px; }\r\n        .gantt_container ::-webkit-scrollbar-thumb { background: color-mix(in oklab, var(--foreground) 30%, transparent); border-radius: 10px; }\r\n        .gantt_container ::-webkit-scrollbar-track { background: transparent; }\r\n      `}</style>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction mapMilestonesToGantt(items: GanttMilestone[], fallbackStart: Date) {\r\n  const msPerDay = 24 * 60 * 60 * 1000;\r\n  return items.map((m) => {\r\n    const startCandidate = m.start_date || m.createdAt || m.deadline;\r\n    const endCandidate = m.deadline || m.start_date || startCandidate;\r\n    const start = startCandidate ? new Date(startCandidate) : fallbackStart;\r\n    const end = endCandidate ? new Date(endCandidate) : new Date(start.getTime() + msPerDay);\r\n    const durationDays = Math.max(1, Math.ceil((stripUTC(end).getTime() - stripUTC(start).getTime()) / msPerDay));\r\n    return {\r\n      id: m._id,\r\n      text: m.title,\r\n      start_date: toGanttDate(start),\r\n      duration: durationDays,\r\n      status: m.status,\r\n      progress: m.progress,\r\n    };\r\n  });\r\n}\r\n\r\nfunction toGanttDate(d: Date) {\r\n  // dhtmlx-gantt default format is \"%d-%m-%Y\" if not configured; use Date directly as it accepts Date objects too\r\n  return new Date(d);\r\n}\r\n\r\nfunction stripUTC(date: Date) {\r\n  const d = new Date(date);\r\n  d.setUTCHours(0, 0, 0, 0);\r\n  return d;\r\n}\r\n\r\nfunction asDate(value: string | number | Date): Date {\r\n  return value instanceof Date ? value : new Date(value);\r\n}\r\n\r\nfunction getISOWeek(d: Date) {\r\n  const date = new Date(Date.UTC(d.getUTCFullYear(), d.getUTCMonth(), d.getUTCDate()));\r\n  const dayNum = date.getUTCDay() || 7;\r\n  date.setUTCDate(date.getUTCDate() + 4 - dayNum);\r\n  const yearStart = new Date(Date.UTC(date.getUTCFullYear(), 0, 1));\r\n  const weekNo = Math.ceil(((date.getTime() - yearStart.getTime()) / 86400000 + 1) / 7);\r\n  return weekNo;\r\n}\r\n\r\nfunction startOfISOWeekUTC(d: Date) {\r\n  const date = new Date(Date.UTC(d.getUTCFullYear(), d.getUTCMonth(), d.getUTCDate()));\r\n  const day = date.getUTCDay() || 7; // 1..7 Mon..Sun\r\n  if (day !== 1) date.setUTCDate(date.getUTCDate() - (day - 1));\r\n  return date;\r\n}\r\n\r\nfunction addDaysUTC(d: Date, num: number) {\r\n  const nd = new Date(d);\r\n  nd.setUTCDate(nd.getUTCDate() + num);\r\n  return nd;\r\n}\r\n\r\nfunction formatShortMonthEn(d: Date) {\r\n  return d.toLocaleString(\"en-US\", { month: \"short\", timeZone: \"UTC\" });\r\n}\r\n\r\nfunction formatWeekLabelRange(date: Date) {\r\n  const week = getISOWeek(date);\r\n  const start = startOfISOWeekUTC(date);\r\n  const end = addDaysUTC(start, 6);\r\n  const s = `${formatShortMonthEn(start)} ${start.getUTCDate()}`;\r\n  const e = `${formatShortMonthEn(end)} ${end.getUTCDate()}`;\r\n  return `Week ${week} ${s} - ${e}`;\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 898, "column": 0}, "map": {"version":3,"sources":["file:///E:/SEP/SEP490_G94_FALL25_FrontEnd/src/app/projects/%5Bid%5D/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useState } from \"react\";\nimport { useParams, useRouter } from \"next/navigation\";\nimport axiosInstance from \"../../../../ultis/axios\";\nimport { getStartOfWeekUTC, addDays } from \"@/lib/timeline\";  \nimport ResponsiveSidebar from \"@/components/ResponsiveSidebar\"; \nimport GanttChart from \"@/components/GanttChart\";\nimport ModalMilestone from \"@/components/ModalMilestone\";\nimport { Button, Popover, FormGroup, FormControlLabel, Checkbox as MUICheckbox, Select as MUISelect, MenuItem, Typography, Box, Card, CardContent, Table, TableBody, TableCell, TableContainer, TableHead, TableRow, Paper, Chip, LinearProgress, Stack, TextField, InputAdornment, Tooltip } from \"@mui/material\";\nimport ArrowBackIcon from \"@mui/icons-material/ArrowBack\";\nimport AddIcon from \"@mui/icons-material/Add\";\nimport AssignmentIcon from \"@mui/icons-material/Assignment\";\nimport FunctionsIcon from \"@mui/icons-material/Functions\";\nimport SearchIcon from \"@mui/icons-material/Search\";\nimport ClearIcon from \"@mui/icons-material/Clear\";\n\ntype Milestone = {\n  _id: string;\n  title: string;\n  start_date?: string;\n  deadline?: string;\n  status?: string;\n  description?: string;\n  createdAt?: string;\n  progress?: {\n    overall: number;\n    by_feature: Array<{\n      feature_id: string;\n      feature_title: string;\n      feature_code: string;\n      task_count: number;\n      function_count: number;\n      completed_tasks: number;\n      completed_functions: number;\n      percentage: number;\n    }>;\n    by_task: {\n      total: number;\n      completed: number;\n      percentage: number;\n    };\n    by_function: {\n      total: number;\n      completed: number;\n      percentage: number;\n    };\n  };\n};\n\nexport default function ProjectDetailPage() {\n  const router = useRouter();\n  const params = useParams();\n  const projectId = Array.isArray(params?.id) ? params?.id[0] : (params?.id as string);\n  const [milestones, setMilestones] = useState<Milestone[] | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const [milestoneFeatures, setMilestoneFeatures] = useState<Record<string, any[]>>({});\n  const [searchTerm, setSearchTerm] = useState(\"\");\n  const [searchType, setSearchType] = useState<\"all\" | \"milestone\" | \"feature\">(\"all\");\n\n  useEffect(() => {\n    if (!projectId) return;\n    (async () => {\n      try {\n        const res = await axiosInstance.get(`/api/projects/${projectId}/milestones`);\n        console.log(res.data);\n        const milestonesData = Array.isArray(res.data) ? res.data : [];\n        \n        // Lấy tiến độ chi tiết cho từng milestone\n        const milestonesWithProgress = await Promise.all(\n          milestonesData.map(async (milestone: any) => {\n            try {\n              const progressRes = await axiosInstance.get(`/api/projects/${projectId}/milestones/${milestone._id}/progress`);\n              return { ...milestone, progress: progressRes.data.progress };\n            } catch (e) {\n              console.log(`Không thể lấy tiến độ cho milestone ${milestone._id}:`, e);\n              return milestone;\n            }\n          })\n        );\n        \n        setMilestones(milestonesWithProgress);\n\n        // Lấy thông tin features cho từng milestone\n        const featuresMap: Record<string, any[]> = {};\n        for (const milestone of milestonesWithProgress) {\n          if (milestone.progress?.by_feature) {\n            featuresMap[milestone._id] = milestone.progress.by_feature;\n          }\n        }\n        setMilestoneFeatures(featuresMap);\n      } catch (e: any) {\n        setError(e?.response?.data?.message || 'Không thể tải milestone');\n      } finally {\n        setLoading(false);\n      }\n    })();\n  }, [projectId]);\n\n  // Keyboard shortcuts for search\n  useEffect(() => {\n    const handleKeyDown = (e: KeyboardEvent) => {\n      // Ctrl/Cmd + K to focus search\n      if ((e.ctrlKey || e.metaKey) && e.key === 'k') {\n        e.preventDefault();\n        const searchInput = document.querySelector('input[placeholder*=\"Tìm kiếm\"]') as HTMLInputElement;\n        if (searchInput) {\n          searchInput.focus();\n        }\n      }\n      // Escape to clear search\n      if (e.key === 'Escape' && searchTerm) {\n        setSearchTerm(\"\");\n      }\n    };\n\n    document.addEventListener('keydown', handleKeyDown);\n    return () => document.removeEventListener('keydown', handleKeyDown);\n  }, [searchTerm]);\n\n  // Filter functions\n  const getFilteredMilestones = () => {\n    if (!milestones || !searchTerm) return milestones || [];\n    \n    const term = searchTerm.toLowerCase();\n    \n    if (searchType === \"milestone\") {\n      return milestones.filter(milestone => \n        milestone.title.toLowerCase().includes(term) ||\n        milestone.description?.toLowerCase().includes(term)\n      );\n    }\n    \n    if (searchType === \"feature\") {\n      const filteredMilestoneIds = new Set<string>();\n      Object.entries(milestoneFeatures).forEach(([milestoneId, features]) => {\n        const hasMatchingFeature = features.some(feature =>\n          feature.feature_title.toLowerCase().includes(term) ||\n          feature.feature_code.toLowerCase().includes(term)\n        );\n        if (hasMatchingFeature) {\n          filteredMilestoneIds.add(milestoneId);\n        }\n      });\n      \n      return milestones.filter(milestone => filteredMilestoneIds.has(milestone._id));\n    }\n    \n    // searchType === \"all\"\n    const filteredMilestoneIds = new Set<string>();\n    \n    // Search in milestone titles/descriptions\n    milestones.forEach(milestone => {\n      if (milestone.title.toLowerCase().includes(term) ||\n          milestone.description?.toLowerCase().includes(term)) {\n        filteredMilestoneIds.add(milestone._id);\n      }\n    });\n    \n    // Search in features\n    Object.entries(milestoneFeatures).forEach(([milestoneId, features]) => {\n      const hasMatchingFeature = features.some(feature =>\n        feature.feature_title.toLowerCase().includes(term) ||\n        feature.feature_code.toLowerCase().includes(term)\n      );\n      if (hasMatchingFeature) {\n        filteredMilestoneIds.add(milestoneId);\n      }\n    });\n    \n    return milestones.filter(milestone => filteredMilestoneIds.has(milestone._id));\n  };\n\n  const getFilteredMilestoneFeatures = () => {\n    if (!searchTerm || searchType === \"milestone\") return milestoneFeatures;\n    \n    const term = searchTerm.toLowerCase();\n    const filtered: Record<string, any[]> = {};\n    \n    Object.entries(milestoneFeatures).forEach(([milestoneId, features]) => {\n      if (searchType === \"feature\") {\n        const matchingFeatures = features.filter(feature =>\n          feature.feature_title.toLowerCase().includes(term) ||\n          feature.feature_code.toLowerCase().includes(term)\n        );\n        if (matchingFeatures.length > 0) {\n          filtered[milestoneId] = matchingFeatures;\n        }\n      } else {\n        // searchType === \"all\" - include all features for matching milestones\n        filtered[milestoneId] = features;\n      }\n    });\n    \n    return filtered;\n  };\n\n  // Helper function to highlight search terms\n  const highlightText = (text: string, searchTerm: string) => {\n    if (!searchTerm) return text;\n    \n    const regex = new RegExp(`(${searchTerm})`, 'gi');\n    const parts = text.split(regex);\n    \n    return parts.map((part, index) => \n      regex.test(part) ? (\n        <mark key={index} style={{ backgroundColor: '#ffeb3b', padding: '0 2px' }}>\n          {part}\n        </mark>\n      ) : part\n    );\n  };\n\n  return (\n    <div className=\"min-h-screen bg-[var(--background)]\">\n      <ResponsiveSidebar />\n      <main className=\"p-4 md:p-6 md:ml-64\">\n        <div className=\"mx-auto w-full max-w-7xl\">\n          <div className=\"mb-6 md:mb-8 flex items-center justify-between\">\n            <div className=\"space-y-1\">\n              <div className=\"text-[10px] md:text-xs uppercase tracking-wider text-foreground/60\">Dự án</div>\n              <h1 className=\"text-2xl md:text-3xl font-semibold tracking-tight text-foreground\">Milestones</h1>\n            </div>\n            <div className=\"flex items-center gap-2\">\n              <Button variant=\"contained\" size=\"medium\" startIcon={<AddIcon />} onClick={() => router.push(`/projects/${projectId}/milestones/new`)}>\n                Thêm Milestone\n              </Button>\n              <Button variant=\"outlined\" size=\"medium\" onClick={() => router.push(`/projects/${projectId}/features`)}>\n                Features\n              </Button>\n              <Button variant=\"outlined\" size=\"medium\" startIcon={<ArrowBackIcon />} onClick={() => router.back()}>\n                Quay lại\n              </Button>\n            </div>\n          </div>\n\n          {/* Search Bar */}\n          <Card sx={{ mb: 3 }}>\n            <CardContent>\n              <Stack direction={{ xs: 'column', md: 'row' }} spacing={2} alignItems=\"center\">\n                <Tooltip title=\"Ctrl+K để focus, Esc để xóa\">\n                  <TextField\n                    fullWidth\n                    placeholder=\"Tìm kiếm milestone hoặc feature... (Ctrl+K)\"\n                    value={searchTerm}\n                    onChange={(e) => setSearchTerm(e.target.value)}\n                    InputProps={{\n                      startAdornment: (\n                        <InputAdornment position=\"start\">\n                          <SearchIcon />\n                        </InputAdornment>\n                      ),\n                      endAdornment: searchTerm && (\n                        <InputAdornment position=\"end\">\n                          <Button\n                            size=\"small\"\n                            onClick={() => setSearchTerm(\"\")}\n                            sx={{ minWidth: 'auto', p: 0.5 }}\n                          >\n                            <ClearIcon fontSize=\"small\" />\n                          </Button>\n                        </InputAdornment>\n                      ),\n                    }}\n                    size=\"small\"\n                  />\n                </Tooltip>\n                <MUISelect\n                  value={searchType}\n                  onChange={(e) => setSearchType(e.target.value as any)}\n                  size=\"small\"\n                  sx={{ minWidth: 140 }}\n                >\n                  <MenuItem value=\"all\">Tất cả</MenuItem>\n                  <MenuItem value=\"milestone\">Milestone</MenuItem>\n                  <MenuItem value=\"feature\">Feature</MenuItem>\n                </MUISelect>\n                {searchTerm && (\n                  <Stack direction=\"row\" spacing={2} alignItems=\"center\">\n                    <Typography variant=\"body2\" color=\"text.secondary\">\n                      Tìm kiếm: \"{searchTerm}\"\n                    </Typography>\n                    <Chip \n                      label={`${getFilteredMilestones().length} milestone${getFilteredMilestones().length !== 1 ? 's' : ''}`}\n                      size=\"small\"\n                      variant=\"outlined\"\n                    />\n                    <Chip \n                      label={`${Object.values(getFilteredMilestoneFeatures()).flat().length} feature${Object.values(getFilteredMilestoneFeatures()).flat().length !== 1 ? 's' : ''}`}\n                      size=\"small\"\n                      variant=\"outlined\"\n                    />\n                  </Stack>\n                )}\n              </Stack>\n            </CardContent>\n          </Card>\n\n          {loading ? (\n            <div className=\"rounded-xl border border-[var(--border)] p-6 bg-[color-mix(in_olab,_var(--accent)_10%,_var(--background))] animate-pulse\">\n              <div className=\"h-6 w-32 rounded bg-foreground/10 mb-4\"></div>\n              <div className=\"h-4 w-48 rounded bg-foreground/10 mb-2\"></div>\n              <div className=\"h-72 w-full rounded bg-foreground/10\"></div>\n            </div>\n          ) : error ? (\n            <div className=\"rounded-xl border border-red-500/40 bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-200 p-4\">\n              {error}\n            </div>\n          ) : (\n            <>\n              {getFilteredMilestones().length === 0 && searchTerm ? (\n                <Card sx={{ mb: 3 }}>\n                  <CardContent>\n                    <Box textAlign=\"center\" py={4}>\n                      <SearchIcon sx={{ fontSize: 48, color: 'text.secondary', mb: 2 }} />\n                      <Typography variant=\"h6\" gutterBottom>\n                        Không tìm thấy kết quả\n                      </Typography>\n                      <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mb: 2 }}>\n                        Không có milestone hoặc feature nào khớp với từ khóa \"{searchTerm}\"\n                      </Typography>\n                      <Button \n                        variant=\"outlined\" \n                        onClick={() => setSearchTerm(\"\")}\n                        startIcon={<ClearIcon />}\n                      >\n                        Xóa bộ lọc\n                      </Button>\n                    </Box>\n                  </CardContent>\n                </Card>\n              ) : (\n                <>\n                  <Timeline \n                    milestones={getFilteredMilestones()} \n                    projectId={projectId} \n                    onLocalUpdate={setMilestones as any}\n                    searchTerm={searchTerm}\n                  />\n                  <MilestoneFeaturesTable \n                    milestones={getFilteredMilestones()} \n                    milestoneFeatures={getFilteredMilestoneFeatures()}\n                    searchTerm={searchTerm}\n                    highlightText={highlightText}\n                  />\n                </>\n              )}\n            </>\n          )}\n        </div>\n      </main>\n    </div>\n  );\n}\n\nfunction Timeline({ milestones, projectId, onLocalUpdate, searchTerm }: { milestones: Milestone[]; projectId: string; onLocalUpdate: any; searchTerm?: string }) {\n  const router = useRouter();\n  const [weekStart, setWeekStart] = useState<Date>(getStartOfWeekUTC(new Date()));\n  const [viewMode, setViewMode] = useState<'Days' | 'Weeks' | 'Months' | 'Quarters'>('Days');\n  const [autoFit, setAutoFit] = useState<boolean>(true);\n  const [statusFilter, setStatusFilter] = useState<Record<string, boolean>>({\n    Planned: true,\n    'In Progress': true,\n    Completed: true,\n    Overdue: true,\n  });\n  const [filterOpen, setFilterOpen] = useState<boolean>(false);\n  const [filterAnchor, setFilterAnchor] = useState<HTMLElement | null>(null);\n  const [openModal, setOpenModal] = useState<{open: boolean; milestoneId?: string}>({open:false});\n  if (!milestones || milestones.length === 0) {\n    return <div className=\"opacity-70\">Chưa có milestone nào.</div>;\n  }\n\n  return (\n    <div className=\"w-full\">\n      <div className=\"sticky top-0 z-10 -mx-4 md:-mx-6 mb-4 bg-[color-mix(in_olab,_var(--background)_80%,_transparent)]/80 backdrop-blur supports-[backdrop-filter]:bg-[color-mix(in_olab,_var(--background)_70%,_transparent)] px-4 md:px-6 py-3 border-b border-[var(--border)]\">\n        <div className=\"flex flex-wrap items-center gap-3\">\n          <MUISelect\n            value={viewMode}\n            onChange={(e: any) => setViewMode(e.target.value as any)}\n            size=\"small\"\n            sx={{ minWidth: 140 }}\n          >\n            <MenuItem value=\"Days\">Days</MenuItem>\n            <MenuItem value=\"Weeks\">Weeks</MenuItem>\n            <MenuItem value=\"Months\">Months</MenuItem>\n            <MenuItem value=\"Quarters\">Quarters</MenuItem>\n          </MUISelect>\n          <FormControlLabel\n            className=\"ml-2\"\n            control={<MUICheckbox size=\"small\" checked={autoFit} onChange={(e: any) =>setAutoFit(e.target.checked)} />}\n            label={<Typography variant=\"body2\">Auto Fit</Typography>}\n          />\n          <div className=\"md:ml-2\">\n            <Button\n              variant=\"outlined\"\n              size=\"small\"\n              onClick={(e: any)=>{ setFilterAnchor(e.currentTarget); setFilterOpen(true); }}\n            >\n              Bộ lọc\n            </Button>\n            <Popover\n              open={filterOpen}\n              anchorEl={filterAnchor}\n              onClose={()=>setFilterOpen(false)}\n              anchorOrigin={{ vertical: 'bottom', horizontal: 'right' }}\n              transformOrigin={{ vertical: 'top', horizontal: 'right' }}\n              slotProps={{ paper: { sx: { p: 2, width: 280 } } }}\n            >\n              <Typography variant=\"overline\" sx={{ opacity: 0.7 }}>Trạng thái</Typography>\n              <FormGroup sx={{ mt: 1 }}>\n                {['Planned','In Progress','Completed','Overdue'].map(s => (\n                  <FormControlLabel\n                    key={s}\n                    control={<MUICheckbox checked={!!statusFilter[s]} onChange={(e: any)=> setStatusFilter(prev => ({...prev, [s]: e.target.checked}))} />}\n                    label={s}\n                  />\n                ))}\n              </FormGroup>\n              <Box sx={{ display:'flex', justifyContent:'flex-end', gap:1, mt:2 }}>\n                <Button size=\"small\" variant=\"outlined\" onClick={()=>setStatusFilter({Planned:true,'In Progress':true,Completed:true,Overdue:true})}>Chọn hết</Button>\n                <Button size=\"small\" variant=\"outlined\" onClick={()=>setStatusFilter({Planned:false,'In Progress':false,Completed:false,Overdue:false})}>Bỏ hết</Button>\n                <Button size=\"small\" variant=\"contained\" onClick={()=>setFilterOpen(false)}>Áp dụng</Button>\n              </Box>\n            </Popover>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"rounded-xl border border-[var(--border)] bg-[color-mix(in_olab,_var(--accent)_8%,_var(--background))] shadow-sm\">\n        <div>\n          <GanttChart\n            milestones={(milestones || []).filter(m => m.status ? statusFilter[m.status] : true)}\n            viewMode={viewMode as any}\n            startDate={weekStart}\n            autoFit={autoFit}\n            pagingStepDays={viewMode === 'Quarters' ? 90 : viewMode === 'Months' ? 30 : viewMode === 'Weeks' ? 7 : 7}\n            onRequestShift={(days) => setWeekStart(prev => addDays(prev, days))}\n            onMilestoneShift={(id, deltaDays) => {\n              // Local optimistic update: shift start_date and deadline by deltaDays\n              onLocalUpdate((prev: Milestone[]) => {\n                const shiftDate = (iso?: string) => {\n                  if (!iso) return iso;\n                  const d = new Date(iso);\n                  d.setUTCDate(d.getUTCDate() + deltaDays);\n                  return d.toISOString();\n                };\n                return (prev || []).map((m) => m._id === id ? ({\n                  ...m,\n                  start_date: shiftDate(m.start_date),\n                  deadline: shiftDate(m.deadline),\n                }) : m);\n              });\n            }}\n            onMilestoneClick={(id) => setOpenModal({open:true, milestoneId: id})}\n            searchTerm={searchTerm}\n          />\n        </div>\n      </div>\n\n    </div>\n  );\n}\n\nfunction MilestoneFeaturesTable({ \n  milestones, \n  milestoneFeatures, \n  searchTerm, \n  highlightText \n}: { \n  milestones: Milestone[]; \n  milestoneFeatures: Record<string, any[]>; \n  searchTerm?: string;\n  highlightText?: (text: string, searchTerm: string) => any;\n}) {\n  const getProgressColor = (percentage: number) => {\n    if (percentage >= 80) return \"success\";\n    if (percentage >= 50) return \"warning\";\n    return \"error\";\n  };\n\n  const getStatusColor = (status?: string) => {\n    switch (status) {\n      case \"Completed\": return \"success\";\n      case \"In Progress\": return \"warning\";\n      case \"Overdue\": return \"error\";\n      default: return \"default\";\n    }\n  };\n\n  // Tính tổng số features\n  const totalFeatures = Object.values(milestoneFeatures).reduce((sum, features) => sum + features.length, 0);\n\n  if (totalFeatures === 0) {\n    return (\n      <Card sx={{ mt: 3 }}>\n        <CardContent>\n          <Typography variant=\"h6\" gutterBottom>\n            Chi tiết Features theo Milestone\n          </Typography>\n          <Typography variant=\"body2\" color=\"text.secondary\" align=\"center\" py={4}>\n            Chưa có feature nào được liên kết với milestone\n          </Typography>\n        </CardContent>\n      </Card>\n    );\n  }\n\n  return (\n    <Card sx={{ mt: 3 }}>\n      <CardContent>\n        <Typography variant=\"h6\" gutterBottom sx={{ fontWeight: 600 }}>\n          Chi tiết Features theo Milestone\n        </Typography>\n        <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mb: 3 }}>\n          Tổng cộng {totalFeatures} features được phân bổ trong {milestones.length} milestones\n        </Typography>\n\n        {milestones.map((milestone) => {\n          const features = milestoneFeatures[milestone._id] || [];\n          if (features.length === 0) return null;\n\n          return (\n            <Box key={milestone._id} sx={{ mb: 4 }}>\n              <Stack direction=\"row\" alignItems=\"center\" spacing={2} sx={{ mb: 2 }}>\n                <Typography variant=\"subtitle1\" sx={{ fontWeight: 600 }}>\n                  {milestone.title}\n                </Typography>\n                <Chip\n                  label={milestone.status || \"Planned\"}\n                  color={getStatusColor(milestone.status)}\n                  size=\"small\"\n                />\n                <Chip\n                  label={`${features.length} features`}\n                  variant=\"outlined\"\n                  size=\"small\"\n                />\n                {milestone.progress && (\n                  <Chip\n                    label={`${milestone.progress.overall}%`}\n                    color={getProgressColor(milestone.progress.overall)}\n                    size=\"small\"\n                  />\n                )}\n                {milestone.progress && milestone.progress.overall === 0 && (\n                  <Typography variant=\"caption\" color=\"text.secondary\" sx={{ ml: 1 }}>\n                    (Chưa có task/function)\n                  </Typography>\n                )}\n              </Stack>\n\n              <TableContainer component={Paper} variant=\"outlined\">\n                <Table size=\"small\">\n                  <TableHead>\n                    <TableRow>\n                      <TableCell sx={{ fontWeight: 600 }}>Feature Code</TableCell>\n                      <TableCell sx={{ fontWeight: 600 }}>Feature Title</TableCell>\n                      <TableCell sx={{ fontWeight: 600 }} align=\"center\">Tasks</TableCell>\n                      <TableCell sx={{ fontWeight: 600 }} align=\"center\">Functions</TableCell>\n                      <TableCell sx={{ fontWeight: 600 }} align=\"center\">Tiến độ</TableCell>\n                      <TableCell sx={{ fontWeight: 600 }} align=\"center\">Progress Bar</TableCell>\n                    </TableRow>\n                  </TableHead>\n                  <TableBody>\n                    {features.map((feature) => (\n                      <TableRow key={feature.feature_id} hover>\n                        <TableCell>\n                          <Typography variant=\"body2\" sx={{ fontWeight: 600, color: 'primary.main' }}>\n                            {searchTerm && highlightText ? highlightText(feature.feature_code, searchTerm) : feature.feature_code}\n                          </Typography>\n                        </TableCell>\n                        <TableCell>\n                          <Typography variant=\"body2\">\n                            {searchTerm && highlightText ? highlightText(feature.feature_title, searchTerm) : feature.feature_title}\n                          </Typography>\n                        </TableCell>\n                        <TableCell align=\"center\">\n                          <Stack direction=\"row\" alignItems=\"center\" spacing={1} justifyContent=\"center\">\n                            <AssignmentIcon fontSize=\"small\" color=\"info\" />\n                            <Typography variant=\"body2\">\n                              {feature.task_count > 0 ? `${feature.completed_tasks}/${feature.task_count}` : 'Chưa có task'}\n                            </Typography>\n                          </Stack>\n                        </TableCell>\n                        <TableCell align=\"center\">\n                          <Stack direction=\"row\" alignItems=\"center\" spacing={1} justifyContent=\"center\">\n                            <FunctionsIcon fontSize=\"small\" color=\"secondary\" />\n                            <Typography variant=\"body2\">\n                              {feature.function_count > 0 ? `${feature.completed_functions}/${feature.function_count}` : 'Chưa có function'}\n                            </Typography>\n                          </Stack>\n                        </TableCell>\n                        <TableCell align=\"center\">\n                          <Chip\n                            label={`${feature.percentage}%`}\n                            color={getProgressColor(feature.percentage)}\n                            size=\"small\"\n                            sx={{ fontWeight: 600 }}\n                          />\n                        </TableCell>\n                        <TableCell>\n                          <LinearProgress\n                            variant=\"determinate\"\n                            value={feature.percentage}\n                            color={getProgressColor(feature.percentage)}\n                            sx={{ height: 6, borderRadius: 3 }}\n                          />\n                        </TableCell>\n                      </TableRow>\n                    ))}\n                  </TableBody>\n                </Table>\n              </TableContainer>\n            </Box>\n          );\n        })}\n      </CardContent>\n    </Card>\n  );\n}\n\n"],"names":[],"mappings":"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","debugId":null}}]
}