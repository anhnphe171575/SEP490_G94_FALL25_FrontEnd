{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 82, "column": 0}, "map": {"version":3,"sources":["file:///D:/SEP490/SEP490_G94_FALL25_FrontEnd/ultis/axios.js"],"sourcesContent":["// lib/axios.js\nimport axios from 'axios';\nimport { useState } from 'react';\n\n// Debug log để kiểm tra env\n\n\nconst axiosInstance = axios.create({\n  baseURL: process.env.NEXT_PUBLIC_API_URL,\n  timeout: 30000,\n  headers: {\n    'Content-Type': 'application/json',\n    'Accept': 'application/json'\n  },\n});\n\n// Request interceptor\naxiosInstance.interceptors.request.use(\n  (config) => {\n    const token = typeof window !== 'undefined' ? sessionStorage.getItem('token') : null;\n    if (token) {\n      config.headers.Authorization = `Bearer ${token}`;\n    }\n    \n    // Don't set Content-Type for FormData, let axios handle it automatically\n    if (config.data instanceof FormData) {\n      delete config.headers['Content-Type'];\n    }\n    \n    if (process.env.NODE_ENV === 'development') {\n    \n    }\n    \n    return config;\n  },\n  (error) => {\n    return Promise.reject(error);\n  }\n);\n\n// Response interceptor\naxiosInstance.interceptors.response.use(\n  (response) => {\n    if (process.env.NODE_ENV === 'development') {\n      \n    }\n    return response;\n  },\n  (error) => {\n    if (process.env.NODE_ENV === 'development') {\n    }\n    \n    // Xử lý lỗi chung\n    if (error.response?.status === 401) {\n      if (typeof window !== 'undefined') {\n        localStorage.removeItem('token');\n        window.location.href = '/login';\n      }\n    }\n    if (error.response?.status === 403) {\n      if (typeof window !== 'undefined') {\n        window.location.href = '/not-found';\n      }\n    }\n    \n    if (error.response?.status === 500) {\n      console.error('Server Error:', error.response.data);\n    }\n    \n    return Promise.reject(error);\n  }\n);\n\nexport default axiosInstance;\n\n// Export các method thường dùng\nexport const api = {\n  get: (url, config) => axiosInstance.get(url, config),\n  post: (url, data, config) => axiosInstance.post(url, data, config),\n  put: (url, data, config) => axiosInstance.put(url, data, config),\n  patch: (url, data, config) => axiosInstance.patch(url, data, config),\n  delete: (url, config) => axiosInstance.delete(url, config),\n  \n  // Review API methods\n  reviews: {\n    // Create a new review\n    create: (reviewData) => axiosInstance.post('/reviews', reviewData),\n    \n    // Get all reviews\n    getAll: () => axiosInstance.get('/reviews'),\n    \n    // Get reviews for a specific product\n    getByProduct: (productId) => axiosInstance.get(`/reviews/product/${productId}`),\n    \n    // Get unreviewed products for a user\n    getUnreviewed: (productId) => axiosInstance.get(`/reviews/unreviewed/${productId}`),\n    \n    // Update a review\n    update: (reviewId, reviewData) => axiosInstance.put(`/reviews/${reviewId}`, reviewData),\n    \n    // Delete a review\n    delete: (reviewId) => axiosInstance.delete(`/reviews/${reviewId}`),\n  },\n};\n\n// Utility functions cho các trường hợp đặc biệt\nexport const apiUtils = {\n  // Upload file\n  uploadFile: (url, file, onUploadProgress) => {\n    const formData = new FormData();\n    formData.append('file', file);\n    \n    return axiosInstance.post(url, formData, {\n      headers: {\n        'Content-Type': 'multipart/form-data',\n      },\n      onUploadProgress,\n    });\n  },\n  \n  // Download file\n  downloadFile: async (url, filename) => {\n    try {\n      const response = await axiosInstance.get(url, {\n        responseType: 'blob',\n      });\n      \n      const blob = new Blob([response.data]);\n      const downloadUrl = window.URL.createObjectURL(blob);\n      const link = document.createElement('a');\n      link.href = downloadUrl;\n      link.download = filename;\n      link.click();\n      window.URL.revokeObjectURL(downloadUrl);\n    } catch (error) {\n      console.error('Download failed:', error);\n      throw error;\n    }\n  },\n\n  // Create review\n  createReview: async (reviewData) => {\n    try {\n      const response = await axiosInstance.post('/reviews', reviewData);\n      return response.data;\n    } catch (error) {\n      console.error('Create review failed:', error);\n      throw error;\n    }\n  },\n};\n\n// Custom hooks cho React components\nexport const useApi = () => {\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  \n  const request = async (apiCall) => {\n    try {\n      setLoading(true);\n      setError(null);\n      const response = await apiCall();\n      return response.data;\n    } catch (err) {\n      setError(err);\n      throw err;\n    } finally {\n      setLoading(false);\n    }\n  };\n  \n  return { request, loading, error };\n};"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 232, "column": 0}, "map": {"version":3,"sources":["file:///D:/SEP490/SEP490_G94_FALL25_FrontEnd/src/lib/timeline.ts"],"sourcesContent":["export function getSpanDays(viewMode: 'Days'|'Weeks'|'Months'|'Quarters', start: Date): number {\r\n  switch (viewMode) {\r\n    case 'Days': return 7;\r\n    case 'Weeks': return 7;\r\n    case 'Months': return daysInMonthUTC(start);\r\n    case 'Quarters': return isLeapYearUTC(start.getUTCFullYear()) ? 366 : 365; // show whole year segmented by quarters\r\n    default: return 7;\r\n  }\r\n}\r\n\r\nexport function getPeriodStart(viewMode: 'Days'|'Weeks'|'Months'|'Quarters', date: Date): Date {\r\n  const d = new Date(date);\r\n  const strip = (x: Date) => { const t = new Date(x); t.setUTCHours(0,0,0,0); return t; };\r\n  switch (viewMode) {\r\n    case 'Days':\r\n    case 'Weeks': return getStartOfWeekUTC(strip(d));\r\n    case 'Months': return new Date(Date.UTC(d.getUTCFullYear(), d.getUTCMonth(), 1));\r\n    case 'Quarters': return new Date(Date.UTC(d.getUTCFullYear(), 0, 1));\r\n    default: return getStartOfWeekUTC(strip(d));\r\n  }\r\n}\r\n\r\nexport function getStartOfWeekUTC(date: Date): Date {\r\n  const d = new Date(date);\r\n  d.setUTCHours(0,0,0,0);\r\n  const day = d.getUTCDay();\r\n  const diff = (day + 6) % 7;\r\n  d.setUTCDate(d.getUTCDate() - diff);\r\n  return d;\r\n}\r\n\r\nexport function stripTimeUTC(date: Date) {\r\n  const d = new Date(date);\r\n  d.setUTCHours(0,0,0,0);\r\n  return d;\r\n}\r\n\r\nexport function addDays(date: Date, days: number) {\r\n  const d = new Date(date);\r\n  d.setUTCDate(d.getUTCDate() + days);\r\n  return d;\r\n}\r\n\r\nfunction daysInMonthUTC(date: Date): number {\r\n  const y = date.getUTCFullYear();\r\n  const m = date.getUTCMonth();\r\n  return new Date(Date.UTC(y, m + 1, 0)).getUTCDate();\r\n}\r\n\r\nfunction daysInQuarterUTC(date: Date): number { // kept for potential future use\r\n  const qStartMonth = Math.floor(date.getUTCMonth() / 3) * 3;\r\n  const start = new Date(Date.UTC(date.getUTCFullYear(), qStartMonth, 1));\r\n  const end = new Date(Date.UTC(date.getUTCFullYear(), qStartMonth + 3, 0));\r\n  return (stripTimeUTC(end).getTime() - stripTimeUTC(start).getTime()) / (24*60*60*1000) + 1;\r\n}\r\n\r\nfunction isLeapYearUTC(year: number): boolean {\r\n  return (year % 4 === 0 && year % 100 !== 0) || (year % 400 === 0);\r\n}\r\n\r\n\r\n"],"names":[],"mappings":";;;;;;;;;;;;AAAO,SAAS,YAAY,QAA4C,EAAE,KAAW;IACnF,OAAQ;QACN,KAAK;YAAQ,OAAO;QACpB,KAAK;YAAS,OAAO;QACrB,KAAK;YAAU,OAAO,eAAe;QACrC,KAAK;YAAY,OAAO,cAAc,MAAM,cAAc,MAAM,MAAM,KAAK,wCAAwC;QACnH;YAAS,OAAO;IAClB;AACF;AAEO,SAAS,eAAe,QAA4C,EAAE,IAAU;IACrF,MAAM,IAAI,IAAI,KAAK;IACnB,MAAM,QAAQ,CAAC;QAAc,MAAM,IAAI,IAAI,KAAK;QAAI,EAAE,WAAW,CAAC,GAAE,GAAE,GAAE;QAAI,OAAO;IAAG;IACtF,OAAQ;QACN,KAAK;QACL,KAAK;YAAS,OAAO,kBAAkB,MAAM;QAC7C,KAAK;YAAU,OAAO,IAAI,KAAK,KAAK,GAAG,CAAC,EAAE,cAAc,IAAI,EAAE,WAAW,IAAI;QAC7E,KAAK;YAAY,OAAO,IAAI,KAAK,KAAK,GAAG,CAAC,EAAE,cAAc,IAAI,GAAG;QACjE;YAAS,OAAO,kBAAkB,MAAM;IAC1C;AACF;AAEO,SAAS,kBAAkB,IAAU;IAC1C,MAAM,IAAI,IAAI,KAAK;IACnB,EAAE,WAAW,CAAC,GAAE,GAAE,GAAE;IACpB,MAAM,MAAM,EAAE,SAAS;IACvB,MAAM,OAAO,CAAC,MAAM,CAAC,IAAI;IACzB,EAAE,UAAU,CAAC,EAAE,UAAU,KAAK;IAC9B,OAAO;AACT;AAEO,SAAS,aAAa,IAAU;IACrC,MAAM,IAAI,IAAI,KAAK;IACnB,EAAE,WAAW,CAAC,GAAE,GAAE,GAAE;IACpB,OAAO;AACT;AAEO,SAAS,QAAQ,IAAU,EAAE,IAAY;IAC9C,MAAM,IAAI,IAAI,KAAK;IACnB,EAAE,UAAU,CAAC,EAAE,UAAU,KAAK;IAC9B,OAAO;AACT;AAEA,SAAS,eAAe,IAAU;IAChC,MAAM,IAAI,KAAK,cAAc;IAC7B,MAAM,IAAI,KAAK,WAAW;IAC1B,OAAO,IAAI,KAAK,KAAK,GAAG,CAAC,GAAG,IAAI,GAAG,IAAI,UAAU;AACnD;AAEA,SAAS,iBAAiB,IAAU;IAClC,MAAM,cAAc,KAAK,KAAK,CAAC,KAAK,WAAW,KAAK,KAAK;IACzD,MAAM,QAAQ,IAAI,KAAK,KAAK,GAAG,CAAC,KAAK,cAAc,IAAI,aAAa;IACpE,MAAM,MAAM,IAAI,KAAK,KAAK,GAAG,CAAC,KAAK,cAAc,IAAI,cAAc,GAAG;IACtE,OAAO,CAAC,aAAa,KAAK,OAAO,KAAK,aAAa,OAAO,OAAO,EAAE,IAAI,CAAC,KAAG,KAAG,KAAG,IAAI,IAAI;AAC3F;AAEA,SAAS,cAAc,IAAY;IACjC,OAAO,AAAC,OAAO,MAAM,KAAK,OAAO,QAAQ,KAAO,OAAO,QAAQ;AACjE","debugId":null}},
    {"offset": {"line": 313, "column": 0}, "map": {"version":3,"sources":["file:///D:/SEP490/SEP490_G94_FALL25_FrontEnd/src/components/ResponsiveSidebar.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport Link from \"next/link\";\r\nimport { usePathname, useRouter } from \"next/navigation\";\r\nimport { useEffect, useState } from \"react\";\r\nimport axiosInstance from \"../../ultis/axios\";\r\n\r\nconst navItems = [\r\n  { href: \"/dashboard\", label: \"Dashboard\", icon: (\r\n    <svg className=\"w-5 h-5\" aria-hidden=\"true\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"currentColor\" viewBox=\"0 0 22 21\">\r\n      <path d=\"M16.975 11H10V4.025a1 1 0 0 0-1.066-.998 8.5 8.5 0 1 0 9.039 9.039.999.999 0 0 0-1-1.066h.002Z\"/>\r\n      <path d=\"M12.5 0c-.157 0-.311.01-.565.027A1 1 0 0 0 11 1.02V10h8.975a1 1 0 0 0 1-.935c.013-.188.028-.374.028-.565A8.51 8.51 0 0 0 12.5 0Z\"/>\r\n    </svg>\r\n  )},\r\n  { href: \"/\", label: \"Dự án\", icon: (\r\n    <svg className=\"w-5 h-5\" aria-hidden=\"true\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"currentColor\" viewBox=\"0 0 18 18\">\r\n      <path d=\"M6.143 0H1.857A1.857 1.857 0 0 0 0 1.857v4.286C0 7.169.831 8 1.857 8h4.286A1.857 1.857 0 0 0 8 6.143V1.857A1.857 1.857 0 0 0 6.143 0Zm10 0h-4.286A1.857 1.857 0 0 0 10 1.857v4.286C10 7.169 10.831 8 11.857 8h4.286A1.857 1.857 0 0 0 18 6.143V1.857A1.857 1.857 0 0 0 16.143 0Zm-10 10H1.857A1.857 1.857 0 0 0 0 11.857v4.286C0 17.169.831 18 1.857 18h4.286A1.857 1.857 0 0 0 8 16.143v-4.286A1.857 1.857 0 0 0 6.143 10Zm10 0h-4.286A1.857 1.857 0 0 0 10 11.857v4.286c0 1.026.831 1.857 1.857 1.857h4.286A1.857 1.857 0 0 0 18 16.143v-4.286A1.857 1.857 0 0 0 16.143 10Z\"/>\r\n    </svg>\r\n  )},\r\n  { href: \"/myprofile\", label: \"Users\", icon: (\r\n    <svg className=\"w-5 h-5\" aria-hidden=\"true\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"currentColor\" viewBox=\"0 0 20 18\">\r\n      <path d=\"M14 2a3.963 3.963 0 0 0-1.4.267 6.439 6.439 0 0 1-1.331 6.638A4 4 0 1 0 14 2Zm1 9h-1.264A6.957 6.957 0 0 1 15 15v2a2.97 2.97 0 0 1-.184 1H19a1 1 0 0 0 1-1v-1a5.006 5.006 0 0 0-5-5ZM6.5 9a4.5 4.5 0 1 0 0-9 4.5 4.5 0 0 0 0 9ZM8 10H5a5.006 5.006 0 0 0-5 5v2a1 1 0 0 0 1 1h11a1 1 0 0 0 1-1v-2a5.006 5.006 0 0 0-5-5Z\"/>\r\n    </svg>\r\n  )},\r\n];\r\n\r\nexport default function ResponsiveSidebar() {\r\n  const pathname = usePathname();\r\n  const router = useRouter();\r\n  const [open, setOpen] = useState(false);\r\n  const [me, setMe] = useState<{ full_name?: string; email?: string; avatar?: string } | null>(null);\r\n\r\n  useEffect(() => {\r\n    setOpen(false);\r\n  }, [pathname]);\r\n\r\n  useEffect(() => {\r\n    (async () => {\r\n      try {\r\n        const token = typeof window !== 'undefined' ? (sessionStorage.getItem('token') || localStorage.getItem('token')) : null;\r\n        if (!token) return;\r\n        const res = await axiosInstance.get('/api/users/me');\r\n        setMe(res.data || null);\r\n      } catch {\r\n        // silently ignore\r\n      }\r\n    })();\r\n  }, []);\r\n\r\n  const onLogout = () => {\r\n    if (typeof window !== 'undefined') {\r\n      sessionStorage.removeItem('token');\r\n      localStorage.removeItem('token');\r\n    }\r\n    router.replace('/login');\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <button\r\n        type=\"button\"\r\n        aria-controls=\"default-sidebar\"\r\n        aria-expanded={open}\r\n        onClick={() => setOpen((v) => !v)}\r\n        className=\"inline-flex items-center p-2 mt-2 ms-3 text-sm text-gray-500 rounded-lg md:hidden hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200\"\r\n      >\r\n        <span className=\"sr-only\">Open sidebar</span>\r\n        <svg className=\"w-6 h-6\" aria-hidden=\"true\" fill=\"currentColor\" viewBox=\"0 0 20 20\" xmlns=\"http://www.w3.org/2000/svg\">\r\n          <path clipRule=\"evenodd\" fillRule=\"evenodd\" d=\"M2 4.75A.75.75 0 012.75 4h14.5a.75.75 0 010 1.5H2.75A.75.75 0 012 4.75zm0 10.5a.75.75 0 01.75-.75h7.5a.75.75 0 010 1.5h-7.5a.75.75 0 01-.75-.75zM2 10a.75.75 0 01.75-.75h14.5a.75.75 0 010 1.5H2.75A.75.75 0 012 10z\"></path>\r\n        </svg>\r\n      </button>\r\n\r\n      <aside\r\n        id=\"default-sidebar\"\r\n        className={`fixed top-0 left-0 z-40 w-64 h-screen transition-transform ${open ? 'translate-x-0' : '-translate-x-full'} md:translate-x-0`}\r\n        aria-label=\"Sidebar\"\r\n      >\r\n        <div className=\"h-full px-3 py-4 overflow-y-auto glass\">\r\n          {me ? (\r\n            <div className=\"mb-4 flex items-center gap-3 p-3 card\">\r\n              <div className=\"h-10 w-10 rounded-full flex items-center justify-center overflow-hidden bg-gray-100\">\r\n                {me.avatar ? (\r\n                  // eslint-disable-next-line @next/next/no-img-element\r\n                  <img src={me.avatar} alt=\"avatar\" className=\"h-full w-full object-cover\" />\r\n                ) : (\r\n                  <span className=\"text-sm font-semibold text-gray-600\">{(me.full_name?.[0] || me.email?.[0] || 'U').toUpperCase()}</span>\r\n                )}\r\n              </div>\r\n              <div className=\"truncate\">\r\n                <div className=\"text-sm font-medium truncate\">{me.full_name || 'User'}</div>\r\n                <div className=\"text-xs text-gray-500 truncate\">{me.email || ''}</div>\r\n              </div>\r\n            </div>\r\n          ) : null}\r\n\r\n          <ul className=\"space-y-2 font-medium\">\r\n            {navItems.map((item) => {\r\n              const active = pathname === item.href;\r\n              return (\r\n                <li key={`${item.href}-${item.label}`}>\r\n                  <Link\r\n                    href={item.href}\r\n                    className={`flex items-center p-2 rounded-lg group border transition-colors ${active ? 'bg-[var(--muted)] border-[var(--border)] text-gray-900' : 'hover:bg-[var(--muted)] border-transparent text-gray-900'}`}\r\n                  >\r\n                    <span className=\"text-gray-500 group-hover:text-gray-900\">{item.icon}</span>\r\n                    <span className=\"ms-3\">{item.label}</span>\r\n                  </Link>\r\n                </li>\r\n              );\r\n            })}\r\n            <li>\r\n              <button\r\n                onClick={onLogout}\r\n                className=\"w-full text-left flex items-center p-2 rounded-lg border hover:bg-[var(--muted)] text-gray-900 transition-colors\"\r\n                style={{borderColor: 'var(--border)'}}\r\n              >\r\n                <svg className=\"w-5 h-5 text-gray-500\" aria-hidden=\"true\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 18 16\">\r\n                  <path stroke=\"currentColor\" strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M1 8h11m0 0L8 4m4 4-4 4m4-11h3a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-3\"/>\r\n                </svg>\r\n                <span className=\"ms-3\">Đăng xuất</span>\r\n              </button>\r\n            </li>\r\n          </ul>\r\n        </div>\r\n      </aside>\r\n    </>\r\n  );\r\n}\r\n\r\n\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 652, "column": 0}, "map": {"version":3,"sources":["file:///D:/SEP490/SEP490_G94_FALL25_FrontEnd/src/components/GanttChart.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { useEffect, useMemo, useRef } from \"react\";\r\nimport { getPeriodStart } from \"@/lib/timeline\";\r\nimport type { CSSProperties } from \"react\";\r\n\r\n// dhtmlx-gantt is pure JS; import lazily inside effects to avoid SSR issues\r\n\r\nexport type GanttMilestone = {\r\n  _id: string;\r\n  title: string;\r\n  start_date?: string;\r\n  deadline?: string;\r\n  status?: string;\r\n  description?: string;\r\n  createdAt?: string;\r\n};\r\n\r\ntype ViewMode = \"Days\" | \"Weeks\" | \"Months\" | \"Quarters\";\r\n\r\nexport default function GanttChart({\r\n  milestones,\r\n  viewMode,\r\n  startDate,\r\n  autoFit,\r\n  pagingStepDays,\r\n  onRequestShift,\r\n  onMilestoneShift,\r\n  onMilestoneClick,\r\n}: {\r\n  milestones: GanttMilestone[];\r\n  viewMode: ViewMode;\r\n  startDate: Date;\r\n  autoFit?: boolean;\r\n  pagingStepDays?: number;\r\n  onRequestShift?: (days: number) => void;\r\n  onMilestoneShift?: (id: string, deltaDays: number) => void;\r\n  onMilestoneClick?: (id: string) => void;\r\n}) {\r\n  const ganttContainerRef = useRef<HTMLDivElement | null>(null);\r\n  const periodStart = useMemo(() => getPeriodStart(viewMode, startDate), [viewMode, startDate]);\r\n\r\n  useEffect(() => {\r\n    let isMounted = true;\r\n    const init = async () => {\r\n      const gantt = (await import(\"dhtmlx-gantt\")).gantt;\r\n\r\n      if (!isMounted || !ganttContainerRef.current) return;\r\n\r\n      gantt.clearAll();\r\n\r\n      // Configure scale per view mode\r\n      if (viewMode === \"Days\") {\r\n        gantt.config.scales = [\r\n          { unit: \"week\", step: 1, format: (date: Date) => formatWeekLabelRange(date) },\r\n          { unit: \"day\", step: 1, format: \"%D %d\" },\r\n        ];\r\n        gantt.config.scale_height = 50;\r\n      } else if (viewMode === \"Weeks\") {\r\n        gantt.config.scales = [\r\n          { unit: \"month\", step: 1, format: \"%M %Y\" },\r\n          { unit: \"week\", step: 1, format: (date: Date) => `W${getISOWeek(date)}` },\r\n        ];\r\n        gantt.config.scale_height = 50;\r\n      } else if (viewMode === \"Months\") {\r\n        gantt.config.scales = [\r\n          { unit: \"year\", step: 1, format: \"%Y\" },\r\n          { unit: \"month\", step: 1, format: \"%M\" },\r\n        ];\r\n        gantt.config.scale_height = 45;\r\n      } else {\r\n        // Quarters\r\n        gantt.config.scales = [\r\n          { unit: \"year\", step: 1, format: \"%Y\" },\r\n          { unit: \"quarter\", step: 1, format: (date: Date) => `Q${Math.floor(date.getUTCMonth() / 3) + 1}` },\r\n        ];\r\n        gantt.config.scale_height = 40;\r\n      }\r\n\r\n      gantt.config.readonly = false;\r\n      gantt.config.drag_move = true;\r\n      gantt.config.drag_resize = true;\r\n      gantt.config.drag_progress = false;\r\n      gantt.config.fit_tasks = !!autoFit;\r\n      gantt.config.row_height = 32;\r\n      gantt.config.bar_height = 20;\r\n      // Hide the grid (Title/Start/End columns)\r\n      gantt.config.columns = [];\r\n      gantt.config.grid_width = 0;\r\n\r\n      // Color by status via templates\r\n      gantt.templates.task_class = (start: Date, end: Date, task: any) => {\r\n        const status = task.status as string | undefined;\r\n        if (status === \"Planned\") return \"gantt-task-planned\";\r\n        if (status === \"In Progress\") return \"gantt-task-inprogress\";\r\n        if (status === \"Completed\") return \"gantt-task-completed\";\r\n        if (status === \"Overdue\") return \"gantt-task-overdue\";\r\n        return \"gantt-task-default\";\r\n      };\r\n\r\n      // Change listener to fire delta days\r\n      gantt.attachEvent(\"onAfterTaskDrag\", (id: string, mode: string, e: any) => {\r\n        if (mode !== \"move\") return true;\r\n        const task = gantt.getTask(id);\r\n        const original = task._original_start as Date | undefined;\r\n        if (!original || !task.start_date) return true;\r\n        const msPerDay = 24 * 60 * 60 * 1000;\r\n        const deltaDays = Math.round((stripUTC(asDate(task.start_date)).getTime() - stripUTC(original).getTime()) / msPerDay);\r\n        if (deltaDays !== 0) onMilestoneShift?.(id, deltaDays);\r\n        return true;\r\n      });\r\n\r\n      // Keep original start for delta calc\r\n      gantt.attachEvent(\"onBeforeTaskDrag\", (id: string, mode: string, e: any) => {\r\n        const task = gantt.getTask(id);\r\n        if (task.start_date) task._original_start = asDate(task.start_date);\r\n        return true;\r\n      });\r\n\r\n      // Click to open details\r\n      gantt.attachEvent(\"onTaskClick\", function(id: string){\r\n        onMilestoneClick?.(id as any);\r\n        return true;\r\n      });\r\n\r\n      // Init and set data\r\n      gantt.init(ganttContainerRef.current);\r\n      const data = mapMilestonesToGantt(milestones, periodStart);\r\n      gantt.parse({ data });\r\n\r\n      // Scroll to periodStart\r\n      gantt.showDate(periodStart);\r\n    };\r\n    init();\r\n    return () => {\r\n      isMounted = false;\r\n      // dhtmlx-gantt has no explicit destroy; clearing is enough on unmount\r\n      // container will be removed by React\r\n    };\r\n  }, [milestones, periodStart, viewMode, autoFit, onMilestoneShift]);\r\n\r\n  const containerStyle: CSSProperties = {\r\n    height: 380,\r\n    width: \"100%\",\r\n    border: \"1px solid var(--border)\",\r\n    background: \"color-mix(in oklab, var(--accent) 6%, var(--background))\",\r\n    borderRadius: 14,\r\n    boxShadow: \"var(--shadow-soft)\",\r\n  };\r\n\r\n  return (\r\n    <div className={`w-full ${viewMode === \"Days\" ? \"gantt-split-half\" : \"\"}`}>\r\n      <div ref={ganttContainerRef} style={containerStyle} />\r\n      <style>{`\r\n        /* Container */\r\n        .gantt_container { font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial; color: var(--foreground); }\r\n\r\n        /* Scales */\r\n        .gantt_scale_line { background: color-mix(in oklab, var(--accent) 18%, var(--background)); border-color: var(--border); }\r\n        .gantt_scale_cell { color: color-mix(in oklab, var(--foreground) 82%, transparent); font-weight: 600; letter-spacing: .2px; }\r\n        .gantt_task .gantt_task_scale { background: color-mix(in oklab, var(--accent) 18%, var(--background)); }\r\n\r\n        /* Rows */\r\n        .gantt_row, .gantt_task_row { background: var(--background); }\r\n        .gantt_row.odd, .gantt_task_row.odd { background: color-mix(in oklab, var(--accent) 10%, var(--background)); }\r\n        .gantt_row, .gantt_task_row { border-bottom: 1px solid var(--border); }\r\n\r\n        /* Half-day horizontal split for Days view */\r\n        .gantt-split-half .gantt_task_row, .gantt-split-half .gantt_row {\r\n          background-image: repeating-linear-gradient(\r\n            to bottom,\r\n            transparent 0 16px,\r\n            var(--border) 16px 17px,\r\n            transparent 17px 32px\r\n          );\r\n          background-blend-mode: normal;\r\n        }\r\n\r\n        /* Tasks */\r\n        .gantt_task_line { border-radius: 8px; border: 1px solid transparent; box-shadow: 0 2px 8px rgba(0,0,0,.06); background: color-mix(in oklab, var(--foreground) 24%, transparent); }\r\n        .gantt_task_content { padding: 2px 10px; font-weight: 600; text-shadow: none; }\r\n\r\n        /* Status colors */\r\n        .gantt-task-planned .gantt_task_content { background: #3b82f6 !important; color: #ffffff; } /* blue-500 */\r\n        .gantt-task-inprogress .gantt_task_content { background: var(--primary-600) !important; color: #ffffff; }\r\n        .gantt-task-completed .gantt_task_content { background: #22c55e !important; color: #ffffff; } /* green-500 */\r\n        .gantt-task-overdue .gantt_task_content { background: #ef4444 !important; color: #ffffff; } /* red-500 */\r\n        .gantt-task-default .gantt_task_content { background: #6b7280 !important; color: #ffffff; } /* slate-500 */\r\n\r\n        /* Selection/focus */\r\n        .gantt_selected .gantt_task_line { outline: 2px solid var(--ring); outline-offset: 0; box-shadow: none; }\r\n\r\n        /* Grid hidden state smoothing */\r\n        .gantt_layout_cell.gantt_grid { border-right: none; }\r\n\r\n        /* Today marker */\r\n        .today .gantt_marker { background: var(--primary-600); opacity: .9; width: 2px; }\r\n        .today .gantt_marker_content { background: var(--primary-600); color: #fff; border-radius: 8px; padding: 2px 8px; font-size: 12px; box-shadow: 0 4px 12px color-mix(in oklab, var(--primary) 40%, transparent); }\r\n\r\n        /* Links (if ever enabled) */\r\n        .gantt_link_line { stroke: color-mix(in oklab, var(--primary) 80%, #000 20%); }\r\n        .gantt_link_arrow { fill: color-mix(in oklab, var(--primary) 80%, #000 20%); }\r\n\r\n        /* Scrollbars */\r\n        .gantt_container ::-webkit-scrollbar { height: 8px; width: 8px; }\r\n        .gantt_container ::-webkit-scrollbar-thumb { background: color-mix(in oklab, var(--foreground) 30%, transparent); border-radius: 10px; }\r\n        .gantt_container ::-webkit-scrollbar-track { background: transparent; }\r\n      `}</style>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction mapMilestonesToGantt(items: GanttMilestone[], fallbackStart: Date) {\r\n  const msPerDay = 24 * 60 * 60 * 1000;\r\n  return items.map((m) => {\r\n    const startCandidate = m.start_date || m.createdAt || m.deadline;\r\n    const endCandidate = m.deadline || m.start_date || startCandidate;\r\n    const start = startCandidate ? new Date(startCandidate) : fallbackStart;\r\n    const end = endCandidate ? new Date(endCandidate) : new Date(start.getTime() + msPerDay);\r\n    const durationDays = Math.max(1, Math.ceil((stripUTC(end).getTime() - stripUTC(start).getTime()) / msPerDay));\r\n    return {\r\n      id: m._id,\r\n      text: m.title,\r\n      start_date: toGanttDate(start),\r\n      duration: durationDays,\r\n      status: m.status,\r\n    };\r\n  });\r\n}\r\n\r\nfunction toGanttDate(d: Date) {\r\n  // dhtmlx-gantt default format is \"%d-%m-%Y\" if not configured; use Date directly as it accepts Date objects too\r\n  return new Date(d);\r\n}\r\n\r\nfunction stripUTC(date: Date) {\r\n  const d = new Date(date);\r\n  d.setUTCHours(0, 0, 0, 0);\r\n  return d;\r\n}\r\n\r\nfunction asDate(value: string | number | Date): Date {\r\n  return value instanceof Date ? value : new Date(value);\r\n}\r\n\r\nfunction getISOWeek(d: Date) {\r\n  const date = new Date(Date.UTC(d.getUTCFullYear(), d.getUTCMonth(), d.getUTCDate()));\r\n  const dayNum = date.getUTCDay() || 7;\r\n  date.setUTCDate(date.getUTCDate() + 4 - dayNum);\r\n  const yearStart = new Date(Date.UTC(date.getUTCFullYear(), 0, 1));\r\n  const weekNo = Math.ceil(((date.getTime() - yearStart.getTime()) / 86400000 + 1) / 7);\r\n  return weekNo;\r\n}\r\n\r\nfunction startOfISOWeekUTC(d: Date) {\r\n  const date = new Date(Date.UTC(d.getUTCFullYear(), d.getUTCMonth(), d.getUTCDate()));\r\n  const day = date.getUTCDay() || 7; // 1..7 Mon..Sun\r\n  if (day !== 1) date.setUTCDate(date.getUTCDate() - (day - 1));\r\n  return date;\r\n}\r\n\r\nfunction addDaysUTC(d: Date, num: number) {\r\n  const nd = new Date(d);\r\n  nd.setUTCDate(nd.getUTCDate() + num);\r\n  return nd;\r\n}\r\n\r\nfunction formatShortMonthEn(d: Date) {\r\n  return d.toLocaleString(\"en-US\", { month: \"short\", timeZone: \"UTC\" });\r\n}\r\n\r\nfunction formatWeekLabelRange(date: Date) {\r\n  const week = getISOWeek(date);\r\n  const start = startOfISOWeekUTC(date);\r\n  const end = addDaysUTC(start, 6);\r\n  const s = `${formatShortMonthEn(start)} ${start.getUTCDate()}`;\r\n  const e = `${formatShortMonthEn(end)} ${end.getUTCDate()}`;\r\n  return `Week ${week} ${s} - ${e}`;\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 950, "column": 0}, "map": {"version":3,"sources":["file:///D:/SEP490/SEP490_G94_FALL25_FrontEnd/src/components/ModalMilestone.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useState } from \"react\";\r\nimport axiosInstance from \"@/../ultis/axios\";\r\nimport {\r\n  Dialog,\r\n  DialogTitle,\r\n  DialogContent,\r\n  DialogActions,\r\n  TextField,\r\n  Button,\r\n  Select,\r\n  MenuItem,\r\n  FormControl,\r\n  InputLabel,\r\n  Tabs,\r\n  Tab,\r\n  Box,\r\n  Chip,\r\n  Typography,\r\n  Divider,\r\n  CircularProgress,\r\n} from \"@mui/material\";\r\nimport { DateRangePicker } from \"@mui/x-date-pickers-pro/DateRangePicker\";\r\nimport { SingleInputDateRangeField } from \"@mui/x-date-pickers-pro/SingleInputDateRangeField\";\r\nimport { DateRange } from \"@mui/x-date-pickers-pro/models\";\r\n\r\ntype Update = { _id: string; content: string; createdAt: string; user_id?: { full_name?: string; email?: string; avatar?: string } };\r\ntype ActivityLog = { _id: string; action: string; createdAt: string; metadata?: any; created_by?: { full_name?: string; email?: string; avatar?: string } };\r\ntype FileDoc = { _id: string; title: string; file_url: string; createdAt: string };\r\n\r\nfunction Section({ label, children }: { label: string; children: React.ReactNode }) {\r\n  return (\r\n    <div>\r\n      <div className=\"text-xs uppercase tracking-wide opacity-60 mb-1\">{label}</div>\r\n      {children}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default function ModalMilestone({ open, onClose, projectId, milestoneId }: { open: boolean; onClose: () => void; projectId: string; milestoneId: string; }) {\r\n  const [tab, setTab] = useState<\"updates\"|\"files\"|\"activity\">(\"updates\");\r\n  const [updates, setUpdates] = useState<Update[]>([]);\r\n  const [files, setFiles] = useState<FileDoc[]>([]);\r\n  const [activity, setActivity] = useState<ActivityLog[]>([]);\r\n  const [content, setContent] = useState(\"\");\r\n  const [loading, setLoading] = useState(false);\r\n  const [posting, setPosting] = useState(false);\r\n  const [editingId, setEditingId] = useState<string | null>(null);\r\n  const [editingContent, setEditingContent] = useState(\"\");\r\n  const [title, setTitle] = useState(\"\");\r\n  const [description, setDescription] = useState(\"\");\r\n  const [status, setStatus] = useState(\"Planned\");\r\n  const [startDate, setStartDate] = useState(\"\");\r\n  const [deadline, setDeadline] = useState(\"\");\r\n  const [saving, setSaving] = useState(false);\r\n  const [uploading, setUploading] = useState(false);\r\n  const [showUploader, setShowUploader] = useState(false);\r\n  const [fileTitle, setFileTitle] = useState(\"\");\r\n  const [fileType, setFileType] = useState(\"Document\");\r\n  const [fileVersion, setFileVersion] = useState(\"1.0\");\r\n  const [fileStatus, setFileStatus] = useState(\"Pending\");\r\n  const [fileDescription, setFileDescription] = useState(\"\");\r\n\r\n  const toInputDate = (d: Date | null) => {\r\n    if (!d) return \"\";\r\n    const year = d.getFullYear();\r\n    const month = `${d.getMonth() + 1}`.padStart(2, \"0\");\r\n    const day = `${d.getDate()}`.padStart(2, \"0\");\r\n    return `${year}-${month}-${day}`;\r\n  };\r\n\r\n  const isOverdue = () => {\r\n    if (!deadline) return false;\r\n    const end = new Date(deadline);\r\n    const today = new Date();\r\n    end.setHours(23, 59, 59, 999);\r\n    return end.getTime() < today.getTime();\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (!open) return;\r\n    (async () => {\r\n      setLoading(true);\r\n      try {\r\n        const [m, u, f, a] = await Promise.all([\r\n          axiosInstance.get(`/api/projects/${projectId}/milestones/${milestoneId}`),\r\n          axiosInstance.get(`/api/projects/${projectId}/milestones/${milestoneId}/comments`),\r\n          axiosInstance.get(`/api/projects/${projectId}/milestones/${milestoneId}/files`),\r\n          axiosInstance.get(`/api/projects/${projectId}/milestones/${milestoneId}/activity-logs`),\r\n        ]);\r\n        const md = m.data || {};\r\n        setTitle(md.title || \"\");\r\n        setDescription(md.description || \"\");\r\n        setStatus(md.status || \"Planned\");\r\n        setStartDate(md.start_date ? md.start_date.substring(0,10) : \"\");\r\n        setDeadline(md.deadline ? md.deadline.substring(0,10) : \"\");\r\n        setUpdates(Array.isArray(u.data) ? u.data : []);\r\n        setFiles(Array.isArray(f.data) ? f.data : []);\r\n        setActivity(Array.isArray(a.data) ? a.data : []);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    })();\r\n  }, [open, projectId, milestoneId]);\r\n\r\n  const submitUpdate = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    if (!content.trim()) return;\r\n    setPosting(true);\r\n    try {\r\n      const res = await axiosInstance.post(`/api/projects/${projectId}/milestones/${milestoneId}/comments`, { content });\r\n      setUpdates(prev => [res.data, ...prev]);\r\n      setContent(\"\");\r\n    } finally {\r\n      setPosting(false);\r\n    }\r\n  };\r\n\r\n  const startEdit = (id: string, initial: string) => {\r\n    setEditingId(id);\r\n    setEditingContent(initial);\r\n  };\r\n\r\n  const cancelEdit = () => {\r\n    setEditingId(null);\r\n    setEditingContent(\"\");\r\n  };\r\n\r\n  const saveEdit = async () => {\r\n    if (!editingId) return;\r\n    const body = { content: editingContent };\r\n    const res = await axiosInstance.patch(`/api/projects/${projectId}/milestones/${milestoneId}/comments/${editingId}`, body);\r\n    setUpdates(prev => prev.map(u => (u._id === editingId ? res.data : u)));\r\n    cancelEdit();\r\n  };\r\n\r\n  const deleteComment = async (id: string) => {\r\n    try {\r\n      await axiosInstance.delete(`/api/projects/${projectId}/milestones/${milestoneId}/comments/${id}`);\r\n      setUpdates(prev => prev.filter(u => u._id !== id));\r\n    } catch (_) {\r\n      // ignore; backend enforces permission\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Dialog open={open} onClose={onClose} maxWidth=\"lg\" fullWidth>\r\n      <DialogTitle>{title || \"Item\"}</DialogTitle>\r\n      <DialogContent dividers>\r\n        <Box display=\"flex\" gap={3} minHeight=\"52vh\">\r\n          <Box width={300} display=\"flex\" flexDirection=\"column\" gap={2}>\r\n            <TextField label=\"Name\" value={title} onChange={(e)=>setTitle(e.target.value)} fullWidth size=\"small\" />\r\n            <FormControl fullWidth size=\"small\">\r\n              <InputLabel>Status</InputLabel>\r\n              <Select label=\"Status\" value={status} onChange={(e)=>setStatus(e.target.value as string)}>\r\n                <MenuItem value=\"Planned\">Planned</MenuItem>\r\n                <MenuItem value=\"In Progress\">In Progress</MenuItem>\r\n                <MenuItem value=\"Completed\">Completed</MenuItem>\r\n                <MenuItem value=\"Overdue\">Overdue</MenuItem>\r\n              </Select>\r\n            </FormControl>\r\n            <TextField label=\"Due date\" type=\"date\" value={deadline} onChange={(e)=>setDeadline(e.target.value)} fullWidth size=\"small\" InputLabelProps={{ shrink: true }} />\r\n            <TextField label=\"Notes\" value={description} onChange={(e)=>setDescription(e.target.value)} multiline minRows={2} fullWidth />\r\n            <Box>\r\n              <Typography variant=\"caption\" sx={{ opacity: 0.7 }}>Files</Typography>\r\n              <Box display=\"flex\" alignItems=\"center\" gap={1} mt={0.5}>\r\n                <Chip size=\"small\" label={files.length} />\r\n              </Box>\r\n            </Box>\r\n            <Box>\r\n              <Typography variant=\"caption\" sx={{ opacity: 0.7 }}>Timeline</Typography>\r\n              <Box mt={1}>\r\n                <DateRangePicker\r\n                  slots={{ field: SingleInputDateRangeField }}\r\n                  localeText={{ start: \"Start\", end: \"End\" }}\r\n                  calendars={2}\r\n                  value={[\r\n                    startDate ? new Date(startDate) : null,\r\n                    deadline ? new Date(deadline) : null,\r\n                  ] as DateRange<Date>}\r\n                  onChange={(range: DateRange<Date>) => {\r\n                    const [start, end] = range;\r\n                    setStartDate(start ? toInputDate(start) : \"\");\r\n                    setDeadline(end ? toInputDate(end) : \"\");\r\n                  }}\r\n                  slotProps={{\r\n                    field: {\r\n                      sx: {\r\n                        width: 'fit-content',\r\n                        '& .MuiInputBase-root': {\r\n                          borderRadius: 999,\r\n                          bgcolor: isOverdue() ? 'error.main' : 'primary.main',\r\n                          color: '#fff',\r\n                          px: 0.75,\r\n                          py: 0,\r\n                          minHeight: 24,\r\n                          lineHeight: 1.2,\r\n                        },\r\n                        '& input': {\r\n                          textAlign: 'center',\r\n                          fontWeight: 600,\r\n                          fontSize: 12,\r\n                        },\r\n                        '& .MuiInputBase-input': {\r\n                          paddingTop: 0,\r\n                          paddingBottom: 0,\r\n                          paddingLeft: 4,\r\n                          paddingRight: 4,\r\n                        },\r\n                      },\r\n                    },\r\n                  }}\r\n                />\r\n              </Box>\r\n            </Box>\r\n            <Box>\r\n              <Typography variant=\"caption\" sx={{ opacity: 0.7 }}>Last updated</Typography>\r\n              <Typography variant=\"body2\" color=\"text.secondary\">{activity[0]?.createdAt ? new Date(activity[0].createdAt).toLocaleString() : '—'}</Typography>\r\n            </Box>\r\n            <Box display=\"flex\" justifyContent=\"flex-end\">\r\n              <Button variant=\"contained\" disabled={saving} onClick={async ()=>{ setSaving(true); try { await axiosInstance.patch(`/api/projects/${projectId}/milestones/${milestoneId}`, { title, description, status, start_date: startDate ? new Date(startDate).toISOString() : undefined, deadline: deadline ? new Date(deadline).toISOString() : undefined }); } finally { setSaving(false); } }}>Save</Button>\r\n            </Box>\r\n          </Box>\r\n\r\n          <Box flex={1}>\r\n            <Tabs value={tab} onChange={(_,v)=>setTab(v)}>\r\n              <Tab value=\"updates\" label={`Updates${typeof updates.length==='number' ? ` / ${updates.length}` : ''}`} />\r\n              <Tab value=\"files\" label={`Files${typeof files.length==='number' ? ` / ${files.length}` : ''}`} />\r\n              <Tab value=\"activity\" label={`Activity Log${typeof activity.length==='number' ? ` / ${activity.length}` : ''}`} />\r\n            </Tabs>\r\n            <Divider sx={{ mb: 2 }} />\r\n            <Box sx={{ maxHeight: '44vh', overflowY: 'auto' }}>\r\n              {loading ? (\r\n                <Box display=\"flex\" justifyContent=\"center\" py={4}><CircularProgress size={24} /></Box>\r\n              ) : (\r\n                <>\r\n                  {tab === 'updates' && (\r\n                    <Box display=\"flex\" flexDirection=\"column\" gap={2}>\r\n                      <Box component=\"form\" onSubmit={submitUpdate} sx={{ borderRadius: 2, p: 2, border: '1px solid', borderColor: 'divider' }}>\r\n                        <Box display=\"flex\" alignItems=\"center\" gap={1} mb={1}>\r\n                          <Chip size=\"small\" label=\"@\" />\r\n                          <Chip size=\"small\" label=\"GIF\" />\r\n                          <Chip size=\"small\" label=\"🙂\" />\r\n                          <Chip size=\"small\" label=\"✦\" />\r\n                        </Box>\r\n                        <TextField placeholder=\"Write an update and mention others with @\" value={content} onChange={(e)=>setContent(e.target.value)} fullWidth multiline minRows={4} />\r\n                        <Box display=\"flex\" justifyContent=\"flex-end\" gap={1} mt={1}>\r\n                          <Button variant=\"outlined\" type=\"button\" onClick={()=>setContent(\"\")}>Cancel</Button>\r\n                          <Button variant=\"contained\" type=\"submit\" disabled={posting}>Update</Button>\r\n                        </Box>\r\n                      </Box>\r\n                      {updates.length === 0 && <Typography variant=\"body2\" color=\"text.secondary\" align=\"center\" py={4}>No updates yet</Typography>}\r\n                      <Box display=\"flex\" flexDirection=\"column\" gap={1.5}>\r\n                        {updates.map(u => (\r\n                          <Box key={u._id} sx={{ p: 1.5, borderRadius: 1.5, border: '1px solid', borderColor: 'divider' }}>\r\n                            <Box display=\"flex\" justifyContent=\"space-between\" alignItems=\"center\">\r\n                              <Box>\r\n                                <Typography variant=\"caption\" color=\"text.secondary\">{u.user_id?.full_name ? `• ${u.user_id.full_name}` : ''} </Typography>\r\n                                <Typography variant=\"caption\" color=\"text.secondary\" sx={{ ml: 1 }}>{new Date(u.createdAt).toLocaleString()}</Typography>\r\n                              </Box>\r\n                              <Box display=\"flex\" gap={1}>\r\n                                {editingId === u._id ? (\r\n                                  <>\r\n                                    <Button size=\"small\" variant=\"outlined\" onClick={cancelEdit}>Cancel</Button>\r\n                                    <Button size=\"small\" variant=\"contained\" onClick={saveEdit} disabled={!editingContent.trim()}>Save</Button>\r\n                                  </>\r\n                                ) : (\r\n                                  <>\r\n                                    <Button size=\"small\" variant=\"text\" onClick={() => startEdit(u._id, u.content)}>Edit</Button>\r\n                                    <Button size=\"small\" color=\"error\" variant=\"text\" onClick={() => deleteComment(u._id)}>Delete</Button>\r\n                                  </>\r\n                                )}\r\n                              </Box>\r\n                            </Box>\r\n                            {editingId === u._id ? (\r\n                              <TextField value={editingContent} onChange={(e)=>setEditingContent(e.target.value)} fullWidth multiline minRows={3} sx={{ mt: 1 }} />\r\n                            ) : (\r\n                              <Typography variant=\"body2\" mt={0.5}>{u.content}</Typography>\r\n                            )}\r\n                          </Box>\r\n                        ))}\r\n                      </Box>\r\n                    </Box>\r\n                  )}\r\n                  {tab === 'files' && (\r\n                    <Box display=\"flex\" flexDirection=\"column\" gap={1.5}>\r\n                      <Box display=\"flex\" justifyContent=\"space-between\" alignItems=\"center\">\r\n                        <Typography variant=\"subtitle2\">Files</Typography>\r\n                        <Button variant=\"contained\" size=\"small\" onClick={()=>setShowUploader(v=>!v)}>\r\n                          {showUploader ? 'Close' : 'Add file'}\r\n                        </Button>\r\n                      </Box>\r\n                      {showUploader && (\r\n                        <Box sx={{ p: 2, borderRadius: 1.5, border: '1px dashed', borderColor: 'divider', bgcolor: 'background.paper' }}>\r\n                          <Typography variant=\"subtitle2\" gutterBottom>Upload a file</Typography>\r\n                          <Typography variant=\"caption\" color=\"text.secondary\">Max 20MB. Images and documents are supported.</Typography>\r\n                          <Box mt={1.5} display=\"grid\" gridTemplateColumns=\"1fr 1fr\" gap={2}>\r\n                            <TextField label=\"Title\" value={fileTitle} onChange={(e)=>setFileTitle(e.target.value)} size=\"small\" />\r\n                            <TextField label=\"Type\" value={fileType} onChange={(e)=>setFileType(e.target.value)} size=\"small\" />\r\n                            <TextField label=\"Version\" value={fileVersion} onChange={(e)=>setFileVersion(e.target.value)} size=\"small\" />\r\n                            <TextField label=\"Status\" value={fileStatus} onChange={(e)=>setFileStatus(e.target.value)} size=\"small\" />\r\n                            <TextField label=\"Description\" value={fileDescription} onChange={(e)=>setFileDescription(e.target.value)} size=\"small\" fullWidth multiline minRows={2} sx={{ gridColumn: '1 / span 2' }} />\r\n                          </Box>\r\n                          <Box mt={1.5} display=\"flex\" alignItems=\"center\" gap={1}>\r\n                            <Button variant=\"contained\" component=\"label\" disabled={uploading}>\r\n                              {uploading ? 'Uploading...' : 'Choose file'}\r\n                              <input hidden type=\"file\" accept=\"image/*,.pdf,.doc,.docx,.ppt,.pptx,.xls,.xlsx\" onChange={async (e) => {\r\n                                const f = e.target.files?.[0];\r\n                                if (!f) return;\r\n                                setUploading(true);\r\n                                try {\r\n                                  const form = new FormData();\r\n                                  form.append('file', f);\r\n                                  if (fileTitle) form.append('title', fileTitle);\r\n                                  if (fileType) form.append('type', fileType);\r\n                                  if (fileVersion) form.append('version', fileVersion);\r\n                                  if (fileStatus) form.append('status', fileStatus);\r\n                                  if (fileDescription) form.append('description', fileDescription);\r\n                                  const res = await axiosInstance.post(`/api/projects/${projectId}/milestones/${milestoneId}/files`, form, { headers: { 'Content-Type': 'multipart/form-data' } });\r\n                                  setFiles(prev => [res.data, ...prev]);\r\n                                  setFileTitle(\"\");\r\n                                  setFileDescription(\"\");\r\n                                  setShowUploader(false);\r\n                                } finally {\r\n                                  setUploading(false);\r\n                                  e.currentTarget.value = '';\r\n                                }\r\n                              }} />\r\n                            </Button>\r\n                            {uploading && <CircularProgress size={20} />}\r\n                            <Button variant=\"text\" onClick={()=>setShowUploader(false)}>Cancel</Button>\r\n                          </Box>\r\n                        </Box>\r\n                      )}\r\n                      {files.length === 0 && <Typography variant=\"body2\" color=\"text.secondary\">No files</Typography>}\r\n                      {files.map(f => (\r\n                        <Box key={f._id} display=\"flex\" alignItems=\"center\" justifyContent=\"space-between\" sx={{ p: 1.5, borderRadius: 1.5, border: '1px solid', borderColor: 'divider' }}>\r\n                          <Box>\r\n                            <Typography variant=\"body2\" fontWeight={600}>{f.title}</Typography>\r\n                            <Typography variant=\"caption\" color=\"text.secondary\">{new Date(f.createdAt).toLocaleString()}</Typography>\r\n                          </Box>\r\n                          <Button size=\"small\" href={f.file_url} target=\"_blank\" rel=\"noreferrer\" variant=\"text\">Open</Button>\r\n                        </Box>\r\n                      ))}\r\n                    </Box>\r\n                  )}\r\n                  {tab === 'activity' && (\r\n                    <Box display=\"flex\" flexDirection=\"column\" gap={1.5}>\r\n                      {activity.length === 0 && <Typography variant=\"body2\" color=\"text.secondary\">No activity</Typography>}\r\n                      {activity.map(a => (\r\n                        <Box key={a._id} sx={{ p: 1.5, borderRadius: 1.5, border: '1px solid', borderColor: 'divider' }}>\r\n                          <Typography variant=\"caption\" color=\"text.secondary\">{new Date(a.createdAt).toLocaleString()} {a.created_by?.full_name ? `• ${a.created_by.full_name}` : ''}</Typography>\r\n                          <Typography variant=\"body2\" fontWeight={600} mt={0.5}>{a.action}</Typography>\r\n                        </Box>\r\n                      ))}\r\n                    </Box>\r\n                  )}\r\n                </>\r\n              )}\r\n            </Box>\r\n          </Box>\r\n        </Box>\r\n      </DialogContent>\r\n      <DialogActions>\r\n        <Button onClick={onClose}>Close</Button>\r\n      </DialogActions>\r\n    </Dialog>\r\n  );\r\n}\r\n\r\n\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2140, "column": 0}, "map": {"version":3,"sources":["file:///D:/SEP490/SEP490_G94_FALL25_FrontEnd/src/app/projects/%5Bid%5D/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useState } from \"react\";\nimport { useParams, useRouter } from \"next/navigation\";\nimport axiosInstance from \"../../../../ultis/axios\";\nimport { getStartOfWeekUTC, addDays } from \"@/lib/timeline\";  \nimport ResponsiveSidebar from \"@/components/ResponsiveSidebar\"; \nimport GanttChart from \"@/components/GanttChart\";\nimport ModalMilestone from \"@/components/ModalMilestone\";\nimport { Button, Popover, FormGroup, FormControlLabel, Checkbox as MUICheckbox, Select as MUISelect, MenuItem, Typography, Box } from \"@mui/material\";\nimport ArrowBackIcon from \"@mui/icons-material/ArrowBack\";\nimport AddIcon from \"@mui/icons-material/Add\";\n\ntype Milestone = {\n  _id: string;\n  title: string;\n  start_date?: string;\n  deadline?: string;\n  status?: string;\n  description?: string;\n  createdAt?: string;\n};\n\nexport default function ProjectDetailPage() {\n  const router = useRouter();\n  const params = useParams();\n  const projectId = Array.isArray(params?.id) ? params?.id[0] : (params?.id as string);\n  const [milestones, setMilestones] = useState<Milestone[] | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n\n  useEffect(() => {\n    if (!projectId) return;\n    (async () => {\n      try {\n        const res = await axiosInstance.get(`/api/projects/${projectId}/milestones`);\n        console.log(res.data);\n        setMilestones(Array.isArray(res.data) ? res.data : []);\n      } catch (e: any) {\n        setError(e?.response?.data?.message || 'Không thể tải milestone');\n      } finally {\n        setLoading(false);\n      }\n    })();\n  }, [projectId]);\n\n  return (\n    <div className=\"min-h-screen bg-[var(--background)]\">\n      <ResponsiveSidebar />\n      <main className=\"p-4 md:p-6 md:ml-64\">\n        <div className=\"mx-auto w-full max-w-7xl\">\n          <div className=\"mb-6 md:mb-8 flex items-center justify-between\">\n            <div className=\"space-y-1\">\n              <div className=\"text-[10px] md:text-xs uppercase tracking-wider text-foreground/60\">Dự án</div>\n              <h1 className=\"text-2xl md:text-3xl font-semibold tracking-tight text-foreground\">Milestones</h1>\n            </div>\n            <div className=\"flex items-center gap-2\">\n              <Button variant=\"contained\" size=\"medium\" startIcon={<AddIcon />} onClick={() => router.push(`/projects/${projectId}/milestones/new`)}>\n                Thêm Milestone\n              </Button>\n              <Button variant=\"outlined\" size=\"medium\" onClick={() => router.push(`/projects/${projectId}/features`)}>\n                Features\n              </Button>\n              <Button variant=\"outlined\" size=\"medium\" onClick={() => router.push(`/projects/${projectId}/team`)}>\n                Quản lý nhóm\n              </Button>\n              <Button variant=\"outlined\" size=\"medium\" startIcon={<ArrowBackIcon />} onClick={() => router.back()}>\n                Quay lại\n              </Button>\n            </div>\n          </div>\n\n          {loading ? (\n            <div className=\"rounded-xl border border-[var(--border)] p-6 bg-[color-mix(in_olab,_var(--accent)_10%,_var(--background))] animate-pulse\">\n              <div className=\"h-6 w-32 rounded bg-foreground/10 mb-4\"></div>\n              <div className=\"h-4 w-48 rounded bg-foreground/10 mb-2\"></div>\n              <div className=\"h-72 w-full rounded bg-foreground/10\"></div>\n            </div>\n          ) : error ? (\n            <div className=\"rounded-xl border border-red-500/40 bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-200 p-4\">\n              {error}\n            </div>\n          ) : (\n            <Timeline milestones={milestones || []} projectId={projectId} onLocalUpdate={setMilestones as any} />\n          )}\n        </div>\n      </main>\n    </div>\n  );\n}\n\nfunction Timeline({ milestones, projectId, onLocalUpdate }: { milestones: Milestone[]; projectId: string; onLocalUpdate: any }) {\n  const [weekStart, setWeekStart] = useState<Date>(getStartOfWeekUTC(new Date()));\n  const [viewMode, setViewMode] = useState<'Days' | 'Weeks' | 'Months' | 'Quarters'>('Days');\n  const [autoFit, setAutoFit] = useState<boolean>(true);\n  const [statusFilter, setStatusFilter] = useState<Record<string, boolean>>({\n    Planned: true,\n    'In Progress': true,\n    Completed: true,\n    Overdue: true,\n  });\n  const [filterOpen, setFilterOpen] = useState<boolean>(false);\n  const [filterAnchor, setFilterAnchor] = useState<HTMLElement | null>(null);\n  const [openModal, setOpenModal] = useState<{open: boolean; milestoneId?: string}>({open:false});\n  if (!milestones || milestones.length === 0) {\n    return <div className=\"opacity-70\">Chưa có milestone nào.</div>;\n  }\n\n  return (\n    <div className=\"w-full\">\n      <div className=\"sticky top-0 z-10 -mx-4 md:-mx-6 mb-4 bg-[color-mix(in_olab,_var(--background)_80%,_transparent)]/80 backdrop-blur supports-[backdrop-filter]:bg-[color-mix(in_olab,_var(--background)_70%,_transparent)] px-4 md:px-6 py-3 border-b border-[var(--border)]\">\n        <div className=\"flex flex-wrap items-center gap-3\">\n          <MUISelect\n            value={viewMode}\n            onChange={(e: any) => setViewMode(e.target.value as any)}\n            size=\"small\"\n            sx={{ minWidth: 140 }}\n          >\n            <MenuItem value=\"Days\">Days</MenuItem>\n            <MenuItem value=\"Weeks\">Weeks</MenuItem>\n            <MenuItem value=\"Months\">Months</MenuItem>\n            <MenuItem value=\"Quarters\">Quarters</MenuItem>\n          </MUISelect>\n          <FormControlLabel\n            className=\"ml-2\"\n            control={<MUICheckbox size=\"small\" checked={autoFit} onChange={(e: any) =>setAutoFit(e.target.checked)} />}\n            label={<Typography variant=\"body2\">Auto Fit</Typography>}\n          />\n          <div className=\"md:ml-2\">\n            <Button\n              variant=\"outlined\"\n              size=\"small\"\n              onClick={(e: any)=>{ setFilterAnchor(e.currentTarget); setFilterOpen(true); }}\n            >\n              Bộ lọc\n            </Button>\n            <Popover\n              open={filterOpen}\n              anchorEl={filterAnchor}\n              onClose={()=>setFilterOpen(false)}\n              anchorOrigin={{ vertical: 'bottom', horizontal: 'right' }}\n              transformOrigin={{ vertical: 'top', horizontal: 'right' }}\n              slotProps={{ paper: { sx: { p: 2, width: 280 } } }}\n            >\n              <Typography variant=\"overline\" sx={{ opacity: 0.7 }}>Trạng thái</Typography>\n              <FormGroup sx={{ mt: 1 }}>\n                {['Planned','In Progress','Completed','Overdue'].map(s => (\n                  <FormControlLabel\n                    key={s}\n                    control={<MUICheckbox checked={!!statusFilter[s]} onChange={(e: any)=> setStatusFilter(prev => ({...prev, [s]: e.target.checked}))} />}\n                    label={s}\n                  />\n                ))}\n              </FormGroup>\n              <Box sx={{ display:'flex', justifyContent:'flex-end', gap:1, mt:2 }}>\n                <Button size=\"small\" variant=\"outlined\" onClick={()=>setStatusFilter({Planned:true,'In Progress':true,Completed:true,Overdue:true})}>Chọn hết</Button>\n                <Button size=\"small\" variant=\"outlined\" onClick={()=>setStatusFilter({Planned:false,'In Progress':false,Completed:false,Overdue:false})}>Bỏ hết</Button>\n                <Button size=\"small\" variant=\"contained\" onClick={()=>setFilterOpen(false)}>Áp dụng</Button>\n              </Box>\n            </Popover>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"rounded-xl border border-[var(--border)] bg-[color-mix(in_olab,_var(--accent)_8%,_var(--background))] shadow-sm\">\n        <div>\n          <GanttChart\n            milestones={(milestones || []).filter(m => m.status ? statusFilter[m.status] : true)}\n            viewMode={viewMode as any}\n            startDate={weekStart}\n            autoFit={autoFit}\n            pagingStepDays={viewMode === 'Quarters' ? 90 : viewMode === 'Months' ? 30 : viewMode === 'Weeks' ? 7 : 7}\n            onRequestShift={(days) => setWeekStart(prev => addDays(prev, days))}\n            onMilestoneShift={(id, deltaDays) => {\n              // Local optimistic update: shift start_date and deadline by deltaDays\n              onLocalUpdate((prev: Milestone[]) => {\n                const shiftDate = (iso?: string) => {\n                  if (!iso) return iso;\n                  const d = new Date(iso);\n                  d.setUTCDate(d.getUTCDate() + deltaDays);\n                  return d.toISOString();\n                };\n                return (prev || []).map((m) => m._id === id ? ({\n                  ...m,\n                  start_date: shiftDate(m.start_date),\n                  deadline: shiftDate(m.deadline),\n                }) : m);\n              });\n            }}\n            onMilestoneClick={(id) => setOpenModal({open:true, milestoneId: id})}\n          />\n        </div>\n      </div>\n\n      {openModal.open && openModal.milestoneId && (\n        <ModalMilestone\n          open={openModal.open}\n          onClose={() => setOpenModal({open:false})}\n          projectId={projectId}\n          milestoneId={openModal.milestoneId}\n        />\n      )}\n    </div>\n  );\n}\n\n"],"names":[],"mappings":"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","debugId":null}}]
}